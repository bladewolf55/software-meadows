<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta property="og:image" content="https://www.softwaremeadows.com/images/header.png" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117916694-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-117916694-1');
  </script>
  <script src='https://www.softwaremeadows.com/header-scripts/prism.js'></script>

  <link rel='stylesheet' href='https://www.softwaremeadows.com/css/default.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/kavadocs.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/prism.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/responsive.css' />


  <title>Home | Software Meadows</title>
</head>

<body>
  <div class="row">
    <div class="col-left">
      <nav id="nav" class="nav">
        <div id="menu">
          <ol>
<li><a href="https://www.softwaremeadows.com/">Home</a></li>
<li><a href="https://www.softwaremeadows.com/devops">DevOps</a></li>
<li><a href="https://www.softwaremeadows.com/well-being">Well-Being</a></li>
<li><a href="https://www.softwaremeadows.com/about">About</a></li>
<li><a target="_blank" href="https://github.com/bladewolf55">On GitHub</a></li>
</ol>

        </div>
        <div id="recent">
          <h2>Recent</h2>
          <a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_stay_health_exercise'>Remote Work Tiny Tips - Stay Health (Exercise)</a><a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_focusing_and_breaking'>Remote Work Tiny Tips - Focusing</a><a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_forming_new_habits'>Remote Work Tiny Tips - Forming New Habits</a><a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_keeping_your_routine'>Remote Work Tiny Tips - Keeping Your Routine</a><a href='https://www.softwaremeadows.com/posts/continuous_integration_flow_-_an_accurate_and_unlovely_graphic'>Continuous Integration Flow - An Accurate and Unlovely Graphic</a>
        </div>
        <div id="history">
          <h2>History</h2>
          <ol class='tree'><li class='history-year'><label for='2020'>2020</label><input type='checkbox'  id='2020' /><ol><li class='history-month'><label for='2020-3'>March</label><input type='checkbox'  id='2020-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_stay_health_exercise'>Remote Work Tiny Tips - Stay Health (Exercise)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_focusing_and_breaking'>Remote Work Tiny Tips - Focusing</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_forming_new_habits'>Remote Work Tiny Tips - Forming New Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_keeping_your_routine'>Remote Work Tiny Tips - Keeping Your Routine</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/continuous_integration_flow_-_an_accurate_and_unlovely_graphic'>Continuous Integration Flow - An Accurate and Unlovely Graphic</a></li></ol></li><li class='history-month'><label for='2020-2'>February</label><input type='checkbox'  id='2020-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/why_the_repository_pattern_fails_for_legacy_database_like_yours_and_wh'>Why the Repository Pattern Fails for Legacy Databases Like Yours and What to Do About It</a></li></ol></li><li class='history-month'><label for='2020-1'>January</label><input type='checkbox'  id='2020-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/mock_returning_a_list_as_imongoqueryable_for_unit_testing'>Mock returning a List as IMongoQueryable for unit testing</a></li></ol></li></ol></li><li class='history-year'><label for='2019'>2019</label><input type='checkbox'  id='2019' /><ol><li class='history-month'><label for='2019-12'>December</label><input type='checkbox'  id='2019-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/git_basics_with_visual_studio_2019'>Git Basics With Visual Studio 2019</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_azure_devops__building_and_releasing_git_branches,_a_simple_example'>TFS/Azure DevOps: Building and Releasing Git Branches, A Simple Example</a></li></ol></li><li class='history-month'><label for='2019-10'>October</label><input type='checkbox'  id='2019-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/who_are_you_coding_for_'>Who Are You Coding For?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_viewservice_pattern__especially_good_for_windows_forms'>The ViewService Pattern: Especially Good For Windows Forms</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/most_of_us_developers_arent_smart'>Most of Us Developers Aren't Smart</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/confirmed_android_text_punctuation_voice_commands'>Confirmed Android text punctuation voice commands</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/summary_of_accelerate_state_of_devops_2019'>Summary of "Accelerate State of DevOps 2019"</a></li></ol></li><li class='history-month'><label for='2019-9'>September</label><input type='checkbox'  id='2019-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/posh-git_fork_to_allow_visual_studio_to_use_tfvc_and_ignore_git'>Posh-git Fork to Allow Visual Studio to Use TFVC and Ignore Git</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/asp_net_core_controllers_-_exploring_how_to_test_a_simple_feature'>ASP.NET Core Controllers - Exploring How To Test a Simple Feature</a></li></ol></li><li class='history-month'><label for='2019-8'>August</label><input type='checkbox'  id='2019-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_micro-exclusions-_two_poor_daily_standup_practices'>Remote Micro-Exclusions: Two Poor Daily Standup Practices</a></li></ol></li><li class='history-month'><label for='2019-6'>June</label><input type='checkbox'  id='2019-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/memstate-_the_practical_argument_for_big_in-memory_data'>Memstate: The Practical Argument for Big, In-Memory Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_apostrophes_3_simple_rules_3_common_mistakes'>Grammar for Developers - Apostrophes: 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_accelerate__the_best_book_about_devops'>Weekly Sugar: 'Accelerate', the Best Book About DevOps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/20190616-1610 flatts_posts-casts_review_003'>Flatt's Posts/Casts Review #003 - Incentives, Emotions, Diversity, and Applying Bodyguard Training to Coding</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_applying_kanban_principles_to_your_personal_task_list'>Weekly Sugar: Applying Kanban Principles to Your Personal Task List</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/joe_developer-_when_(not)_to_drink_coffee'>Joe Developer: When (not) to Drink Coffee</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/an_open_email_to_blackwing602_com_about_their_poor_account_security'>An Open Email to Blackwing602.com About Their Poor Account Security</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_take_a_walk'>Weekly Sugar: Take a Walk</a></li></ol></li><li class='history-month'><label for='2019-5'>May</label><input type='checkbox'  id='2019-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_response_to_jonathan_cutrells_podcast_episode_crafting_your_work_b'>A Response to Jonathan Cutrell's Podcast Episode "Crafting Your Work By Your Strengths"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_(not)_to_drink_coffe__a_preview'>Weekly Sugar: When (not) to Drink Coffee, a Preview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_posts-casts_review_002_-_real_problems__strengths__korean_war'>Flatt's Posts/Casts Review #002 - Real Problems, Strengths, Korean War, Smaller Problems, Good/Bad Shame</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development_repost'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_post-cast_reviews_001_-_job_search_burnout_blazor_net_core_configuration'>Flatt's Posts/Casts Review #001 - Job Search, Burnout, Blazor, .NET Core Configuration, Personal Agency, Natural Movement, KonMari in Business</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_is_music_a_distraction_'>Weekly Sugar: When is Music a Distraction?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/yes_or_no_a_classic_and_effective_book_for_decision_making'>"Yes or No?" -- A Classic and Effective Book For Decision-Making</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_git_aliases_with_a_nod_to_Smith_and_Jones'>"My" Git Aliases (with a nod to Smith and Jones)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/proposal-_combine_agile_and_craftsmanship_manifestos_into_agile_crafted_software_values'>Proposal: Combine Agile and Craftsmanship Manifestos into "Agile Crafted Software Values"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/suggestion_for_uncle_bob-_change_software_craftsmanship_to_crafted_software'>Suggestion for Uncle Bob: Change "Software Craftsmanship" to "Crafted Software"</a></li></ol></li><li class='history-month'><label for='2019-4'>April</label><input type='checkbox'  id='2019-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_mixed_relationship_with_tdd'>My Mixed Relationship with TDD</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont_be_a_lazy_programmer_like_matthew_jones_isnt'>Don't Be a Lazy Programmer Like Matthew Jones Isn't</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/personal_reflections_on_removing_distractions_for_improved_productivity'>Personal Reflections on Removing Distractions for Improved Productivity</a></li></ol></li><li class='history-month'><label for='2019-3'>March</label><input type='checkbox'  id='2019-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating_a_modern__practical_resume'>Creating a Modern, Practical Résumé</a></li></ol></li><li class='history-month'><label for='2019-2'>February</label><input type='checkbox'  id='2019-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_week_of_web_blocking_for_productivity_and_well-being'>Digital Minimalism: A Week of Web Blocking for Productivity and Well-Being</a></li></ol></li><li class='history-month'><label for='2019-1'>January</label><input type='checkbox'  id='2019-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/revert_packagereference_project_to_packages_config'>Revert PackageReference Project to Packages.config</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_a_simple_photo_album_site_with_wix'>Create a Simple Photo Album Site With Wix</a></li></ol></li></ol></li><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-11'>November</label><input type='checkbox'  id='2018-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/three_rules_for_successfully_starting_a_habit'>Three Rules for Successfully Starting a Habit</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/going_full_screen-_when_and_why'>Going Full Screen: When and Why</a></li></ol></li><li class='history-month'><label for='2018-10'>October</label><input type='checkbox'  id='2018-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nuget_packagereference_in_visual_studio'>NuGet PackageReference in Visual Studio</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/accelerate_book_notes_and_quotes'>Accelerate Book Notes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/getting_started_with_software_(and_business_and_life)_skills'>Getting Started With Software (and Business and Life) Skills</a></li></ol></li><li class='history-month'><label for='2018-9'>September</label><input type='checkbox'  id='2018-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shortest_user_story_intro_ever'>Shortest User Story Intro Ever</a></li></ol></li><li class='history-month'><label for='2018-8'>August</label><input type='checkbox'  id='2018-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_simple__effective_meeting_agenda_system'>A Simple, Effective Meeting Agenda System</a></li></ol></li><li class='history-month'><label for='2018-7'>July</label><input type='checkbox'  id='2018-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/highly_opinionated_android_to_do_and_note_apps_comparison'>Highly Opinionated Android To Do and Note Apps Comparison</a></li></ol></li><li class='history-month'><label for='2018-6'>June</label><input type='checkbox'  id='2018-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_vs_code-_orange_icon_resurrection'>Tid Bits: VS Code: Orange Icon Resurrection</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_use_visual_studio_for_git_diff-merge'>Tid Bits: Use Visual Studio for Git Diff/Merge</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/3_chrome_extensions_for_performance__research__and_blogging'>3 Chrome Extensions for Performance, Research, and Blogging</a></li></ol></li><li class='history-month'><label for='2018-5'>May</label><input type='checkbox'  id='2018-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/chrome_browser_pinned_startup_tabs'>Chrome Browser Pinned Startup Tabs</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/solving_nancyfx_tokenizer_keychain_bin_invalid_read_type_request_115'>Solving NancyFx Tokenizer keyChain.bin Invalid Read Type Request '115'</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_ideal_markdown_editor_-_thoughts_and_reviews_part_1'>My Ideal Markdown Editor - Thoughts and Reviews Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_why_and_how_of_posh_git_contenxt_menu_transcripts_and_tf_exe'>My Why and How of posh-git: Context Menu, Transcripts, and TF.exe</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how_to_secure-erase_regular_and_ssd_hard_drives_without_superstition'>How to Secure-Erase Regular and SSD Hard Drives Without Superstition</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sql_permissions_for_data_folders'>SQL Permissions for Data Folders</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_-_3_simple_rules_3_common_mistakes'>Grammar for Developers - 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/notes_on_improving_developer_team_practices_1'>Notes on Improving Developer Team Practices</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/using_git_locally_with_remote_tfvc'>Using Git Locally With Remote TFVC</a></li></ol></li><li class='history-month'><label for='2018-4'>April</label><input type='checkbox'  id='2018-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/raw_code_-_picture_renaming_and_sorting'>Raw Code - Picture Renaming and Sorting</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/becoming_a_professional_blogger_part_1'>Becoming a Professional Blogger Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/entity_framework_6_child_deletion_and_foreign_keys_string_int_guid'>Entity Framework 6 Child Deletion and Foreign Keys - String Int GUID</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/linqpad_-_refresh_entity_after_submitchanges_to_avoid_cached_results'>LINQPad - Refresh Entity after SubmitChanges to Avoid Cached Results</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_blog_post_using_markdown_monster_command_addin'>Create Blog Post Using Markdown Monster's Command Addin</a></li></ol></li><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/batch_image_resize_checking_min_max_in_both_dimensions'>Batch Image Resize Checking Min Max in Both Dimensions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deepshadow'>Announcing DeepShadow</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="toggleNav()">&#9776;</a>
      </nav>
    </div>
    <div class="col-right">
      <header>
        <div id="site-image">
          <img src="https://www.softwaremeadows.com/images/header.png" alt="" />
        </div>
        <h1 id="site-name"></h1>
        <div id="site-subtitle">A pleasant walk through computing</div>
      </header>
      <section id="content">
        <hr />

        <p id="comment">
          Comment for me? Send an <a href="mailto:charles@tfhome.us?subject=Comment on Home | Software Meadows">email</a>. I might even update the post!
        </p>
        

      </section>
      <!-- posts only appear in home index -->
      <section id="posts">
        
              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></h2>
                <p class='post-info'><span class='posted-on'>2013-05-19 12:46</span></p>
                <div class='post-content'><div class="series">
<p>Parts<br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1.html">1) Preface</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-2.html">2) Introduction</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-3.html">3) A Simple Table</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-4.html">4) One to One or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-5.html">5) Zero or One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-6.html">6) One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-7.html">7) One to Zero or One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-8.html">8) One to One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-9.html">9) Many to Many, Simple</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-10.html">10) Many to Many with Payload</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1019.html">11) Enumerables</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-12.html">12) Inheritance</a></p>
</div>
<p><a href="https://drive.google.com/folderview?id=0B9XcO7NbiPZcc29IZDVIN2kzZDQ&amp;usp=sharing">Source Code</a></p>
<h2 id="entity-framework-5-code-first-relationships">Entity Framework 5 Code First Relationships</h2>
<h3 id="many-to-many-simple">Many to Many, Simple</h3>
<p><em>Edward reminds the Professor of something important. The Professor expounds on the meaning of a library.</em></p>
<p>“Professor,” said Edward the next day, “something has been bothering me.”</p>
<p>“Oh, what is that my boy?”</p>
<p>“Well, you’ve explained about library cards and magnifiers and pencils and bicycles and reading rooms. But, you haven’t said anything about books. Isn’t that what a library is for?”</p>
<p>The Professor became serious. “Edward, books are a great treasure. They have survived as a means for storing folly and wisdom for centuries. If you could sum up all living people’s knowledge, it would not equal the knowledge found in a library. The word library, indeed, means collection of books. But, no, our modern library is not simply for books. It is for encountering knowledge outside of ourselves. When we wander these aisles and open a book’s covers, we travel through time and space into another human’s imagination. This is why we get ‘lost’ in a book. But we are not losing ourselves. We are finding the cosmos and our place in it.”</p>
<p>After a few seconds, the Professor left the room, beckoning Edward to follow.</p>
<p>Look around you, [he said]. Books! Music! Paintings! How many books can a person read in a lifetime? How many readers has a book had?</p>
<p>This is a simple relationship. Many to Many. A person reads many books, a book has many readers. The Framework makes this relationship even easier. In the database, such a relationship requires a joining table. Here are the tables we’re about to create.</p>
<p><strong>T-SQL</strong></p>
<pre><code class="language-csharp">create table Books (
 BookId int not null primary key,
 Title nvarchar(max) not null
)

create table PersonBooks (
 PersonId int not null foreign key references Persons(PersonId),
 BookId int not null foreign key references Books(BookId),
 constraint pkPersonBook primary key (PersonId, BookId)
)
</code></pre>
<p>In this case, a diagram may help.</p>
<div class="separator" style="clear: both; text-align: center;">
<p><a href="https://www.softwaremeadows.com/posts/edward-farley-part-9/images/image00.png"><img src="https://www.softwaremeadows.com/posts/edward-farley-part-9/images/image00.png" alt="" /></a></p>
</div>
<p>A many-to-many relationship is two one-to-many relationships that meet in the middle, so to speak.</p>
<p>While we could (and tomorrow will) explicitly create a joining class, for this simple case we don’t need to. The Framework manages the join behind the scenes.</p>
<p><strong>LearningEFSchema.cs</strong></p>
<pre><code class="language-csharp">//Navigation
public virtual ICollection&lt;LibraryCard&gt; LibraryCards { get; set; }
public virtual ICollection&lt;Pencil&gt; Pencils { get; set; }
public virtual ICollection&lt;Magnifier&gt; Magnifiers { get; set; }
public virtual Bicycle Bicycle { get; set; }
[Required]
public virtual ReadingRoom ReadingRoom { get; set; }
public virtual ICollection&lt;Book&gt; Books { get; set; }

public Person()
{
    LibraryCards = new HashSet&lt;LibraryCard&gt;();
    Magnifiers = new HashSet&lt;Magnifier&gt;();
    Pencils = new HashSet&lt;Pencil&gt;();
    Books = new HashSet&lt;Book&gt;();
}
....

public class Book
{
    //Primary Key
    public int BookId { get; set; }
    [Required]
    public string Title { get; set; }

    //Navigation
    public virtual ICollection&lt;Person&gt; Persons { get; set; }

    public Book()
    {
        Persons = new HashSet&lt;Person&gt;();
    }
}
</code></pre>
<p>In our Context, we have some extra work to do. As with our previous examples, the Framework will happily create foreign key names according to its whims.* Moreover, it will create the joining table with a name that I personally find unattractive. And so, dear Edward, we must venture into your father’s favorite realm, the Fluent API.</p>
<p>First, we add the DbSet as usual.</p>
<p><strong>LearningEFDb.cs</strong></p>
<pre><code class="language-csharp">public class LearningEFDb: DbContext
{
    public DbSet&lt;Bicycle&gt; Bicycles { get; set; }
    public DbSet&lt;Book&gt; Books { get; set; }
</code></pre>
<p>Now, we override the OnModelCreating procedure and explicitly tell the Framework how we want things named. I have tried many times to enforce my desired naming via attributes, to no avail. Someday I must ask the fine people who manage the Framework why they seemingly overlooked such useful attributes for such a common relationship. But here we are:</p>
<pre><code class="language-csharp">protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity&lt;Person&gt;()
        .HasMany(e =&gt; e.Books)
        .WithMany(e =&gt; e.Persons)
        .Map(t =&gt; t
            .MapLeftKey(&quot;PersonId&quot;)
            .MapRightKey(&quot;BookId&quot;)
            .ToTable(&quot;PersonBooks&quot;)
            );
}
</code></pre>
<p>Back to our program. To show the many-to-many relationship, we will enlist the help of our nearby Librarian.</p>
<p>[They had reached an information desk, and an elderly lady smiled at the Professor.]</p>
<p>Mrs. Jane Eager, I am illustrating for young Edward Farley, here, the many-to-many relationship. Would you work your magic on that temperamental machine and find books you and Edward have both read? [She typed and showed him the screen.] Really? Edward, I must say, you have been well raised. These titles come from a writer who is a master of us all. Now, attend, Edward. There is quite a bit of code.</p>
<p><strong>Program.cs</strong></p>
<pre><code class="language-csharp">Console.WriteLine(&quot;Add two books and save&quot;);
Book book1 = new Book() { Title = &quot;The House of Arden&quot; };
Book book2 = new Book() { Title = &quot;Harding's Luck&quot; };
_db.Books.Add(book1);
_db.Books.Add(book2);
SaveChanges();

Console.WriteLine(&quot;Add another person and save&quot;);
Person person2 = new Person() { Name = &quot;Jane Eager&quot; };
person2.LibraryCards.Add(person.LibraryCards.First());
person2.ReadingRoom = new ReadingRoom() { Location = &quot;NorthEast Wing&quot; };
_db.Persons.Add(person2);
SaveChanges();

Console.WriteLine(&quot;Each person has read both books&quot;);
person.Books.Add(book1);
person.Books.Add(book2);
person2.Books.Add(book1);
person2.Books.Add(book2);
SaveChanges();
Console.WriteLine(person.Name + &quot;'s books: &quot; 
    + String.Join(&quot;, &quot;, person.Books.Select(a =&gt; a.Title)));
Console.WriteLine(person2.Name + &quot;'s books: &quot; 
    + String.Join(&quot;, &quot;, person.Books.Select(a =&gt; a.Title)));
</code></pre>
<p>Let’s run the program.</p>
<pre><code class="language-console">Create Person without a name.
Saving changes.
  ERROR: The Name field is required.
  ERROR: The ReadingRoom field is required.
Add the required name and Library Card.
Add the Reading Room and save.
Saving changes.
Successful save.
Get the record we just saved, and display.
Person: Edward Farley has card: 123 and Reading Room: Lewis Wing Floor -3
Create and save Magnifier with required serial number
Saving changes.
Successful save.
Retrieve Magnifier, show it doesn't belong to someone.
Magnifier: Bar123, Person: available
Edward gets the Magnifier. Save and retrieve.
Saving changes.
Successful save.
Magnifier: Bar123, Person: Edward Farley
Try to add duplicate magnifier
Saving changes.
  ERROR: Magnifier with this serial nbr already exists.
Add/save Pencil setting Nickname to null.
Saving changes.
  ERROR: The Nickname field is required.
Set Nickname to empty string and save
Saving changes.
Successful save.
Retrieve pencil, change Nickname, save
Pencil: , Person: Edward Farley
Saving changes.
Successful save.
Pencil: Blackwing, Person: Edward Farley
Attempt adding Bicycle without a Person
Saving changes.
  ERROR: The INSERT statement conflicted with the FOREIGN KEY constraint &quot;FK_dbo.Bicycles_dbo.Persons_PersonId&quot;. The conflict occurred in database &quot;EFDb&quot;, table &quot;dbo.Persons&quot;, column 'PersonId'.
The statement has been terminated.
Set the Person, save, retrieve and show
Saving changes.
Successful save.
Model: Herman, Person: Edward Farley
Add two books and save
Saving changes.
Successful save.
Add another person and save
Saving changes.
Successful save.
Each person has read both books
Saving changes.
Successful save.
Edward Farley's books: The House of Arden, Harding's Luck
Jane Eager's books: The House of Arden, Harding's Luck
Finished
</code></pre>
<p>“And there you have the many-to-many relationship! Thank you, Jane,” said the Professor. When they reached Edward’s reading room, the Professor paused and said quietly, “Edward, you may not know this, but Jane’s husband is a fine author himself. If you enjoyed the the masterful E. Nesbit’s writing, you would surely like his as well. Come, let me show you....”</p>
<hr />
<p>*This isn’t quite fair on the Professor’s part. Entity Framework is consistent in its naming.</p>
<p><a href="http://dictionary.reference.com/browse/library?&amp;path=/">Library</a><br />
<a href="http://en.wikipedia.org/wiki/Pinakes">Pinakes</a><br />
<a href="http://en.wikipedia.org/wiki/E._Nesbit">E. Nesbit, author of <em>The House of Arden</em> and <em>Harding’s Luck</em>, and others</a><br />
<a href="http://en.wikipedia.org/wiki/Edward_Eager">Edward Eager, author of <em>Half Magic</em> and others</a></p>
<hr />
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></h2>
                <p class='post-info'><span class='posted-on'>2013-05-19 12:44</span></p>
                <div class='post-content'><div class="series">
<p>Parts<br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1.html">1) Preface</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-2.html">2) Introduction</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-3.html">3) A Simple Table</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-4.html">4) One to One or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-5.html">5) Zero or One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-6.html">6) One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-7.html">7) One to Zero or One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-8.html">8) One to One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-9.html">9) Many to Many, Simple</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-10.html">10) Many to Many with Payload</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1019.html">11) Enumerables</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-12.html">12) Inheritance</a></p>
</div>
<p><a href="https://drive.google.com/folderview?id=0B9XcO7NbiPZcc29IZDVIN2kzZDQ&amp;usp=sharing">Source Code</a></p>
<h2 id="entity-framework-5-code-first-relationships">Entity Framework 5 Code First Relationships</h2>
<h3 id="one-to-one">One to One</h3>
<p><em>Edward’s reading room is scrutinized. The Professor solves a paradox.</em></p>
<p>Edward’s parents sent him off with some of the Sunderland Library ice cream that he, Edward, had thoughtfully brought home for them as a gift.</p>
<p>“Yes, thank you, dear,” said his mother, “we quite loved the adventure of trying Cricket and Cream Sherbet, and feel you have earned the rest.”</p>
<p>Once again, he met the Professor at Edward’s reading room. This time he (Edward) was five minutes early. Inside the room, the Professor walked around, commenting on particular books (“Excellent imagery.”), magazines (“Dreadful, but you’re too young to know.”), paintings (“I’d have preferred an orange cloud, but then I am not an artistic genius.”) and Edward’s homework (“Do they not teach grammar anymore? Never pluralize with an apostrophe, dear boy. That rule’s as certain as the rising sun.”)</p>
<p>“Well, Edward, the reason we are here, is that here is the reason for our reason.”</p>
<p>The Professor waited, expectantly. Edward knew his part by now. “What, exactly, does that mean, Professor?”</p>
<p>It means, [the Professor said, reclining on the couch], that to be in a library is to be studious, to be studious one must have an environment conducive to study, and whatever one’s study, that study must contain an element of reason.</p>
<p>When a person is born, he or she is assigned a library card. More library cards can be obtained (especially when they involve ice cream). Each person is also assigned a Reading Room in that first library.</p>
<p>This is our oddest relationship yet. It is One to One. To our human, intuitive mind, it is natural. For example, a person has one left hand, a left hand belongs to one person. But the database underlying our Framework cannot accomplish this. Look here. [He projected code onto the wall using his personal laptop.] This is T-SQL that will create a one-to-one relationship.</p>
<pre><code class="language-csharp">create table One (
 OneId int not null identity primary key,
 Name varchar(10) null
)

create table Two (
 OneId int not null primary key references One(OneId),
 Name varchar(10)
)

alter table One add constraint fk1 foreign key (OneId) references Two(OneId)
</code></pre>
<p>Yet, if you run the following statements, they will fail catastrophically.</p>
<pre><code class="language-csharp">insert One(Name) values('asdf')
insert Two(Name) values('qwer')
</code></pre>
<p>Why, Edward?</p>
<p>[“Because...” Edward said slowly, “because you’re telling table One it has a record before table Two has one, but table Two has to have one because they’re one-to-one. Right?”]</p>
<p>Precisely. I could hardly have said it more clearly myself. It is a paradox. We must insert both records at the same time, but the database won’t allow us to do that. There may be databases that can, but--well, we do not speak of those here. [And the Professor smiled mysteriously.]</p>
<p>By the way, here is the script to remove those two tables, since they now have foreign key relationships to each other!</p>
<pre><code class="language-csharp">alter table One drop constraint fk1
drop table Two
drop table One
</code></pre>
<p>What are we to do? More exactly, what did we do? Fortunately, we can employ a--I hesitate to use the word, but it fits--hack. Hmm. Makes me think of sick cats.</p>
<p>We’ll tell the Framework to create a One to Zero or One table relationship, but enforce the one-to-one requirement in the classes. Our classes won’t complain, because we are able to assign the relationships simultaneously.</p>
<p><strong>LearningEFSchema.cs</strong></p>
<pre><code class="language-csharp">public class Person: IValidatableObject
{
    //Primary Key
    public int PersonId { get; set; }
    [Required]
    public string Name { get; set; }

    //Navigation
    public virtual ICollection&lt;LibraryCard&gt; LibraryCards { get; set; }
    public virtual ICollection&lt;Pencil&gt; Pencils { get; set; }
    public virtual ICollectionMagnifier&gt; Magnifiers { get; set; }
    public virtual Bicycle Bicycle { get; set; }
    [Required]
    public virtual ReadingRoom ReadingRoom { get; set; }

public class ReadingRoom
{
    //Primary Key same as Person
    [Key, ForeignKey(&quot;Person&quot;)]
    public int PersonId { get; set; }
    [Required]
    public string Location { get; set; }

    //Navigation
    public virtual Person Person { get; set; }
}
</code></pre>
<p>As with the Bicycle, the ReadingRoom requires a person. But now the Person’s ReadingRoom property is required as well. We update the Context.</p>
<p><strong>LearningEFDb.cs</strong></p>
<pre><code class="language-csharp">public DbSet&lt;ReadingRoom&gt; ReadingRooms { get; set; }
</code></pre>
<p>Now, we must update our code. Unlike before, we can’t simply append a reading room. It is now intrinsically linked to a person. We must modify our very first instantiation of a person.</p>
<p><strong>Program.cs</strong></p>
<pre><code class="language-csharp">Console.WriteLine(&quot;Create Person without a name.&quot;);
Person edward = new Person();
_db.Persons.Add(edward);
SaveChanges();
Console.WriteLine(&quot;Add the required name and Library Card.&quot;);
edward.Name = &quot;Edward Farley&quot;;
edward.LibraryCards.Add(new LibraryCard() { Number = 123 });
Console.WriteLine(&quot;Add the Reading Room and save.&quot;);
edward.ReadingRoom = new ReadingRoom() { Location = &quot;Lewis Wing Floor -3&quot; };
//Must Save Changes after library card AND reading room have been added.
SaveChanges();
Console.WriteLine(&quot;Get the record we just saved, and display.&quot;);
edward = _db.Persons.First();
Console.WriteLine(&quot;Person: &quot; + edward.Name 
    + &quot; has card: &quot; + edward.LibraryCards.First().Number
    + &quot; and Reading Room: &quot; + edward.ReadingRoom.Location);
</code></pre>
<p>Our program runs as expected, with just the first part changing.</p>
<pre><code class="language-console">Create Person without a name.
Saving changes.
  ERROR: The Name field is required.
  ERROR: The ReadingRoom field is required.
Add the required name and Library Card.
Add the Reading Room and save.
Saving changes.
Successful save.
Get the record we just saved, and display.
Person: Edward Farley has card: 123 and Reading Room: Lewis Wing Floor -3
....
It should be clear, but just in case it is not: the database table is shown below, and does not enforce a one-to-one relationship. Though there might be some clever way to make it do so!
T-SQL
create table ReadingRooms (
 PersonId int not null primary key foreign key references Persons(PersonId),
 Location nvarchar(max) not null
)
</code></pre>
<p>That’s quite enough for today. Tomorrow we leave the realm of “one to something” cardinality, and venture into new relationships. Ah, Edward, do I spy Cricket and Cream Sherbet? Outstanding!</p>
<hr />
<p><a href="http://parallelx.blogspot.com/2012/06/t-sql-create-relationships.html">T-SQL create relationships</a><br />
<a href="http://www.loc.gov/rr/main/">Library of Congress Main Reading Room</a></p>
<hr />
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></h2>
                <p class='post-info'><span class='posted-on'>2013-05-19 12:42</span></p>
                <div class='post-content'><div class="series">
<p>Parts<br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1.html">1) Preface</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-2.html">2) Introduction</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-3.html">3) A Simple Table</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-4.html">4) One to One or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-5.html">5) Zero or One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-6.html">6) One to Zero or Many</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-7.html">7) One to Zero or One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-8.html">8) One to One</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-9.html">9) Many to Many, Simple</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-10.html">10) Many to Many with Payload</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-1019.html">11) Enumerables</a><br />
<a href="http://www.softwaremeadows.com/2013/05/edward-farley-part-12.html">12) Inheritance</a></p>
</div>
<p><a href="https://drive.google.com/folderview?id=0B9XcO7NbiPZcc29IZDVIN2kzZDQ&amp;usp=sharing">Source Code</a></p>
<h2 id="entity-framework-5-code-first-relationships">Entity Framework 5 Code First Relationships</h2>
<h3 id="one-to-zero-or-one">One to Zero or One</h3>
<p><em>In which the Professor demonstrates that travel is educational.</em></p>
<p>Edward had sprinted from the bicycle lot, walked quickly (but did not run) in the library’s main floor, then took the stairs two at a time and jogged to his reading room where Professor Relvar was waiting. Edward was exactly thirty-seven seconds early.</p>
<p>“My dear boy, you look exhausted.” The Professor smiled slightly and adjusted his reading glasses. “Isn’t your bicycle in good repair?”</p>
<p>“Sure it is, Professor,” said Edward, huffing between words. “My dad helps me with it. Mom, too.”</p>
<p>“To be sure. Your mother was always mechanically inclined. Well, I’m glad to hear your conveyance is functionally sound. We sojourn now to the bicycle lot, and from there to Sunderland Library.”</p>
<p>Edward’s eyes widened, imagining even more bicycling, but he didn’t say anything. In the lot, they retrieved their bicycles and started off. The Professor rode a classic Kermit. Edward pedaled a bright red Herman. As they rode, the Professor lectured....</p>
<p>Not everyone owns a Bicycle, [he said]. Many people enjoy walking to the library. I myself walked for years, until I spied a picture of this lovely two-wheeler on display at a Henson shop garage sale. (I did not buy the garage, however.) Bicycles are manufactured to order, so each person’s is unique. Choosing a bicycle is, as you know, a delicate thing. For various historical, practical and aesthetic reasons, a person doesn’t have to have a bicycle, but once built it’s his or hers for life. Bicycle makers are proud of their ability to maintain and modify a bicycle for decades.</p>
<p>A person doesn’t have to a have a bicycle, but a bicycle must have an owner. We have a One to Zero or One relationship, and it is a bit peculiar.</p>
<p>[Edward had been frowning, and raised his hand. He could ride pretty well one-handed. “Yes?” asked the Professor. Edward said, “Why wouldn’t you just add properties to the Person class--you know, table columns--like HasBicycle and BicycleModel?”]</p>
<p>Ah, excellent! I was beginning to think your parents had misinformed me about your aptitude.</p>
<p>The answer is, you could. But what if, later, you wanted to know more about this bicycle? You might end up with twenty properties. Would it make sense to have those all in the Persons table when a person might not even own a bicycle? No.*</p>
<p>I will describe the way I solve this problem, and you will have to imagine the code.** First, the schema.</p>
<p><strong>LearningEFSchema.cs</strong></p>
<pre><code class="language-csharp">public class Person: IValidatableObject
{
    //Primary Key
    public int PersonId { get; set; }
    [Required]
    public string Name { get; set; }

    //Navigation
    public virtual ICollection&lt;LibraryCard&gt; LibraryCards { get; set; }
    public virtual ICollection Pencils&lt;Pencil&gt; { get; set; }
    public virtual ICollection Magnifiers&lt;Magnifier&gt; { get; set; }
    public virtual Bicycle Bicycle { get; set; }
    ....

public class Bicycle
{
    //Primary Key same as Person
    [Key, ForeignKey(&quot;Person&quot;)]
    public int PersonId { get; set; }
    [Required]
    public string Model { get; set; }

    //Navigation
    public virtual Person Person { get; set; }
}
</code></pre>
<p>The important items are that the Person class references just one Bicycle that is not required, and Bicycle references just one Person where the PersonId property is both the primary key and the foreign key. In essence, we are extending the Person table.</p>
<p>The Context class gets the expected DbSet.</p>
<p><strong>LearningEFDb.cs</strong></p>
<pre><code class="language-csharp">public class LearningEFDb: DbContext
{
    public DbSet&lt;Bicycle&gt; Bicycles { get; set; }
</code></pre>
<p>We add to our program.</p>
<p><strong>Program.cs</strong></p>
<pre><code class="language-csharp">Console.WriteLine(&quot;Add Bicycle without a Person&quot;);
Bicycle bicycle = new Bicycle() { Model = &quot;Herman&quot; };
_db.Bicycles.Add(bicycle);
SaveChanges();
Console.WriteLine(&quot;Set the Person, save, retrieve and show&quot;);
bicycle.Person = edward;
SaveChanges();
bicycle = _db.Bicycles.First();
Console.WriteLine(&quot;Model: &quot; + bicycle.Model + &quot;, Person: &quot; + bicycle.Person.Name);
</code></pre>
<p>And run it.</p>
<pre><code class="language-console">Create Person without a name.
Saving changes.
  ERROR: The Name field is required.
Add the required name and Library Card and save.
Saving changes.
Successful save.
Get the record we just saved, and display.
Person: Edward Farley has card: 123
Create and save Magnifier with required serial number
Saving changes.
Successful save.
Retrieve Magnifier, show it doesn't belong to someone.
Magnifier: Bar123, Person: available
Edward gets the Magnifier. Save and retrieve.
Saving changes.
Successful save.
Magnifier: Bar123, Person: Edward Farley
Try to add duplicate magnifier
Saving changes.
  ERROR: Magnifier with this serial nbr already exists.
Add/save Pencil setting Nickname to null.
Saving changes.
  ERROR: The Nickname field is required.
Set Nickname to empty string and save
Saving changes.
Successful save.
Retrieve pencil, change Nickname, save
Pencil: , Person: Edward Farley
Saving changes.
Successful save.
Pencil: Blackwing, Person: Edward Farley
Add Bicycle without a Person
Saving changes.
  ERROR: The INSERT statement conflicted with the FOREIGN KEY constraint &quot;FK_dbo.Bicycles_dbo.Persons_PersonId&quot;. The conflict occurred in database &quot;EFDb&quot;, table &quot;dbo.Persons&quot;, column 'PersonId'.
The statement has been terminated.
Set the Person, save, retrieve and show
Saving changes.
Successful save.
Model: Herman, Person: Edward Farley
Finished
</code></pre>
<p>It is not a lovely error, but suits our educational purpose. The resulting table would be scripted so:</p>
<p><strong>T-SQL</strong></p>
<pre><code class="language-csharp">create table Bicycles (
 PersonId not null primary key foreign key references Persons(PersonId),
 Model nvarchar(max) not null
)
</code></pre>
<p>With that, Edward and Professor Relvar had arrived at Sunderland Library which, as anyone knows, maintains the finest collection of ice cream recipe books found anywhere. Plus, chefs who prepare scoops for anyone who cares to taste.</p>
<p>“And if it weren’t for the bicycles,” the Professor stated, licking happily at his Chocolate Peanut Butter and Pretzel Sundae, “all Sunderland regulars would be fat. Another scoop, Edward?”</p>
<hr />
<p>*Though some would say, “Yes.” The question is when to use table-per-type, table-per-hierarchy, or table-per-concrete-type, which will come up again in Inheritance. Also, the Professor might be thinking ahead too much. Some Agile development methods would say to do the simplest thing first (TPH), then change to TPT if needed. The fact is, the author doesn’t like TPH and discriminator columns.</p>
<p>**Which, fortunately, we don’t have to wait for.</p>
<p><a href="http://www.imdb.com/title/tt0079588/?ref_=fn_al_tt_1">The Muppet Movie</a><br />
<a href="http://www.imdb.com/title/tt0089791/?ref_=sr_1">Pee-wee’s Big Adventure</a><br />
<a href="http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx">EF Inheritance Models</a><br />
<a href="http://www.amazon.com/The-Perfect-Scoop-Granitas-Accompaniments/dp/158008219X/ref=sr_1_1?ie=UTF8&amp;qid=1367882906&amp;sr=8-1&amp;keywords=ice+cream+recipes">The Perfect Scoop</a></p>
<hr />
</div>
              </div>
               <div class='paging'><a href='index47.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index49.html'>Older</a></div>
      </section>
      <footer><p>All original content copyright (c) Charles L Flatt</p>
</footer>
    </div>
  </div>
  
  <script>
    function toggleNav() {
      var x = document.getElementById("nav");
      if (x.className === "nav") {
        x.className += " responsive";
      } else {
        x.className = "nav";
      }
    }</script>

  

</body>

</html>