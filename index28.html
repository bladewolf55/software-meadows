<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta property="og:image" content="https://www.softwaremeadows.com/images/header.png" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117916694-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-117916694-1');
  </script>
  <script src='https://www.softwaremeadows.com/header-scripts/prism.js'></script>

  <link rel='stylesheet' href='https://www.softwaremeadows.com/css/default.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/kavadocs.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/prism.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/responsive.css' />


  <title>Home | Software Meadows</title>
</head>

<body>
  <div class="row">
    <div class="col-left">
      <nav id="nav" class="nav">
        <div id="menu">
          <ol>
<li><a href="https://www.softwaremeadows.com/">Home</a></li>
<li><a href="https://www.softwaremeadows.com/devops">DevOps</a></li>
<li><a href="https://www.softwaremeadows.com/well-being">Well-Being</a></li>
<li><a href="https://www.softwaremeadows.com/about">About</a></li>
<li><a target="_blank" href="https://github.com/bladewolf55">On GitHub</a></li>
</ol>

        </div>
        <div id="recent">
          <h2>Recent</h2>
          <a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_forming_new_habits'>Remote Work Tiny Tips - Forming New Habits</a><a href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_keeping_your_routine'>Remote Work Tiny Tips - Keeping Your Routine</a><a href='https://www.softwaremeadows.com/posts/continuous_integration_flow_-_an_accurate_and_unlovely_graphic'>Continuous Integration Flow - An Accurate and Unlovely Graphic</a><a href='https://www.softwaremeadows.com/posts/why_the_repository_pattern_fails_for_legacy_database_like_yours_and_wh'>Why the Repository Pattern Fails for Legacy Databases Like Yours and What to Do About It</a><a href='https://www.softwaremeadows.com/posts/mock_returning_a_list_as_imongoqueryable_for_unit_testing'>Mock returning a List as IMongoQueryable for unit testing</a>
        </div>
        <div id="history">
          <h2>History</h2>
          <ol class='tree'><li class='history-year'><label for='2020'>2020</label><input type='checkbox'  id='2020' /><ol><li class='history-month'><label for='2020-3'>March</label><input type='checkbox'  id='2020-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_forming_new_habits'>Remote Work Tiny Tips - Forming New Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_keeping_your_routine'>Remote Work Tiny Tips - Keeping Your Routine</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/continuous_integration_flow_-_an_accurate_and_unlovely_graphic'>Continuous Integration Flow - An Accurate and Unlovely Graphic</a></li></ol></li><li class='history-month'><label for='2020-2'>February</label><input type='checkbox'  id='2020-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/why_the_repository_pattern_fails_for_legacy_database_like_yours_and_wh'>Why the Repository Pattern Fails for Legacy Databases Like Yours and What to Do About It</a></li></ol></li><li class='history-month'><label for='2020-1'>January</label><input type='checkbox'  id='2020-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/mock_returning_a_list_as_imongoqueryable_for_unit_testing'>Mock returning a List as IMongoQueryable for unit testing</a></li></ol></li></ol></li><li class='history-year'><label for='2019'>2019</label><input type='checkbox'  id='2019' /><ol><li class='history-month'><label for='2019-12'>December</label><input type='checkbox'  id='2019-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/git_basics_with_visual_studio_2019'>Git Basics With Visual Studio 2019</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_azure_devops__building_and_releasing_git_branches,_a_simple_example'>TFS/Azure DevOps: Building and Releasing Git Branches, A Simple Example</a></li></ol></li><li class='history-month'><label for='2019-10'>October</label><input type='checkbox'  id='2019-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/who_are_you_coding_for_'>Who Are You Coding For?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_viewservice_pattern__especially_good_for_windows_forms'>The ViewService Pattern: Especially Good For Windows Forms</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/most_of_us_developers_arent_smart'>Most of Us Developers Aren't Smart</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/confirmed_android_text_punctuation_voice_commands'>Confirmed Android text punctuation voice commands</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/summary_of_accelerate_state_of_devops_2019'>Summary of "Accelerate State of DevOps 2019"</a></li></ol></li><li class='history-month'><label for='2019-9'>September</label><input type='checkbox'  id='2019-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/posh-git_fork_to_allow_visual_studio_to_use_tfvc_and_ignore_git'>Posh-git Fork to Allow Visual Studio to Use TFVC and Ignore Git</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/asp_net_core_controllers_-_exploring_how_to_test_a_simple_feature'>ASP.NET Core Controllers - Exploring How To Test a Simple Feature</a></li></ol></li><li class='history-month'><label for='2019-8'>August</label><input type='checkbox'  id='2019-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_micro-exclusions-_two_poor_daily_standup_practices'>Remote Micro-Exclusions: Two Poor Daily Standup Practices</a></li></ol></li><li class='history-month'><label for='2019-6'>June</label><input type='checkbox'  id='2019-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/memstate-_the_practical_argument_for_big_in-memory_data'>Memstate: The Practical Argument for Big, In-Memory Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_apostrophes_3_simple_rules_3_common_mistakes'>Grammar for Developers - Apostrophes: 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_accelerate__the_best_book_about_devops'>Weekly Sugar: 'Accelerate', the Best Book About DevOps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/20190616-1610 flatts_posts-casts_review_003'>Flatt's Posts/Casts Review #003 - Incentives, Emotions, Diversity, and Applying Bodyguard Training to Coding</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_applying_kanban_principles_to_your_personal_task_list'>Weekly Sugar: Applying Kanban Principles to Your Personal Task List</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/joe_developer-_when_(not)_to_drink_coffee'>Joe Developer: When (not) to Drink Coffee</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/an_open_email_to_blackwing602_com_about_their_poor_account_security'>An Open Email to Blackwing602.com About Their Poor Account Security</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_take_a_walk'>Weekly Sugar: Take a Walk</a></li></ol></li><li class='history-month'><label for='2019-5'>May</label><input type='checkbox'  id='2019-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_response_to_jonathan_cutrells_podcast_episode_crafting_your_work_b'>A Response to Jonathan Cutrell's Podcast Episode "Crafting Your Work By Your Strengths"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_(not)_to_drink_coffe__a_preview'>Weekly Sugar: When (not) to Drink Coffee, a Preview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_posts-casts_review_002_-_real_problems__strengths__korean_war'>Flatt's Posts/Casts Review #002 - Real Problems, Strengths, Korean War, Smaller Problems, Good/Bad Shame</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development_repost'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_post-cast_reviews_001_-_job_search_burnout_blazor_net_core_configuration'>Flatt's Posts/Casts Review #001 - Job Search, Burnout, Blazor, .NET Core Configuration, Personal Agency, Natural Movement, KonMari in Business</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_is_music_a_distraction_'>Weekly Sugar: When is Music a Distraction?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/yes_or_no_a_classic_and_effective_book_for_decision_making'>"Yes or No?" -- A Classic and Effective Book For Decision-Making</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_git_aliases_with_a_nod_to_Smith_and_Jones'>"My" Git Aliases (with a nod to Smith and Jones)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/proposal-_combine_agile_and_craftsmanship_manifestos_into_agile_crafted_software_values'>Proposal: Combine Agile and Craftsmanship Manifestos into "Agile Crafted Software Values"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/suggestion_for_uncle_bob-_change_software_craftsmanship_to_crafted_software'>Suggestion for Uncle Bob: Change "Software Craftsmanship" to "Crafted Software"</a></li></ol></li><li class='history-month'><label for='2019-4'>April</label><input type='checkbox'  id='2019-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_mixed_relationship_with_tdd'>My Mixed Relationship with TDD</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont_be_a_lazy_programmer_like_matthew_jones_isnt'>Don't Be a Lazy Programmer Like Matthew Jones Isn't</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/personal_reflections_on_removing_distractions_for_improved_productivity'>Personal Reflections on Removing Distractions for Improved Productivity</a></li></ol></li><li class='history-month'><label for='2019-3'>March</label><input type='checkbox'  id='2019-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating_a_modern__practical_resume'>Creating a Modern, Practical Résumé</a></li></ol></li><li class='history-month'><label for='2019-2'>February</label><input type='checkbox'  id='2019-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_week_of_web_blocking_for_productivity_and_well-being'>Digital Minimalism: A Week of Web Blocking for Productivity and Well-Being</a></li></ol></li><li class='history-month'><label for='2019-1'>January</label><input type='checkbox'  id='2019-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/revert_packagereference_project_to_packages_config'>Revert PackageReference Project to Packages.config</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_a_simple_photo_album_site_with_wix'>Create a Simple Photo Album Site With Wix</a></li></ol></li></ol></li><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-11'>November</label><input type='checkbox'  id='2018-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/three_rules_for_successfully_starting_a_habit'>Three Rules for Successfully Starting a Habit</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/going_full_screen-_when_and_why'>Going Full Screen: When and Why</a></li></ol></li><li class='history-month'><label for='2018-10'>October</label><input type='checkbox'  id='2018-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nuget_packagereference_in_visual_studio'>NuGet PackageReference in Visual Studio</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/accelerate_book_notes_and_quotes'>Accelerate Book Notes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/getting_started_with_software_(and_business_and_life)_skills'>Getting Started With Software (and Business and Life) Skills</a></li></ol></li><li class='history-month'><label for='2018-9'>September</label><input type='checkbox'  id='2018-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shortest_user_story_intro_ever'>Shortest User Story Intro Ever</a></li></ol></li><li class='history-month'><label for='2018-8'>August</label><input type='checkbox'  id='2018-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_simple__effective_meeting_agenda_system'>A Simple, Effective Meeting Agenda System</a></li></ol></li><li class='history-month'><label for='2018-7'>July</label><input type='checkbox'  id='2018-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/highly_opinionated_android_to_do_and_note_apps_comparison'>Highly Opinionated Android To Do and Note Apps Comparison</a></li></ol></li><li class='history-month'><label for='2018-6'>June</label><input type='checkbox'  id='2018-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_vs_code-_orange_icon_resurrection'>Tid Bits: VS Code: Orange Icon Resurrection</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_use_visual_studio_for_git_diff-merge'>Tid Bits: Use Visual Studio for Git Diff/Merge</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/3_chrome_extensions_for_performance__research__and_blogging'>3 Chrome Extensions for Performance, Research, and Blogging</a></li></ol></li><li class='history-month'><label for='2018-5'>May</label><input type='checkbox'  id='2018-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/chrome_browser_pinned_startup_tabs'>Chrome Browser Pinned Startup Tabs</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/solving_nancyfx_tokenizer_keychain_bin_invalid_read_type_request_115'>Solving NancyFx Tokenizer keyChain.bin Invalid Read Type Request '115'</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_ideal_markdown_editor_-_thoughts_and_reviews_part_1'>My Ideal Markdown Editor - Thoughts and Reviews Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_why_and_how_of_posh_git_contenxt_menu_transcripts_and_tf_exe'>My Why and How of posh-git: Context Menu, Transcripts, and TF.exe</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how_to_secure-erase_regular_and_ssd_hard_drives_without_superstition'>How to Secure-Erase Regular and SSD Hard Drives Without Superstition</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sql_permissions_for_data_folders'>SQL Permissions for Data Folders</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_-_3_simple_rules_3_common_mistakes'>Grammar for Developers - 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/notes_on_improving_developer_team_practices_1'>Notes on Improving Developer Team Practices</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/using_git_locally_with_remote_tfvc'>Using Git Locally With Remote TFVC</a></li></ol></li><li class='history-month'><label for='2018-4'>April</label><input type='checkbox'  id='2018-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/raw_code_-_picture_renaming_and_sorting'>Raw Code - Picture Renaming and Sorting</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/becoming_a_professional_blogger_part_1'>Becoming a Professional Blogger Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/entity_framework_6_child_deletion_and_foreign_keys_string_int_guid'>Entity Framework 6 Child Deletion and Foreign Keys - String Int GUID</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/linqpad_-_refresh_entity_after_submitchanges_to_avoid_cached_results'>LINQPad - Refresh Entity after SubmitChanges to Avoid Cached Results</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_blog_post_using_markdown_monster_command_addin'>Create Blog Post Using Markdown Monster's Command Addin</a></li></ol></li><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/batch_image_resize_checking_min_max_in_both_dimensions'>Batch Image Resize Checking Min Max in Both Dimensions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deepshadow'>Announcing DeepShadow</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="toggleNav()">&#9776;</a>
      </nav>
    </div>
    <div class="col-right">
      <header>
        <div id="site-image">
          <img src="https://www.softwaremeadows.com/images/header.png" alt="" />
        </div>
        <h1 id="site-name"></h1>
        <div id="site-subtitle">A pleasant walk through computing</div>
      </header>
      <section id="content">
        <hr />

        <p id="comment">
          Comment for me? Send an <a href="mailto:charles@tfhome.us?subject=Comment on Home | Software Meadows">email</a>. I might even update the post!
        </p>
        

      </section>
      <!-- posts only appear in home index -->
      <section id="posts">
        
              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></h2>
                <p class='post-info'><span class='posted-on'>2017-03-03 11:01</span></p>
                <div class='post-content'><h1 id="the-summary">The Summary</h1>
<p>What if you</p>
<ol>
<li>Don't store your NuGet packages in source control.</li>
<li>Have a NuGet package that's hosted in a private source.</li>
<li>Need to locally test continuous integration.</li>
<li>Or need offsite (i.e. cloud) continuous integration.</li>
</ol>
<p>There are a few general solutions.</p>
<ol>
<li>Store the private packages in source control. <em><strong>I'd do this one.</strong></em></li>
<li>Set up public access to the private source. Not likely.</li>
<li>For testing, set up a local private NuGet source (just point to the folder).</li>
</ol>
<h1 id="the-problems">The Problems</h1>
<p>NuGet packages are generally great. But there can be problems when it comes to source control and continuous integration.</p>
<p>Most sites' advice on storing NuGet packages in source control (regardless of git, Mercurial, TFS, SVN, etc) is: don't.</p>
<p>The reason is pretty simple. If package restore is enabled, they'll get downloaded and rebuilt anyway, so why store them and take up repository space? With the later NuGet installations, a cache is maintained in the user's profile, so a trip to the NuGet servers might not even be necessary.</p>
<p>The counter argument is also pretty simple. What if the NuGet source isn't available? Suddenly, you can't restore your packages, can't build, can't work. When would this happen?</p>
<p>All of these assume you've downloaded from source control (such as GitHub or TFS), but haven't built the code yet.</p>
<ol>
<li>You get on a plane and then try to build. If you have no Internet, you can't get the packages.</li>
<li>For some other reason you don't have an Internet connection.</li>
<li>You're connected, but the NuGet site is down.</li>
<li>One of the packages uses a locally (i.e. corporate internal) hosted NuGet source. It's not on the internet, so you can't download the package.</li>
<li>It's been a long time since anyone's built the source, and a package has been removed from NuGet.</li>
<li>You use the cloud for continuous integration, which won't have access to your private NuGet source.</li>
</ol>
<p>Most of the above can be solved by building the solution immediately after getting it. But here's a real-world example of number 4. I was working for a client, and had access to their Team Foundation Server. I got the source via a VPN connection, copied it to my laptop, and tried to build. This client has several NuGet packages they host locally. They're proprietary, so hosting them on a public site like NuGet would be wrong.</p>
<p>And I didn't have access to that package source, so I couldn't build.</p>
<p>Again, these problems could be solved, and maybe they point to some environment changes needing to be made. But wouldn't it be just as easy to include the package in source control?</p>
<h1 id="including-the-nuget-package-folder-in-tfs">Including the NuGet Package Folder in TFS</h1>
<p>If you're using a version of TFS prior to 2012, I can't help you (and you should upgrade). Starting in TFS 2012, the tfignore file became available. The purpose of tfignore is just like gitignore and hgignore: tell source control which files to not display for adding/tracking.</p>
<p>But it can also be used to explicitly allow files. Why is this needed? Because, unlike git or Mercurial, TFS + Visual Studio ignores certain files by default, and I haven't found a way to change that or even find out what files those are. Dlls are ignored by default, for example.</p>
<ol>
<li>Create the .tfignore file in the root of the team project.</li>
<li>Edit the file.</li>
<li>Add the package fies to TFS.</li>
<li>Add your .tfignore file to source control.</li>
</ol>
<p>The manual way to create a .tfignore file is, in the project folder root</p>
<ol>
<li>Right-click &gt; New &gt; Text File</li>
<li>Enter <code>.tfignore.</code></li>
</ol>
<p>See the trailing period? That's the magic sauce. Otherwise, Windows doesn't let you create a file/folder with a leading period.</p>
<p>Visual Studio shows package folders in Excluded Changes by default. But dlls, and sometimes lib folders, are <em>not</em> included, and we absolutely need those.</p>
<p>Here's how to include the <em>entire</em> packages folder. The leading ! means &quot;don't ignore&quot;.</p>
<pre><code class="language-csharp">!packages\*
</code></pre>
<p>These don't work. Note, especially, that leading backslash doesn't work, even thought that's what VS itself will create via the GUI.</p>
<ul>
<li>!\packages*.*</li>
<li>!packages</li>
<li>!packages\</li>
</ul>
<p>To include a specific package, such as one that's hosted in a private NuGet source, ignore the packages folder, then specify the package path without the version number.</p>
<pre><code class="language-csharp">packages
!packages\My.Private.Utility.*
</code></pre>
<p>In Visual Studio Team Explorer, choose Pending Changes, find Excluded Changes, click Detected: x adds(s).</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private/images/17-03-03_101910.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private/images/17-03-03_101910.png" alt="2017-03-03_101910" title="2017-03-03_101910" /></a></p>
<p>Deselect all files (they're selected by default, a <em>bad</em> choice), then check the ones you want and Promote them (which is the same as &quot;add&quot; in git or Mercurial).</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private/images/17-03-03_103218.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private/images/17-03-03_103218.png" alt="2017-03-03_103218" title="2017-03-03_103218" /></a></p>
<h1 id="using-a-private-repo-for-testing">Using a Private Repo for Testing</h1>
<p>If you're testing CI on a separate machine, you can use or modify a nuget.config file to include that source. I tried this at the project level, but it didn't work, so I created the nuget.config file at the solution level. (But that ability is supposedly removed in later NuGet versions. So confusing!)</p>
<p>Here's an example file:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;packageRestore&gt;
    &lt;add key=&quot;enabled&quot; value=&quot;True&quot; /&gt;
    &lt;add key=&quot;automatic&quot; value=&quot;True&quot; /&gt;
  &lt;/packageRestore&gt;
  &lt;packageSources&gt;
    &lt;add key=&quot;nuget.org&quot; value=&quot;https://api.nuget.org/v3/index.json&quot; protocolVersion=&quot;3&quot; /&gt;
  &lt;add key=&quot;local&quot; value=&quot;C:\Users\charles\Documents\Testing\NuGet\&quot; /&gt;
  &lt;/packageSources&gt;
&lt;/configuration&gt;
</code></pre>
<p>Again, this must not end up in the production source control repository!</p>
<h1 id="the-wrap-up">The Wrap Up</h1>
<p>I'm not weighing in on storing NuGet packages in source control, except to say that there are some situations where it's clear to me it's a good ideal. Having a private NuGet source involved is one.</p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-22 14:05</span></p>
                <div class='post-content'><p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/ci-logo.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/ci-logo.png" alt="ci-logo" title="ci-logo" /></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository.</p>
<p><a href="https://bitbucket.org/bladewolf55/tfs-ci-samples">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_20.html">TFS Continuous Integration Walk Through Part 5a - Multiple Solutions - Overview</a></p>
<h1 id="a-new-beginning">A New Beginning</h1>
<p>One of my goals for the Multiple Solutions walkthroughs is to put the TFS repository in a, let's say, less than stellar organizational state, and then clean up. To do that, I'll start with a new, clean TFS collection.</p>
<p>Open TFS Administration Console, select Team Project Collections, and click Create Collection.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__145443.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__145443.png" alt="2017-02-20_145443" title="2017-02-20_145443" /></a></p>
<p>Choose a silly name like &quot;CICollection2&quot;. Next.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__145927.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__145927.png" alt="2017-02-20_145927" title="2017-02-20_145927" /></a></p>
<p>Verify the SQL server instance and create a new database. Next, Verify, Create.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__150035.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__150035.png" alt="2017-02-20_150035" title="2017-02-20_150035" /></a></p>
<p>It'll take a few minute to create the collection. Click Complete, then Close. You can close the Admin Console, too.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__150517.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__150517.png" alt="2017-02-20_150517" title="2017-02-20_150517" /></a></p>
<h1 id="connect-visual-studio-to-the-new-collection">Connect Visual Studio to the New Collection</h1>
<blockquote>
<p><strong>Complaint</strong><br />
This was stupidly difficult to figure out. Google searches yielded nothing.</p>
</blockquote>
<p>Open Visual Studio and the Team Explorer, then open Manage Connections.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161007.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161007.png" alt="2017-02-20_161007" title="2017-02-20_161007" /></a></p>
<p>Drop down &quot;Manage Connections&quot; and choose Connect to Team Project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161132.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161132.png" alt="2017-02-20_161132" title="2017-02-20_161132" /></a></p>
<p>Select CICollection2, then click Connect.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161318.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161318.png" alt="2017-02-20_161318" title="2017-02-20_161318" /></a></p>
<p>This is the first time I'm using this collection, so I need to map my TFS Workspaces.</p>
<blockquote>
<p><strong>Complaint</strong><br />
I <em>hate</em> TFS workspaces.</p>
</blockquote>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161528.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161528.png" alt="2017-02-20_161528" title="2017-02-20_161528" /></a></p>
<p>Pick one of the &quot;map workspaces&quot; links, take the defaults, click Map &amp; Get.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161942.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__161942.png" alt="2017-02-20_161942" title="2017-02-20_161942" /></a></p>
<p>Now I'm connected to the new collection.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__16_46.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__16_46.png" alt="2017-02-20_162046" title="2017-02-20_162046" /></a></p>
<h1 id="create-a-new-team-project">Create a new Team Project</h1>
<p>In Visual Studio Team Manager, create a new Team Project by choosing Home &gt; Projects &amp; My Teams &gt; Create Team Project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162400.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162400.png" alt="2017-02-20_162400" title="2017-02-20_162400" /></a></p>
<p>Remember, one of my intentions is a messy collection. So, I'll name my team project Main. (I'm tempted to name it &quot;Turing&quot; and make life even worse, but this will do.) Click Next.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162607.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162607.png" alt="2017-02-20_162607" title="2017-02-20_162607" /></a></p>
<p>The default Agile process is fine. Next.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162652.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162652.png" alt="2017-02-20_162652" title="2017-02-20_162652" /></a></p>
<p>We're sticking with Team Foundation Version Control. Click Finish.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162805.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162805.png" alt="2017-02-20_162805" title="2017-02-20_162805" /></a></p>
<p>After a few seconds our team project is created.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162930.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__162930.png" alt="2017-02-20_162930" title="2017-02-20_162930" /></a></p>
<h1 id="add-the-turingdesktop-solution">Add the TuringDesktop Solution</h1>
<p>In Visual Studio, create a new Console project. In the dialog, check the Add to Source Control box.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__163059.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__163059.png" alt="2017-02-20_163059" title="2017-02-20_163059" /></a></p>
<p>In the source control dialog, accept the defaults. We're adding our solution folder to the root.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__163216.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__163216.png" alt="2017-02-20_163216" title="2017-02-20_163216" /></a></p>
<p>So, right now our TFS collection structure is:</p>
<pre><code class="language-csharp">CICollection2
|_$/Main
  |_TuringDesktop
</code></pre>
<p>If you remember from the previous part, our desktop app is going to have two dependencies: the Magic8Engine, and TextColor. Right now, I don't know Magic8 is going to be a shared NuGet package, so I just add it as a new Class Library project. The same with TextColor.</p>
<p>I'm also going to need a unit test project, so I'll add an MSTest project now as well. I'm going to name it TuringDesktop.Tests, even though it's going to contain tests for all my projects.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__164651.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__164651.png" alt="2017-02-20_164651" title="2017-02-20_164651" /></a></p>
<p>In the end, this is my solution's folder structure.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__164939.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-__164939.png" alt="2017-02-20_164939" title="2017-02-20_164939" /></a></p>
<h1 id="our-first-suite">Our First Suite</h1>
<p><strong>References</strong></p>
<p><a href="http://stackoverflow.com/a/9663588/1628707">Assign TextWriter to MemoryWriter</a><br />
<a href="http://stackoverflow.com/a/5852991/1628707">Mocking System Console Behaviour</a><br />
<a href="https://en.wikipedia.org/wiki/Magic_8-Ball">Magic 8-Ball</a></p>
<p>Below is all the code and tests for the solution. This is my super-pre-release versions, and has some (mostly intentional) problems.</p>
<h2 id="the-solution-projects">The Solution Projects</h2>
<p>Right now I've got everything in one solution. I'll explain each project in turn.</p>
<h3 id="turingdesktop">TuringDesktop</h3>
<p>This is a Console application. It references the Magic8Engine and TextColor projects.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_102302.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_102302.png" alt="2017-02-22_102302" title="2017-02-22_102302" /></a></p>
<p>I'm simulating a database with a class that returns a list of answers, and is initialized with a connection string. For this simple sample, the connection string is just a name like &quot;production&quot;. If the connection string is named something other than &quot;production&quot;, then the name is prepended to each answer. For example, if the connection string were &quot;stage&quot;, an answer might be &quot;STAGE: It is certain.&quot;</p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;

namespace TuringDesktop
{
    public static class AnswerDatabase
    {
        /// &lt;summary&gt;
        /// Any dbName other than &quot;prod&quot; prepends answers with dbName.
        /// Ex. dbName = &quot;stage&quot;, then answer is &quot;STAGE: It could be so.&quot;
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;connectionString&quot;&gt;&lt;/param&gt;
        public static IEnumerable&lt;string&gt; GetAnswers(string connectionString)
        {
            if (String.IsNullOrWhiteSpace(connectionString))
            {
                throw new ArgumentException(&quot;dbName cannot be null or empty&quot;);
            }
            if (connectionString == &quot;production&quot;)
            {
                return DefaultAnswers;
            }
            else
            {
                return DefaultAnswers.Select(a =&gt; connectionString.ToUpper() + &quot;: &quot; + a);
            }
        }

        private static IEnumerable&lt;string&gt; DefaultAnswers
        {
            get
            {
                yield return &quot;It is certain&quot;;
                yield return &quot;It is decidedly so&quot;;
                yield return &quot;Without a doubt&quot;;
                yield return &quot;Yes, definitely&quot;;
                yield return &quot;You may rely on it&quot;;
                yield return &quot;As I see it, yes&quot;;
                yield return &quot;Most likely&quot;;
                yield return &quot;Outlook good&quot;;
                yield return &quot;Yes&quot;;
                yield return &quot;Signs point to yes&quot;;
                yield return &quot;Reply hazy try again&quot;;
                yield return &quot;Ask again later&quot;;
                yield return &quot;Better not tell you now&quot;;
                yield return &quot;Cannot predict now&quot;;
                yield return &quot;Concentrate and ask again&quot;;
                yield return &quot;Don't count on it&quot;;
                yield return &quot;My reply is no&quot;;
                yield return &quot;My sources say no&quot;;
                yield return &quot;Outlook not so good&quot;;
                yield return &quot;Very doubtful&quot;;
            }
        }
    }
}
</code></pre>
<p>Here's the Program class with my <code>Main</code> code. There are a few things to note:</p>
<ul>
<li>I removed the args parameter from the <code>Main</code> method. I don't need it.</li>
<li>I made the <code>Main</code> method public, so it can be call from unit tests.</li>
<li>I'm using Dependency Injection for the answer engine (<code>Oracle</code>) and the console text colorizer (<code>ConsoleColorizer</code>).</li>
<li>There are three settings using a string literal: <code>_connectionString</code>, <code>questionColor</code> and <code>answerColor</code>.</li>
</ul>
<!-- end list -->
<pre><code class="language-csharp">using System;
using TextColor;
using Magic8Engine;

namespace TuringDesktop
{
    public class Program
    {
        static string _connectionString = &quot;production&quot;;
        static IConsoleColorizer _colorizer = new ConsoleColorizer();
        static IOracle _oracle = new Oracle(AnswerDatabase.GetAnswers(_connectionString));

        public Program() { }
        public Program(IConsoleColorizer colorizer, IOracle oracle)
        {
            _colorizer = colorizer;
            _oracle = oracle;
        }

        public static void Main()
        {
            string name = &quot;&quot;;
            string answer = &quot;&quot;;
            string question = &quot;&quot;;
            string questionColor = &quot;Red&quot;;
            string answerColor = &quot;green&quot;;

            Console.Write(&quot;Welcome! I'm AT. Please tell me your name. &gt;&gt; &quot;);
            name = Console.ReadLine();
            Console.WriteLine(&quot;Good to meet you, &quot; + name + &quot;. &quot;
                + &quot;Ask me a yes-or-no question and I'll give you an answer. &quot;
                + &quot;When you're finished, say 'bye'.&quot;);
            do
            {
                try
                {
                    _colorizer.ColorizeWriteLine(&quot;Question?&quot;, questionColor);
                    question = Console.ReadLine();
                    if (question.ToLower() == &quot;bye&quot;) { break; }
                    answer = _oracle.GetAnswer();
                    _colorizer.ColorizeWriteLine(answer, answerColor);
                    Console.WriteLine();
                }
                catch (Exception ex)
                {
                    Console.WriteLine(&quot;Error: &quot; + ex.GetBaseException().Message);
                    Console.Write(&quot;Press any key to quit.&quot;);
                    Console.Read();
                    return;
                }
            }
            while (true);
        }
    }
}
</code></pre>
<p>The program's output is simple enough. It greets the user, asks for a name, then starts answering questions. Text coloring is used to make things clear.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_105715.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_105715.png" alt="2017-02-22_105715" title="2017-02-22_105715" /></a></p>
<h3 id="magic8engine">Magic8Engine</h3>
<p>I have an IOracle inteface, so that it's easier to use in unit tests.</p>
<pre><code class="language-csharp">namespace Magic8Engine
{
    public interface IOracle
    {
        string GetAnswer();
    }
}
</code></pre>
<p>The concrete class is initialized with a list of answers (the &quot;database&quot;) from which it randomly selects.</p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;

namespace Magic8Engine
{
    public class Oracle : IOracle
    {
        Random _random = new Random();
        private IEnumerable&lt;string&gt; _answers = new List&lt;string&gt;();

        public Oracle(IEnumerable&lt;string&gt; answers)
        {
            _answers = answers;
        }

        public string GetAnswer()
        {
            if (_answers.Count() == 0)
            {
                return &quot;&quot;;
            }
            int index = _random.Next(_answers.Count());
            return _answers.ToArray()[index];
        }
    }
}
</code></pre>
<h3 id="textcolor">TextColor</h3>
<p>The ConsoleColorizer class also implements an interface to improve unit testing.</p>
<pre><code class="language-csharp">using System;

namespace TextColor
{
    public interface IConsoleColorizer
    {
        void ColorizeWriteLine(string text, string colorName, bool resetColor = true);
        ConsoleColor GetConsoleColor(string colorName);
        void ResetConsoleColor();
        void SetConsoleColor(string colorName);
    }
}
</code></pre>
<p>The concrete class sets properties on the Console object.</p>
<pre><code class="language-csharp">using System;

namespace TextColor
{
    public class ConsoleColorizer : IConsoleColorizer
    {
        public void ColorizeWriteLine(string text, string colorName, bool resetColor = true)
        {
            SetConsoleColor(colorName);
            Console.WriteLine(text);
            if (resetColor) { Console.ResetColor(); }
        }

        public ConsoleColor GetConsoleColor(string colorName)
        {
            ConsoleColor color;
            if (Enum.TryParse&lt;ConsoleColor&gt;(colorName, true, out color))
            {
                return color;
            }
            else
            {
                throw new ArgumentException(&quot;Invalid ConsoleColor: &quot; + colorName);
            }
        }

        public void SetConsoleColor(string colorName)
        {
            Console.ForegroundColor = GetConsoleColor(colorName);
        }

        public void ResetConsoleColor()
        {
            Console.ResetColor();
        }
    }
}
</code></pre>
<p>This should raise a red flag. <code>System.Console</code> is a dependency. Why didn't I abstract that out? I could have. For example, I could have created an IConsole interface with just the features I'm using, then an explicit SystemConsole wrapper class that implented the interface. But it turned out I could test Console successfully without needing to make it entirely replacable.</p>
<p>Good question though. Glad you're thinking.</p>
<h3 id="tests">Tests</h3>
<p>Finally, our test project has a class for each project we're testing.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_112309.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_112309.png" alt="2017-02-22_112309" title="2017-02-22_112309" /></a></p>
<p>Here are the unit tests for each project. I'm using nested classes to keep the tests readable.</p>
<h4 id="magic8-tests">Magic8 Tests</h4>
<p>Note how these test make use of passing in a custom &quot;answer database&quot;.</p>
<pre><code class="language-csharp">using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Magic8Engine;

namespace TuringDesktop.Tests
{
    [TestClass]
    public class OracleClass
    {
        [TestClass]
        public class GetAnswer_Should: OracleClass
        {
            static List&lt;string&gt; _answers;

            [TestInitialize]
            public void TestInitialize()
            {
                //Start each test with empty list;
                _answers = new List&lt;string&gt;();
            }

            [TestMethod]
            public void ReturnARandomAnswerEachTimeItIsCalled()
            {
                //arrange
                _answers.AddRange(new string[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; });
                var oracle = new Oracle(_answers);
                //act
                List&lt;string&gt; answers = new List&lt;string&gt;();
                for (int i = 0; i &lt; 10; i++)
                {
                    answers.Add(oracle.GetAnswer());
                }
                int uniqueAnswers = answers.Distinct().Count();
                //assert
                Assert.IsTrue(uniqueAnswers &gt; 1);
            }

            [TestMethod]
            public void ReturnAnEmptyAnswerIfAnswerListIsEmpty()
            {
                //arrange
                var oracle = new Oracle(_answers);
                //act
                string actual = oracle.GetAnswer();
                //assert
                Assert.AreEqual(&quot;&quot;, actual, &quot;Answer list count: &quot; + _answers.Count());
            }
        }
    }
}
</code></pre>
<h4 id="textcolor-tests">TextColor Tests</h4>
<p>Neither of these tests confirms the correct color gets set. That's really something best left to a human to verify. But notice in <code>WriteTheUserEnteredString</code> how I'm using the Console.SetOut property to let me verify that user input actually gets written to the console.</p>
<pre><code class="language-csharp">using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.IO;
using TextColor;

namespace TuringDesktop.Tests
{
    [TestClass]
    public class ConsoleColorizerClass
    {
        [TestClass]
        public class GetConsoleColor_Should
        {
            [TestMethod]          
            public void ReturnTheEnumUsingCaseInsensitive()
            {
                //arrange
                var tc = new ConsoleColorizer();
                string colorName = &quot;gReEn&quot;;
                Exception actualEx = null;
                string errorMsg = &quot;&quot;;
                //Will change to Green below.
                ConsoleColor color = ConsoleColor.Black;
                //act
                try
                {
                    color = tc.GetConsoleColor(colorName);
                }
                catch (Exception ex) { actualEx = ex; errorMsg = &quot;Threw error &quot; + ex.GetBaseException().Message; }
                Assert.IsNull(actualEx, errorMsg);
                Assert.AreEqual(ConsoleColor.Green, color);
            }

            [TestMethod]
            public void WriteTheUserEnteredString()
            {
                //arrange
                //Store the Console output in a stringwriter.
                StringWriter sw = new StringWriter();
                Console.SetOut(sw);
                var tc = new ConsoleColorizer();
                //act
                tc.ColorizeWriteLine(&quot;blamo&quot;, &quot;Red&quot;);
                //assert
                Assert.AreEqual(&quot;blamo\r\n&quot;, sw.ToString());
            }
        }
    }
}
</code></pre>
<h4 id="console-app-tests">Console App Tests</h4>
<p>If you're thinking the <code>Main</code> method should be refactored, you're right. I'll do that later. For now, it's interesting to see how we <em>can</em> test a console app.</p>
<p>First, I'll create my mock objects. I'm not even checking MockOracle's <code>GetAnswer</code> method, but that's OK. What I'm guaranteeing is my unit tests have no external dependencies.</p>
<p><strong>MockOracle</strong></p>
<pre><code class="language-csharp">    public class MockOracle : Magic8Engine.IOracle
    {
        public string GetAnswer()
        {
            return &quot;This is a fake answer&quot;;
        }
    }
</code></pre>
<p><strong>MockColorizer</strong></p>
<p>In this mock, I store the simulated user's input in a list, and I always return a black console color. I don't set or reset console colors.</p>
<blockquote>
<p><strong>Important</strong><br />
Remember, I'm not testing if the colorizer works. There are already unit tests for that. I'm testing if the Main method works. I just need my mock objects to return consistent results quickly.</p>
</blockquote>
<pre><code class="language-csharp">    public class MockColorizer : TextColor.IConsoleColorizer
    {
        public List&lt;string&gt; ConsoleLines = new List&lt;string&gt;();


        public void ColorizeWriteLine(string text, string colorName, bool resetColor = true)
        {
            ConsoleLines.Add(text);
        }

        public ConsoleColor GetConsoleColor(string colorName)
        {
            return ConsoleColor.Black;
        }

        public void ResetConsoleColor() { }

        public void SetConsoleColor(string colorName) { }
    }
</code></pre>
<p>Here are the tests for the <code>Main</code> method. Notice how I'm using StringWriters for both Console.In and Console.Out. This lets me buffer all the responses a user would make, and capture the console's output. I use a couple of helper methods to make this work.</p>
<p>What I'm <em>not</em> trying to do is test if Console works. I'm testing if I'm my code that writes to the console works. But, unfortunately, I do have a dependency on Console.</p>
<blockquote>
<p>So, are these unit tests, or integration tests? Short answer: integration. I'll make some improvements later to isolate code that doesn't depend on Console.</p>
</blockquote>
<p>There's a real danger here that I'll forget to use <code>SendUserInputs</code>, leading to the application hanging. I know this danger exists because I did it. The tests are brittle.</p>
<pre><code class="language-csharp">    [TestClass]
    public class ProgramClass
    {
        [TestClass]
        public class Main_Should
        {
            StringWriter _consoleOut = new StringWriter();
            string UserInputs = &quot;&quot;;

            [TestInitialize]
            public void TestInitialize()
            {
                //Store the Console output in a stringwriter.
                Console.SetOut(_consoleOut);
            }

            [TestMethod]
            public void DisplayInitialGreetingMessage()
            {
                //arrange
                AddUserInput(&quot;Charles&quot;);
                AddUserInput(&quot;bye&quot;);
                SendUserInputs();
                var mockColorizer = new MockColorizer();
                var mockOracle = new MockOracle();
                var program = new Program(mockColorizer, mockOracle);
                string expected = &quot;Welcome! I'm AT. Please tell me your name.&quot;;
                //act
                Program.Main();
                //assert
                string output = _consoleOut.ToString();
                Assert.IsTrue(output.IndexOf(expected) &gt;= 0);
            }

            [TestMethod]
            public void DisplayWelcomeWithName()
            {
                //arrange
                AddUserInput(&quot;Charles&quot;);
                AddUserInput(&quot;bye&quot;);
                SendUserInputs();
                var mockColorizer = new MockColorizer();
                var mockOracle = new MockOracle();
                var program = new Program(mockColorizer, mockOracle);
                string expected = &quot;Good to meet you, Charles.&quot;;
                //act
                Program.Main();
                //
                //assert
                string output = _consoleOut.ToString();
                Assert.IsTrue(output.IndexOf(expected) &gt;= 0, &quot;Output was: &quot; + output);
            }

            #region &quot;Test Helpers&quot;
            private void AddUserInput(string value)
            {
                UserInputs += value + Environment.NewLine;
            }

            private void SendUserInputs()
            {
                //Send all the inputs needed for the Read and ReadLine statements
                StringReader consoleIn = new StringReader(UserInputs);
                Console.SetIn(consoleIn);
            }
            #endregion
        }
    }
</code></pre>
<p>Running my tests, I get nice, readable output.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115_7.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115_7.png" alt="2017-02-22_115207" title="2017-02-22_115207" /></a></p>
<h1 id="initial-continuous-integration-build-definition">Initial Continuous Integration Build Definition</h1>
<p>In Visual Studio Team Explorer, click Builds.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115629.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115629.png" alt="2017-02-22_115629" title="2017-02-22_115629" /></a></p>
<p>Click New Build Definition.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115709.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115709.png" alt="2017-02-22_115709" title="2017-02-22_115709" /></a></p>
<p>This will open the web page and prompt for a definition. This is nice because we're taken directly to our team project builds.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115934.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_115934.png" alt="2017-02-22_115934" title="2017-02-22_115934" /></a></p>
<p>Choose the Visual Studio template, check the box that says Continuous Integration and accept the defaults. Save the definition, naming it TuringDesktop Suite Build.</p>
<p>If you've been following along, you'll realize that we've never committed <em>any</em> of our source code! Do so now and the build should happen automatically and successfully. Be sure to verify that all the tests ran!</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_122709.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_122709.png" alt="2017-02-22_122709" title="2017-02-22_122709" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_1229.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22/images/17-02-22_1229.png" alt="2017-02-22_122936" title="2017-02-22_122936" /></a></p>
<h1 id="next-up">Next Up</h1>
<p>We have a working application that's automatically built in our CI server. But we've also got some problems:</p>
<ul>
<li>Refactoring for the main application's Console dependency.</li>
<li>String literals for settings.</li>
<li>Our application's data source is the same in development, CI, and production.</li>
<li>No separate integration tests.</li>
</ul>
<p>In short, we're about to go from nice, sunny sample development to real-world, why-does-this-have-to-be-so-hard programming.</p>
<p>Next Part: <a href="#">TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Build Settings</a></p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-20 13:45</span></p>
                <div class='post-content'><p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/ci-logo.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/ci-logo.png" alt="ci-logo" title="ci-logo" /></a> This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository.<br />
<a href="https://bitbucket.org/bladewolf55/tfs-ci-samples">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_24.html">TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></p>
<h2 id="where-im-headed">Where I'm Headed</h2>
<p>For the next walkthroughs, I'm starting with new team projects and sample applications, building a suite of solutions with shared dependencies. My goal is to uncover the various problems that come from:</p>
<ul>
<li>DLL dependencies</li>
<li>Project references</li>
<li>Web.config and app.config settings</li>
<li>Unit tests</li>
<li>Integration tests</li>
<li>BONUS: Migrating to Git</li>
</ul>
<p>Along the way, I'm going to <em>completely abuse</em> the TFS team project structure and show how to clean up and organize a repository.</p>
<h2 id="relationship-of-team-projects-solutions-and-build-definitions">Relationship of Team Projects, Solutions and Build Definitions</h2>
<p>Team Projects are intended to manage a software project.<br />
But that doesn't mean there's just one Visual Studio solution for a project. There might be several. For example, our CI Sample projects might end up looking like this:</p>
<pre><code class="language-csharp">$/CI Sample (team project)
|_CIConsoleSample
|_CIRestSample
|_CIDocumentation

$/CI Shared (team project)
|_CINuGetSample
</code></pre>
<p>What does this mean for automated builds?</p>
<ul>
<li>Maybe the Console now has a dependency on the REST solution, and we need Console to build any time REST changes.</li>
<li>Maybe we need the NuGet solution to deploy to a staging location on a successful build, then build dependent solutions pulling this NuGet dll from the staging source.</li>
<li>And maybe we don't want the Documentation to build at all.</li>
</ul>
<blockquote>
<p><strong>Important</strong> If you're using a Continuous Integration trigger, and <em>any</em> trigger fires, <em>all</em> the solutions in the definition will be rebuilt. For example, let's say the definition builds all solutions in the CI Sample team project above (the default behavior). You have a trigger that says &quot;only build when CIConsole changes.&quot; It would still build all three solutions.</p>
</blockquote>
<p>This feature of a build definition means that much of the time we'll configure a definition to build just one solution. However, as pointed out above, for a solution that builds an assembly used by multiple projects, you might want to rebuild all the solutions that depend on it, to catch bugs.</p>
<p>As this diagram shows, a team project can include multiple solutions. A build definition can build multiple solutions. A build definition belongs to a single team project, <em>but</em>, it can (with effort) build solutions in <em>other</em> team projects.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/team-projects-and-builds.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/team-projects-and-builds.png" alt="team-projects-and-builds" title="team-projects-and-builds" /></a></p>
<h2 id="the-projects-a-turing-oracle">The Projects - A Turing Oracle</h2>
<p>My sample suite of applications is a pseudo <a href="https://en.wikipedia.org/wiki/Turing_test">Turing Test</a>, and is made up of desktop and web apps. The user can ask questions, and get answers that seem to be from a human. I'll start simple, imitating a real-world project progression. In the end, this will be my structure in the TFS repository.</p>
<pre><code class="language-csharp">_$Shared
|_$/Magic8Engine

$/TuringDesktop
|_TuringDesktop.sln
  |_TuringConsole.csproj (Dependencies: Magic8Engine, TextColor)
  |_TextColor.csproj

$/TuringWeb
|_TuringWeb.sln
  |_TuringWeb.csproj (Dependencies: TuringSoap)
|_TuringSoap.sln
  |_TuringSoap.csproj (Dependencies: Magic8Engine)
</code></pre>
<p><strong>Magic8Engine</strong> The Magic8Engine produces the answers, using the eerily accurate Magic 8-Ball Algorithm. It's a shared dll, and lives in a separate folder. It's published as a NuGet package.</p>
<p><strong>TuringDesktop</strong> TuringDesktop is a console application for asking questions. The team project has one solution, which itself has two projects.</p>
<p><em>TuringConsole</em>, the UI, has two dependencies. One is the Magic8Engine dll, the other is on TextColor, which is configured as a project reference.</p>
<p><em>TextColor</em> is for changing the color of the text. It is only used by <em>TuringConsole</em>.</p>
<p><strong>TuringWeb</strong> This is our web interface. The team project has two solutions.</p>
<p><em>TuringWeb Solution</em> This solution has one project, TuringWeb, which is dependent on the TuringSoap web service.</p>
<p><em>TuringSoap Solution</em> Our old-fashioned SOAP web service is dependent on the Magic8Engine dll. In the future, the web service <em>could</em> become shared by other applications.</p>
<h2 id="next-up">Next Up</h2>
<p>In the next part, I'll build my desktop application as if I didn't know anything about the future web application.</p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_22.html">TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></p>
</div>
              </div>
               <div class='paging'><a href='index27.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index29.html'>Older</a></div>
      </section>
      <footer><p>All original content copyright (c) Charles L Flatt</p>
</footer>
    </div>
  </div>
  
  <script>
    function toggleNav() {
      var x = document.getElementById("nav");
      if (x.className === "nav") {
        x.className += " responsive";
      } else {
        x.className = "nav";
      }
    }</script>

  

</body>

</html>