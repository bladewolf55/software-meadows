<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta property="og:image" content="https://www.softwaremeadows.com/images/header.png" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117916694-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-117916694-1');
  </script>
  <script src='https://www.softwaremeadows.com/header-scripts/prism.js'></script>

  <link rel='stylesheet' href='https://www.softwaremeadows.com/css/responsive.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/prism.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/default.css' />
<link rel='stylesheet' href='https://www.softwaremeadows.com/css/kavadocs.css' />


  <title>Home | Software Meadows</title>
</head>

<body>
  <div class="row">
    <div class="col-left">
      <nav id="nav" class="nav">
        <div id="menu">
          <ol>
<li><a href="https://www.softwaremeadows.com/">Home</a></li>
<li><a href="https://www.softwaremeadows.com/devops">DevOps</a></li>
<li><a href="https://www.softwaremeadows.com/well-being">Well-Being</a></li>
<li><a href="https://www.softwaremeadows.com/about">About</a></li>
<li><a target="_blank" href="https://github.com/bladewolf55">On GitHub</a></li>
</ol>

        </div>
        <div id="recent">
          <h2>Recent</h2>
          <a href='https://www.softwaremeadows.com/posts/graphic_-_git_merge_vs_rebase'>Graphic - Git Merge vs Rebase</a><a href='https://www.softwaremeadows.com/posts/scrum_in_azure_devops_-_a_simpler_custom_process'>Scrum in Azure DevOps - A simpler (custom) process</a><a href='https://www.softwaremeadows.com/posts/git_commit_checkout_is_a_snapshot__not_a_delta'>Git commit/checkout is a snapshot, not a delta</a><a href='https://www.softwaremeadows.com/posts/what_do_you_mean_by_automated_tests_and_continuous_integration_'>What do you mean by automated tests and continuous integration?</a><a href='https://www.softwaremeadows.com/posts/a_simple_intro_to_scrum_in_azure_devops'>A Simple Intro to Scrum in Azure DevOps</a>
        </div>
        <div id="history">
          <h2>History</h2>
          <ol class='tree'><li class='history-year'><label for='2021'>2021</label><input type='checkbox'  id='2021' /><ol><li class='history-month'><label for='2021-5'>May</label><input type='checkbox'  id='2021-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/graphic_-_git_merge_vs_rebase'>Graphic - Git Merge vs Rebase</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/scrum_in_azure_devops_-_a_simpler_custom_process'>Scrum in Azure DevOps - A simpler (custom) process</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/git_commit_checkout_is_a_snapshot__not_a_delta'>Git commit/checkout is a snapshot, not a delta</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what_do_you_mean_by_automated_tests_and_continuous_integration_'>What do you mean by automated tests and continuous integration?</a></li></ol></li><li class='history-month'><label for='2021-4'>April</label><input type='checkbox'  id='2021-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_simple_intro_to_scrum_in_azure_devops'>A Simple Intro to Scrum in Azure DevOps</a></li></ol></li><li class='history-month'><label for='2021-3'>March</label><input type='checkbox'  id='2021-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how_and_why_to_maintain_a_readme_md_file_-_onboarding_and_continuous_integration'>How (and why) to maintain a README.md file for internal projects: Onboarding and Continuous Integration</a></li></ol></li><li class='history-month'><label for='2021-1'>January</label><input type='checkbox'  id='2021-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summry-_leadership_is_language'>One Sheet Summary: Leadership is Language</a></li></ol></li></ol></li><li class='history-year'><label for='2020'>2020</label><input type='checkbox'  id='2020' /><ol><li class='history-month'><label for='2020-12'>December</label><input type='checkbox'  id='2020-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nuget_5_7+_ignores_nuspec_replacement_tokens_-_and_other_weird_behavio'>NuGet 5.7+ Ignores NuSpec CSProj Replacement Tokens - and other weird behaviors</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tech_debt_-_you_cant_put_maintenance_last_if_you_want_to_drive_a_race'>Tech Debt - You can't put maintenance last if you want to drive a race car</a></li></ol></li><li class='history-month'><label for='2020-10'>October</label><input type='checkbox'  id='2020-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_four_foundations_of_software_improvement_-_letter-size_poster'>The Four Foundations of Software Improvement - Letter-Size Art Deco Poster</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/path_is_ambiguous__here_are_clear__consistent_variable_names_'>"Path" is ambiguous. Here are clear, consistent variable names.</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_tiny_habits'>One Sheet Summary: Tiny Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_atomic_habits'>One Sheet Summary: Atomic Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_good_habits__bad_habits'>One Sheet Summary: Good Habits, Bad Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/bizarre_nuget_exe_5_7_behaviors'>Bizarre NuGet.exe 5.7 "authors is required" behaviors</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_drive'>One Sheet Summary: Drive</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/introducing_nutcase_-_a_new_case_for_coding'>Introducing NUtCasE - A New Case for Coding</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_getting_things_done'>One Sheet Summary: Getting Things Done</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/one_sheet_summary-_accelerate-_the_science_of_lean_software_and_devop'>One Sheet Summary: "Accelerate: The Science of Lean Software and DevOps"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/five_(so_far)_dynamics_of_group_problem_solving'>Five (so far) Dynamics of Group Problem Solving</a></li></ol></li><li class='history-month'><label for='2020-8'>August</label><input type='checkbox'  id='2020-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/domain-driven_design_-_opinionated_layers_graphic'>Domain-Driven Design - An Opinionated Layers Graphic</a></li></ol></li><li class='history-month'><label for='2020-7'>July</label><input type='checkbox'  id='2020-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/net_framework_nuget_packages_-_versioning__dependency_resolution__and'>.Net Framework NuGet Packages - Solving Assembly Redirection From Package vs Assembly Versioning, Dependency Resolution, and Strong-Naming</a></li></ol></li><li class='history-month'><label for='2020-6'>June</label><input type='checkbox'  id='2020-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/when_did__save__yes,_no,_cancel__become_wrong__'>When Did "Save? Yes, No, Cancel" Become Wrong?</a></li></ol></li><li class='history-month'><label for='2020-5'>May</label><input type='checkbox'  id='2020-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tabs_vs_spaces_is_dumb__convert_tabs_into_spaces_'>Tabs vs Spaces is Dumb. Convert Tabs INTO Spaces.</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what_is_cyclomatic_complexity_md'>What Is Cyclomatic Complexity In a Nutshell?</a></li></ol></li><li class='history-month'><label for='2020-4'>April</label><input type='checkbox'  id='2020-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/using_fluentassertions_with_xunit_theory_to_test_for_an_exception_and_'>Using FluentAssertions with xUnit Theory to Test for an Exception AND a Successful Return</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_last_one-_overcoming_obstacles'>Remote Work Tiny Tips - Last One: Overcoming Obstacles</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_staying_social'>Remote Work Tiny Tips - Staying Social</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_hugs_in_a_no-touch_world'>Remote Work Tiny Tips - Hugs in a No-Touch World</a></li></ol></li><li class='history-month'><label for='2020-3'>March</label><input type='checkbox'  id='2020-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_gratitude__gosh_darn_it!'>Remote Work Tiny Tips - Gratitude, Gosh Darn It!</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_habits_-_staying_healthy_food'>Remote Work Tiny Tips - Staying Healthy (Food)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_staying_healthy_exercise'>Remote Work Tiny Tips - Staying Healthy (Exercise)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_focusing_and_breaking'>Remote Work Tiny Tips - Focusing</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_forming_new_habits'>Remote Work Tiny Tips - Forming New Habits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_work_tiny_tips_-_keeping_your_routine'>Remote Work Tiny Tips - Keeping Your Routine</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/continuous_integration_flow_-_an_accurate_and_unlovely_graphic'>Continuous Integration Flow - An Accurate and Unlovely Graphic</a></li></ol></li><li class='history-month'><label for='2020-2'>February</label><input type='checkbox'  id='2020-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/why_the_repository_pattern_fails_for_legacy_database_like_yours_and_wh'>Why the Repository Pattern Fails for Legacy Databases Like Yours and What to Do About It</a></li></ol></li><li class='history-month'><label for='2020-1'>January</label><input type='checkbox'  id='2020-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/mock_returning_a_list_as_imongoqueryable_for_unit_testing'>Mock returning a List as IMongoQueryable for unit testing</a></li></ol></li></ol></li><li class='history-year'><label for='2019'>2019</label><input type='checkbox'  id='2019' /><ol><li class='history-month'><label for='2019-12'>December</label><input type='checkbox'  id='2019-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/git_basics_with_visual_studio_2019'>Git Basics With Visual Studio 2019</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_azure_devops__building_and_releasing_git_branches,_a_simple_example'>TFS/Azure DevOps: Building and Releasing Git Branches, A Simple Example</a></li></ol></li><li class='history-month'><label for='2019-10'>October</label><input type='checkbox'  id='2019-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/who_are_you_coding_for_'>Who Are You Coding For?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_viewservice_pattern__especially_good_for_windows_forms'>The ViewService Pattern: Especially Good For Windows Forms</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/most_of_us_developers_arent_smart'>Most of Us Developers Aren't Smart</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/confirmed_android_text_punctuation_voice_commands'>Confirmed Android text punctuation voice commands</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/summary_of_accelerate_state_of_devops_2019'>Summary of "Accelerate State of DevOps 2019"</a></li></ol></li><li class='history-month'><label for='2019-9'>September</label><input type='checkbox'  id='2019-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/posh-git_fork_to_allow_visual_studio_to_use_tfvc_and_ignore_git'>Posh-git Fork to Allow Visual Studio to Use TFVC and Ignore Git</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/asp_net_core_controllers_-_exploring_how_to_test_a_simple_feature'>ASP.NET Core Controllers - Exploring How To Test a Simple Feature</a></li></ol></li><li class='history-month'><label for='2019-8'>August</label><input type='checkbox'  id='2019-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/remote_micro-exclusions-_two_poor_daily_standup_practices'>Remote Micro-Exclusions: Two Poor Daily Standup Practices</a></li></ol></li><li class='history-month'><label for='2019-6'>June</label><input type='checkbox'  id='2019-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/memstate-_the_practical_argument_for_big_in-memory_data'>Memstate: The Practical Argument for Big, In-Memory Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_apostrophes_3_simple_rules_3_common_mistakes'>Grammar for Developers - Apostrophes: 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_accelerate__the_best_book_about_devops'>Weekly Sugar: 'Accelerate', the Best Book About DevOps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/20190616-1610 flatts_posts-casts_review_003'>Flatt's Posts/Casts Review #003 - Incentives, Emotions, Diversity, and Applying Bodyguard Training to Coding</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_applying_kanban_principles_to_your_personal_task_list'>Weekly Sugar: Applying Kanban Principles to Your Personal Task List</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/joe_developer-_when_(not)_to_drink_coffee'>Joe Developer: When (not) to Drink Coffee</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/an_open_email_to_blackwing602_com_about_their_poor_account_security'>An Open Email to Blackwing602.com About Their Poor Account Security</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_take_a_walk'>Weekly Sugar: Take a Walk</a></li></ol></li><li class='history-month'><label for='2019-5'>May</label><input type='checkbox'  id='2019-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_response_to_jonathan_cutrells_podcast_episode_crafting_your_work_b'>A Response to Jonathan Cutrell's Podcast Episode "Crafting Your Work By Your Strengths"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_(not)_to_drink_coffe__a_preview'>Weekly Sugar: When (not) to Drink Coffee, a Preview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_posts-casts_review_002_-_real_problems__strengths__korean_war'>Flatt's Posts/Casts Review #002 - Real Problems, Strengths, Korean War, Smaller Problems, Good/Bad Shame</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development_repost'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/flatts_post-cast_reviews_001_-_job_search_burnout_blazor_net_core_configuration'>Flatt's Posts/Casts Review #001 - Job Search, Burnout, Blazor, .NET Core Configuration, Personal Agency, Natural Movement, KonMari in Business</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/weekly_sugar-_when_is_music_a_distraction_'>Weekly Sugar: When is Music a Distraction?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/yes_or_no_a_classic_and_effective_book_for_decision_making'>"Yes or No?" -- A Classic and Effective Book For Decision-Making</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_git_aliases_with_a_nod_to_Smith_and_Jones'>"My" Git Aliases (with a nod to Smith and Jones)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/proposal-_combine_agile_and_craftsmanship_manifestos_into_agile_crafted_software_values'>Proposal: Combine Agile and Craftsmanship Manifestos into "Agile Crafted Software Values"</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/suggestion_for_uncle_bob-_change_software_craftsmanship_to_crafted_software'>Suggestion for Uncle Bob: Change "Software Craftsmanship" to "Crafted Software"</a></li></ol></li><li class='history-month'><label for='2019-4'>April</label><input type='checkbox'  id='2019-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_mixed_relationship_with_tdd'>My Mixed Relationship with TDD</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont_be_a_lazy_programmer_like_matthew_jones_isnt'>Don't Be a Lazy Programmer Like Matthew Jones Isn't</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/personal_reflections_on_removing_distractions_for_improved_productivity'>Personal Reflections on Removing Distractions for Improved Productivity</a></li></ol></li><li class='history-month'><label for='2019-3'>March</label><input type='checkbox'  id='2019-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating_a_modern__practical_resume'>Creating a Modern, Practical Résumé</a></li></ol></li><li class='history-month'><label for='2019-2'>February</label><input type='checkbox'  id='2019-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_week_of_web_blocking_for_productivity_and_well-being'>Digital Minimalism: A Week of Web Blocking for Productivity and Well-Being</a></li></ol></li><li class='history-month'><label for='2019-1'>January</label><input type='checkbox'  id='2019-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/revert_packagereference_project_to_packages_config'>Revert PackageReference Project to Packages.config</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_a_simple_photo_album_site_with_wix'>Create a Simple Photo Album Site With Wix</a></li></ol></li></ol></li><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-11'>November</label><input type='checkbox'  id='2018-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/three_rules_for_successfully_starting_a_habit'>Three Rules for Successfully Starting a Habit</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/going_full_screen-_when_and_why'>Going Full Screen: When and Why</a></li></ol></li><li class='history-month'><label for='2018-10'>October</label><input type='checkbox'  id='2018-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nuget_packagereference_in_visual_studio'>NuGet PackageReference in Visual Studio</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/accelerate_book_notes_and_quotes'>Accelerate Book Notes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/getting_started_with_software_(and_business_and_life)_skills'>Getting Started With Software (and Business and Life) Skills</a></li></ol></li><li class='history-month'><label for='2018-9'>September</label><input type='checkbox'  id='2018-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shortest_user_story_intro_ever'>Shortest User Story Intro Ever</a></li></ol></li><li class='history-month'><label for='2018-8'>August</label><input type='checkbox'  id='2018-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a_simple__effective_meeting_agenda_system'>A Simple, Effective Meeting Agenda System</a></li></ol></li><li class='history-month'><label for='2018-7'>July</label><input type='checkbox'  id='2018-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/highly_opinionated_android_to_do_and_note_apps_comparison'>Highly Opinionated Android To Do and Note Apps Comparison</a></li></ol></li><li class='history-month'><label for='2018-6'>June</label><input type='checkbox'  id='2018-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_vs_code-_orange_icon_resurrection'>Tid Bits: VS Code: Orange Icon Resurrection</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tidbits_use_visual_studio_for_git_diff-merge'>Tid Bits: Use Visual Studio for Git Diff/Merge</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/3_chrome_extensions_for_performance__research__and_blogging'>3 Chrome Extensions for Performance, Research, and Blogging</a></li></ol></li><li class='history-month'><label for='2018-5'>May</label><input type='checkbox'  id='2018-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/chrome_browser_pinned_startup_tabs'>Chrome Browser Pinned Startup Tabs</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/solving_nancyfx_tokenizer_keychain_bin_invalid_read_type_request_115'>Solving NancyFx Tokenizer keyChain.bin Invalid Read Type Request '115'</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_ideal_markdown_editor_-_thoughts_and_reviews_part_1'>My Ideal Markdown Editor - Thoughts and Reviews Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/my_why_and_how_of_posh_git_contenxt_menu_transcripts_and_tf_exe'>My Why and How of posh-git: Context Menu, Transcripts, and TF.exe</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how_to_secure-erase_regular_and_ssd_hard_drives_without_superstition'>How to Secure-Erase Regular and SSD Hard Drives Without Superstition</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sql_permissions_for_data_folders'>SQL Permissions for Data Folders</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/grammar_for_developers_-_3_simple_rules_3_common_mistakes'>Grammar for Developers - 3 Simple Rules, 3 Common Mistakes</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/notes_on_improving_developer_team_practices_1'>Notes on Improving Developer Team Practices</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/using_git_locally_with_remote_tfvc'>Using Git Locally With Remote TFVC</a></li></ol></li><li class='history-month'><label for='2018-4'>April</label><input type='checkbox'  id='2018-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/raw_code_-_picture_renaming_and_sorting'>Raw Code - Picture Renaming and Sorting</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/becoming_a_professional_blogger_part_1'>Becoming a Professional Blogger Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/entity_framework_6_child_deletion_and_foreign_keys_string_int_guid'>Entity Framework 6 Child Deletion and Foreign Keys - String Int GUID</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the_50-10_time_box_revising_pomodoro_for_software_development'>The 50-10 Time Box - Revising Pomodoro for Software Development</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/linqpad_-_refresh_entity_after_submitchanges_to_avoid_cached_results'>LINQPad - Refresh Entity after SubmitChanges to Avoid Cached Results</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create_blog_post_using_markdown_monster_command_addin'>Create Blog Post Using Markdown Monster's Command Addin</a></li></ol></li><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/batch_image_resize_checking_min_max_in_both_dimensions'>Batch Image Resize Checking Min Max in Both Dimensions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deepshadow'>Announcing DeepShadow</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='https://www.softwaremeadows.com/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
        </div>
        <a href="javascript:void(0);" class="icon" onclick="toggleNav()">&#9776;</a>
      </nav>
    </div>
    <div class="col-right">
      <header>
        <div id="site-image">
          <img src="https://www.softwaremeadows.com/images/header.png" alt="" />
        </div>
        <h1 id="site-name"></h1>
        <div id="site-subtitle">A pleasant walk through computing</div>
      </header>
      <section id="content">
        <hr />

        <p id="comment">
          Comment for me? Send an <a href="mailto:charles@tfhome.us?subject=Comment on Home | Software Meadows">email</a>. I might even update the post!
        </p>
        

      </section>
      <!-- posts only appear in home index -->
      <section id="posts">
        
              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></h2>
                <p class='post-info'><span class='posted-on'>2017-05-08 10:07</span></p>
                <div class='post-content'><p>This series simulates a native application accessing a protected Web API resource, using OAuth2 via <a href="https://github.com/IdentityServer/IdentityServer3">IdentityServer3</a>. It demonstrates using Proof Key for Code Exchange (PKCE), and is in four parts:</p>
<ol>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-1-simple.html">Build a simple authorization server, consumed by native application</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-2.html">Build a protected resource</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-3.html">Persist server configuration to database</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-4.html">Persist user data to database using Microsoft.Identity and SQL Server</a>.</li>
</ol>
<blockquote>
<p><strong>Important</strong><br />
This series does <em>not</em> create an OpenID Connect (OIDC) server. It is OAuth-only, since the PKCE specification doesn't require OIDC.</p>
</blockquote>
<h1 id="where-were-at">Where We're At</h1>
<p>We can get a token, but there's nothing to use it on. We've configured IdentityServer with information about our client application (PretendMobile), and we used that information (Client ID, etc) to get a token.</p>
<p>Now we'll add a Web API with a protected method that just returns some claim data. It will be configured to:</p>
<ol>
<li>Accept the access token our pretend mobile app gets from the authorization server.</li>
<li>Validate that token against the authorization server.</li>
</ol>
<p>We'll use the same project as the authorization server, but it's important to know that the Web API could be in a completely separate project.</p>
<h2 id="web-api">Web API</h2>
<p><strong>References</strong><br />
<a href="https://identityserver.github.io/Documentation/docsv2/overview/simplestOAuth.html">Simplest OAuth Server</a><br />
<a href="https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Simplest%20OAuth2%20Walkthrough">Simplest OAuth2 Walkthrough Code</a></p>
<p>Install the packages for Web API, and being able to accept the IdentityServer tokens. Note IdentityModel version, which is latest for .Net 4.6 (2.x is for .Net Core).</p>
<pre><code class="language-csharp">Install-Package Microsoft.AspNet.WebApi.Client -Version 5.2.3 -Project AuthAndApi
Install-Package Microsoft.AspNet.WebApi.Owin -Version 5.2.3 -Project AuthAndApi
Install-Package IdentityModel -Version 1.9.2 -Project AuthAndApi
Install-Package IdentityServer3.AccessTokenValidation -Version 2.15.0 -Project AuthAndApi
</code></pre>
<p>Add two things to the OWIN pipeline: accepting access tokens, and using WebApi.</p>
<p><strong>Updated Startup.cs</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//Added
using IdentityServer3.Core.Configuration;
using Owin;
using AuthAndApi.IdOptions;
using AuthAndApi.IdUsers;
using System.Web.Http;
using IdentityServer3.AccessTokenValidation;

namespace AuthAndApi
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            //Configure IdentityServer for issuing authentication tokens
            var options = new IdentityServerOptions
            {
                Factory = new IdentityServerServiceFactory()
                .UseInMemoryClients(Clients.Get())
                .UseInMemoryScopes(Scopes.Get())
                .UseInMemoryUsers(Users.Get()),
                //SSL MUST be used in production
#if DEBUG
                RequireSsl = false
#endif
            };
            app.UseIdentityServer(options);

            // Configure Web API to accept access tokens from IdentityServer, and require a scope of 'email'
            app.UseIdentityServerBearerTokenAuthentication(new IdentityServerBearerTokenAuthenticationOptions
            {
                //In this case, the authorization server is also the Web API server
                Authority = &quot;http://localhost:27230&quot;,
                ValidationMode = ValidationMode.ValidationEndpoint,
                RequiredScopes = new[] { &quot;email&quot; }
            });

            //Configure Web API
            var config = new HttpConfiguration();
            config.MapHttpAttributeRoutes();
            app.UseWebApi(config);
        }
    }
}
</code></pre>
<p>Add a Controllers folder, and a controller named Test.</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114024.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114024.png" alt="2017-05-06_114024" title="2017-05-06_114024" /></a><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114144_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114144_1.png" alt="2017-05-06_114144" title="2017-05-06_114144" /></a><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114210.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_114210.png" alt="2017-05-06_114210" title="2017-05-06_114210" /></a></p>
<p>Create an API method that requires authorization. The method checks for evidence a user authorized (and not just the application).</p>
<blockquote>
<p><strong>Note</strong><br />
Code shamelessly stolen from the IdentityServer samples</p>
</blockquote>
<p><strong>TestController.cs</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
//Added
using System.Security.Claims;

namespace AuthAndApi.Controllers
{
    [Route(&quot;test&quot;)]
    [Authorize]
    public class TestController : ApiController
    {
        public IHttpActionResult Get()
        {
            var user = User as ClaimsPrincipal;

            var subjectClaim = user.FindFirst(&quot;sub&quot;);
            if (subjectClaim != null)
            {
                return Json(new
                {
                    message = &quot;OK user&quot;,
                    client = user.FindFirst(&quot;client_id&quot;).Value,
                    subject = subjectClaim.Value,
                    email = user.FindFirst(&quot;email&quot;).Value
                });
            }
            else
            {
                return Json(new
                {
                    message = &quot;User claim not found for this client_id&quot;,
                    client = user.FindFirst(&quot;client_id&quot;).Value
                });
            }
        }
    }
}
</code></pre>
<p>The API server now has a protected resource. Let's prove it requires authorization. Run the application. The console will still get an access token, but we're not doing anything with it, yet. Leave the project running and manually enter this URL into a browser to try to access the protected resource.</p>
<p><code>http://localhost:27230/test</code></p>
<p>The server will return something like this:</p>
<pre><code class="language-xml">&lt;Error&gt;
  &lt;Message&gt;Authorization has been denied for this request.&lt;/Message&gt;
&lt;/Error&gt;
</code></pre>
<h2 id="pretend-mobile-app-access-protected-resource">Pretend Mobile App - Access Protected Resource</h2>
<p>In the PretendMobile project, add and call a method that access the protected Web API resource. The token is added to the request in the Authorization header.</p>
<pre><code class="language-csharp">        static void Main(string[] args)
        {
            //get token
            var response = GetAccessToken();
            Console.WriteLine(&quot;Access Token: &quot; + response.AccessToken);
            //use token
            CallProtectedApiResource(response.AccessToken);
            Console.ReadLine();
        }

        static void CallProtectedApiResource(string access_token)
        {
            var client = new HttpClient();
            client.SetBearerToken(access_token);
            Console.WriteLine(client.GetStringAsync(&quot;http://localhost:27230/test&quot;).Result);
        }
</code></pre>
<p>Run the solution. After authorizing, the application successfully gets the protected resource's data.</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_121035_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2/images/17-05-06_121035_1.png" alt="2017-05-06_121035" title="2017-05-06_121035" /></a></p>
<h1 id="wrap-up">Wrap Up</h1>
<p>We now have a fully functioning mobile application! Next up, persisting the IdentityServer configuration.</p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></h2>
                <p class='post-info'><span class='posted-on'>2017-05-08 10:05</span></p>
                <div class='post-content'><p>This series simulates a native application accessing a protected Web API resource, using OAuth2 via <a href="https://github.com/IdentityServer/IdentityServer3">IdentityServer3</a>. It demonstrates using Proof Key for Code Exchange (PKCE), and is in four parts:</p>
<ol>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-1-simple.html">Build a simple authorization server, consumed by native application</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-2.html">Build a protected resource</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-3.html">Persist server configuration to database</a>.</li>
<li><a href="http://www.softwaremeadows.com/2017/05/identityserver3-with-pkce-part-4.html">Persist user data to database using Microsoft.Identity and SQL Server</a>.</li>
</ol>
<blockquote>
<p><strong>Important</strong><br />
This series does <em>not</em> create an OpenID Connect (OIDC) server. It is OAuth-only, since the PKCE specification doesn't require OIDC.</p>
</blockquote>
<h2 id="overview-why-pkce">Overview - Why PKCE?</h2>
<p><strong>References</strong><br />
<a href="https://alexbilbie.com/guide-to-oauth-2-grants/">A Guide to OAuth 2.0 Grants</a> <a href="https://tools.ietf.org/html/rfc7636">Proof Key for Code Exchange</a></p>
<p>Mobile (i.e. &quot;native&quot;) applications are difficult when it comes to authorizing users. The reasons are: they are long-lived, and can't keep a secret.</p>
<p>In the descriptions below, &quot;two-step&quot; means calling the authorization endpoint then the token endpoint, &quot;one-step&quot; means calling just the token endpoint, &quot;trusted&quot; means the client can keep a secret key, &quot;short-lived&quot; means only an access token, and &quot;long-lived&quot; means an access+refresh token.</p>
<p>The standard OAuth 2 grants are:</p>
<ul>
<li>Authorization code grant (two-step, trusted, long-lived)</li>
<li>Implicit grant (one-step, short-lived, meant for javascript-only browser apps)</li>
<li>Resource owner credentials grant (one-step, trusted, long-lived, for passing user/password)</li>
<li>Client credentials grant (one-step, trusted, short-lived, meant for app access, not users)</li>
<li>Refresh token grant (one-step, requires access token)</li>
</ul>
<p>None of these fits well for a mobile app, which is untrusted but long-lived. The solution is Proof Key for Code Exchange (PKCE). PKCE generates a temporary secret string and a way to verify that string. It sends the secret to the authorization endpoint, which stores it, then sends the validator to the token endpoint, which verifies the stored secret. This mitigates the threat of another application capturing the authorization code; without the secret/validator, the auth code is useless.</p>
<h2 id="authorization-server-simplistic">Authorization Server - Simplistic</h2>
<p><strong>References</strong><br />
<a href="https://identityserver.github.io/Documentation/docsv2/overview/simplestOAuth.html">Simplest OAuth Server</a><br />
<a href="https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Simplest%20OAuth2%20Walkthrough">Simplest OAuth2 Walkthrough Code</a></p>
<p>We'll create a simple OAuth2 server using IdentityServer3. We won't even create a Web API, so we can see just the server in operation. In other words, we'll be able to get tokens, but have nothing to use them with.</p>
<p>Create a new Empty web application project named AuthAndApi</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-03_135031_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-03_135031_1.png" alt="2017-05-03_135031" title="2017-05-03_135031" /></a></p>
<p>Install packages for the authentication server. This assumes using IIS for the web host.</p>
<pre><code class="language-csharp">Install-Package IdentityServer3 -Project AuthAndApi
Install-Package Microsoft.Owin.Host.Systemweb -Version 3.1.0 -Project AuthAndApi
</code></pre>
<p>All the IdentityServer documents say RAMFAR should be enabled in web.config.</p>
<pre><code class="language-xml">  &lt;system.webServer&gt;
    &lt;modules runAllManagedModulesForAllRequests=&quot;true&quot; /&gt;
  &lt;/system.webServer&gt;
</code></pre>
<p>Add Folders for IdOptions and IdUsers. These represent the database storage we'll configure later.</p>
<p>In IdOptions folder, add these classes.</p>
<p><strong>Scopes.cs</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//Added
using IdentityServer3.Core.Models;

namespace AuthAndApi.IdOptions
{
    public class Scopes
    {
        public static List&lt;Scope&gt; Get()
        {            
            return new List&lt;Scope&gt;
            {
                //Create the email scope for OAuth. Later, when using OpenID Connect, return StandardScopes.Email instead
                new Scope() { Name = &quot;email&quot;, DisplayName = &quot;Email&quot;, Claims = new List&lt;ScopeClaim&gt;() { new ScopeClaim(&quot;email&quot;, true) } }
            };
        }
    }
}
</code></pre>
<p><strong>Clients.cs</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//Added
using IdentityServer3.Core.Models;

namespace AuthAndApi.IdOptions
{
    public class Clients
    {
        public static List&lt;Client&gt; Get()
        {
            return new List&lt;Client&gt;()
            {
                //A client is an application configured to request tokens.
                //The resource, such as Web API, is configured to accept these tokens.
                new Client()
                {
                    ClientName = &quot;Pretend Android Mobile App&quot;,
                    ClientId = &quot;a065ae9f-0d02-45fa-85b6-4dc93e2ad5ef&quot;,
                    Enabled = true,
                    //About Reference vs JWT tokens
                    //https://leastprivilege.com/2015/11/25/reference-tokens-and-introspection/
                    AccessTokenType = AccessTokenType.Reference,
                    Flow = Flows.AuthorizationCodeWithProofKey,
                    AllowedScopes = new List&lt;string&gt;
                    {
                        &quot;email&quot;
                    },
                    //URIs the authorization code is allowed to be redirected to
                    RedirectUris = new List&lt;string&gt;()
                    {
                        &quot;http://localhost:19191/&quot;
                    },
                    //Shouldn't be required for this flow, but is
                    ClientSecrets = new List&lt;Secret&gt;()
                    {
                        new Secret(&quot;e9711973-edd7-496f-b415-b10ad0667305&quot;.Sha256())
                    }
                }
            };
        }
    }
}
</code></pre>
<p>In IdUsers folder:</p>
<p><strong>Users.cs</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//Added
using IdentityServer3.Core.Services.InMemory;
using System.Security.Claims;
namespace AuthAndApi.IdUsers
{
    public class Users
    {
        public static List&lt;InMemoryUser&gt; Get()
        {
            return new List&lt;InMemoryUser&gt;
            {
                new InMemoryUser
                {
                    //Subject is identifier? Could be external identity,
                    //so it's not our own database primary key
                    Subject = &quot;1&quot;,
                    Username = &quot;alice&quot;,
                    Password = &quot;secret&quot;,
                    Claims = new List&lt;Claim&gt;()
                    {
                        new Claim(&quot;email&quot;, &quot;alice@example.com&quot;)
                    }
                }
            };
        }
    }
}
</code></pre>
<p>Add Startup.cs. This is the class that builds the OWIN pipeline, so the order in which features are added is important.</p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//Added
using IdentityServer3.Core.Configuration;
using Owin;
using AuthAndApi.IdOptions;
using AuthAndApi.IdUsers;


namespace AuthAndApi
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            //Configure IdentityServer for issuing authentication tokens
            var options = new IdentityServerOptions
            {
                Factory = new IdentityServerServiceFactory()
                .UseInMemoryClients(Clients.Get())
                .UseInMemoryScopes(Scopes.Get())
                .UseInMemoryUsers(Users.Get()),
                //SSL MUST be used in production
#if DEBUG
                RequireSsl = false
#endif
            };
            //add to the pipeline
            app.UseIdentityServer(options);
        }
    }
}
</code></pre>
<p>The basic IdentityServer is configured for OAuth. For now, we don't need a web page to open, since this is a server, so turn off displaying the page in project Properties.</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_074519.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_074519.png" alt="2017-05-06_074519" title="2017-05-06_074519" /></a></p>
<blockquote>
<p><strong>Note about Reference vs JWT tokens</strong><br />
There are two general types of access tokens IdentityServer can return: Reference, or JSON Web Token (JWT). JWTs are self-contained; they can be validated without contacting the server. But they're slightly more complicated to configure. One advantage of using Reference tokens is that they can be quickly revoked, since the resource must call the authorizing server on each use. The disadvantage is this increases network traffic.</p>
</blockquote>
<h2 id="pretend-mobile-app-get-token">Pretend Mobile App - Get Token</h2>
<p><strong>References</strong><br />
<a href="https://identityserver.github.io/Documentation/docsv2/overview/simplestOAuth.html">Simplest OAuth Server</a><br />
<a href="https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Simplest%20OAuth2%20Walkthrough">Simplest OAuth2 Walkthrough Code</a></p>
<p>Now we're going to get an authorization code and token from the server, using a native application that simulates a mobile app. In the Authorization Code Grant, the authorization code is retrieved by using an agent--normally a web browser. Mobile apps can open browsers on behalf of applications, providing a seamless experience. They can also register special URIs to receive requests. The basic flow is:</p>
<p><strong>Front Channel</strong></p>
<ol>
<li>App requests code from the server's authorization endpoint, and includes what URI to post the results to.</li>
<li>Browser opens, server presents authentication/authorization screens, then posts code to supplied URI.</li>
</ol>
<p><strong>Back Channel</strong></p>
<ol start="3">
<li>App reads the code and sends request to the server's token endpoint.</li>
<li>Server validates, then responds with the access token.</li>
</ol>
<p>Add a standard console application to the solution, named PretendMobile.</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_083908_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_083908_1.png" alt="2017-05-06_083908" title="2017-05-06_083908" /></a></p>
<p>Add packages. These aren't required (and wouldn't be available for a mobile application). They just include helper classes and methods for the HTTP communication. Anything they do could be done with HttpClient or some other appropriate network library.</p>
<blockquote>
<p><strong>Note</strong><br />
Version number is important! Later versions are for .Net Core.</p>
</blockquote>
<pre><code class="language-csharp">Install-Package IdentityModel -Version 1.9.2 -Project PretendMobile
</code></pre>
<p>Program.cs</p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
//Added
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Net.Http;
using IdentityModel;
using IdentityModel.Client;

namespace PretendMobile
{
    class Program
    {
        static void Main(string[] args)
        {
            var response = GetAccessToken();
            Console.WriteLine(&quot;Access Token: &quot; + response.AccessToken);
            Console.ReadLine();
        }

        static TokenResponse GetAccessToken()
        {
            string clientId = &quot;a065ae9f-0d02-45fa-85b6-4dc93e2ad5ef&quot;;
            string clientSecret = &quot;e9711973-edd7-496f-b415-b10ad0667305&quot;;
            string scope = &quot;email&quot;;
            string redirectUri = &quot;http://localhost:19191/&quot;;
            string verifier = CryptoRandom.CreateUniqueId(64);
            string codeChallenge = verifier.ToCodeChallenge();
            string authorizationEndpoint = &quot;http://localhost:27230/connect/authorize&quot;;
            string tokenEndpoint = &quot;http://localhost:27230/connect/token&quot;;

            //Front channel to get the authorization code
            //This simulates the mobile app starting a browser session on the authorization server,
            //allowing the user to authenticate,
            //while the app waits for the redirect from the auth server that contains the code.
            OpenBrowserToAuthenticate(authorizationEndpoint, clientId, scope, redirectUri, codeChallenge);
            string code = ReceiveAuthCodeFromServer(redirectUri);
            Console.WriteLine(&quot;Authorization Code: &quot; + code);

            //Back channel to get the access token
            //The client secret is still required by IdentityServer, even though it's not
            //really secret. The code challenge and verifier are the real secret.
            //The redirectUri is part of the verification process. There's no actual redirection.
            var client = new TokenClient(
                tokenEndpoint,
                clientId,
                clientSecret);
            return client.RequestAuthorizationCodeAsync(code, redirectUri, verifier).Result;
        }

        static void OpenBrowserToAuthenticate(string authorizationEndpoint, string clientId, string scope, string redirectUri, string codeChallenge)
        {
            string nonce = CryptoRandom.CreateUniqueId(64);

            AuthorizeRequest request = new AuthorizeRequest(authorizationEndpoint);
            string url = request.CreateAuthorizeUrl(
                clientId: clientId,
                responseType: &quot;code&quot;,
                scope: scope,
                redirectUri: redirectUri,
                nonce: nonce,
                responseMode: OidcConstants.ResponseModes.FormPost,
                codeChallenge: codeChallenge,
                codeChallengeMethod: OidcConstants.CodeChallengeMethods.Sha256);

            Debug.WriteLine(url);
            Process.Start(url);
        }

        static string ReceiveAuthCodeFromServer(string redirectUri)
        {
            var web = new HttpListener();
            web.Prefixes.Add(redirectUri);
            Console.WriteLine(&quot;Listening for request from auth server...&quot;);
            web.Start();
            var req = web.GetContext().Request;
            Stream body = req.InputStream;
            var encoding = req.ContentEncoding;
            var reader = new StreamReader(body, encoding);
            string code = reader.ReadToEnd().Replace(&quot;code=&quot;, &quot;&quot;);
            Console.WriteLine(&quot;Got it, closing.&quot;);

            //Not sure how, but the mobile app should end the browser session, maybe when the app
            //gets the response.
            body.Close();
            reader.Close();
            web.Close();
            return code;
        }

    }
}
</code></pre>
<p>Let's configure the solution to run both projects. Right-click Solution and choose Properties. Change the Startup Project to &quot;Multiple startup projects,&quot; the Actions to &quot;Start,&quot; and be sure the identity server project starts first.</p>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_091226_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_091226_1.png" alt="2017-05-06_091226" title="2017-05-06_091226" /></a></p>
<p>Run the solution.</p>
<ol>
<li>The server will start.</li>
<li>The console application will open a browser to the /authorize endpoint, requesting an authorization code.</li>
<li>Authenticate using credentials &quot;alice&quot; and &quot;secret&quot;.</li>
<li>Authorize the requested scope(s).</li>
<li>The authorization code is sent back to the listening application.</li>
<li>The app sends a direct request to the /token endpoint, requesting an access token.</li>
<li>The server returns the token.</li>
</ol>
<p><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104414.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104414.png" alt="2017-05-06_104414" title="2017-05-06_104414" /></a><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104502.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104502.png" alt="2017-05-06_104502" title="2017-05-06_104502" /></a><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104651_1.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104651_1.png" alt="2017-05-06_104651" title="2017-05-06_104651" /></a><a href="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104726.png"><img src="https://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple/images/17-05-06_104726.png" alt="2017-05-06_104726" title="2017-05-06_104726" /></a></p>
<h1 id="wrap-up">Wrap Up</h1>
<p>We've built a basic OAuth2 server that uses the Authorization Code Grant plus PKCE for dynamically generated client secrets, and can get an access token. In the next part, we'll build a protected resource that requires a token.</p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></h2>
                <p class='post-info'><span class='posted-on'>2017-03-28 09:31</span></p>
                <div class='post-content'><p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/ci-logo.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/ci-logo.png" alt="ci-logo" title="ci-logo" /></a> This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository.</p>
<p><a href="https://bitbucket.org/bladewolf55/tfs-ci-samples">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples/src/default/CI%20Walk%20Through/TFS%20Continuous%20Integration%20Walk%20Through%20Part%205a%20-%20Multiple%20Solutions%20-%20Simple%20Project%20References.md">TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></p>
<h1 id="what-im-talking-about">What I'm Talking About</h1>
<p>Businesses often have source code that's years or decades old, and accumulate problems due to how that code was structured into folders. Especially difficult is how dependencies were managed. It's common to see:</p>
<ul>
<li>Projects with project references to other projects in other solutions, sometimes nesting/cascading in a tangled mess.</li>
<li>Third party libraries that require installation, such as UI controls.</li>
<li>Multiple ways of managing .dll dependencies.</li>
</ul>
<p>Some common challenges--and reasons why the above happen--are:</p>
<ul>
<li>Multiple projects depend on a shared project, and they often need to step through the shared project's code.</li>
<li>Over the years, different developers did things how they liked.</li>
<li>Source control wasn't used, or changed.</li>
</ul>
<h1 id="where-ill-end-up">Where I'll End Up</h1>
<p>I'll start with a set of solutions that have some dependency problems. I'll show how they can work with continuous integration. Then, I'll improve the dependency handling.</p>
<h1 id="a-problematic-structure">A Problematic Structure</h1>
<p>Let's imagine a TFS repository. Instead of a separate Team Project for each solution, there's a single Team Project named $Main that has all the solutions underneath it.</p>
<p>In this folder structure, I'm showing solution folders with their project folders below. So, ReverseIt is a solution folder with the ReverseIt project folder below it, which is the default Visual Studio layout.</p>
<pre><code class="language-csharp">$/Main
_Shared
   NameDb
     NameDb
ReverseIt
  ReverseIt
    &gt; Depends on RevEngine (project reference)
  RevEngine
    &gt; Depends on jamma.dll
ReverseNames
  ReverseNames
    &gt; Depends on RevEngine (project reference)
    &gt; Depends on NameDb (NuGet package)
</code></pre>
<ul>
<li>NameDb DLL returns a list of names, is packaged using NuGet, and stored in a local source.</li>
<li>ReverseIt Console reverses whatever text you type in.</li>
<li>RevEngine DLL has ReverseText method. It is a project reference.</li>
<li>Jamma.dll is a third party security dll. The company is out of business.</li>
<li>ReverseNames Console displays a list of reversed names coming from NameDb.</li>
</ul>
<p>What are the pros and cons of this approach?</p>
<p><strong>Pros</strong></p>
<ul>
<li>If you Get Latest on $Main, all the solutions are in their correct relative folders.</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>You often have to get source you don't need.</li>
<li>The dependency on relative paths is brittle.</li>
<li>You can't use TFS's project management tools effectively.</li>
<li>Doesn't scale. What if you had fifty solutions using this approach?</li>
</ul>
<h1 id="creating-ci-builds-as-is">Creating CI Builds As Is</h1>
<p>My manager says, &quot;We need to get these projects into TFS Build.&quot;</p>
<p>I ask, &quot;Can I restructure TFS?&quot;</p>
<p>He says, &quot;Not yet.&quot;</p>
<p>I say, &quot;OK.&quot;</p>
<p>Since I'm pretty sure there are dependency problems, the first thing I decide to do is spin up a clean machine, install Visual Studio with no changes, Get Latest on $Main, and try to build all the solutions.</p>
<p>What's this!? Multiple failures? Oh, no! What went wrong?</p>
<ol>
<li>ReverseNames failed because we're depending on an in-house NuGet package source, and didn't configure that, so the NameDb dependency didn't exist.</li>
<li>RevEngine failed because Barry's the only developer who has ever worked on RevEngine, and only his machine has jamma.dll. It was never checked into source control.</li>
</ol>
<p>Quite a bit more could go wrong, but you get the idea. Let's fix these with an eye toward our eventual build server.</p>
<hr />
<p><strong>BONUS CODE!</strong></p>
<p>If I had lots of solutions, I could build all of of them using two files in the root of the folder than has all the solution folders.</p>
<p><strong>BuildAllSolutions.targets</strong></p>
<pre><code class="language-xml">&lt;Project ToolsVersion=&quot;14.0&quot;
         xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;
         DefaultTargets=&quot;Default&quot;&gt;
  &lt;!-- http://stackoverflow.com/a/9609086/1628707 --&gt;
  &lt;ItemGroup&gt;
    &lt;AllFiles Include=&quot;.\**\*.sln&quot;/&gt;
  &lt;/ItemGroup&gt;
  &lt;Target Name=&quot;Default&quot;&gt;
    &lt;PropertyGroup&gt;
    &lt;BuildCmd&gt;@(AllFiles-&gt;'&amp;quot;$(MSBuildToolsPath)\msbuild.exe&amp;quot; &amp;quot;%(Identity)&amp;quot; /v:q /fl /flp:errorsonly;logfile=build-logs\%(filename)-log.txt','%0D%0A')&lt;/BuildCmd&gt;
    &lt;/PropertyGroup&gt;
    &lt;Exec Command=&quot;mkdir build-logs&quot; Condition=&quot;!Exists('build-logs')&quot; /&gt;
    &lt;Exec Command=&quot;$(BuildCmd)&quot; /&gt;
  &lt;/Target&gt;
&lt;/Project&gt;
</code></pre>
<p><strong>BuildAllSolutions.cmd</strong></p>
<pre><code class="language-csharp">--rem path to your latest VS build version
&quot;C:\Program Files (x86)\MSBuild\14.0\Bin\msbuild.exe&quot; BuildAllSolutions.targets
pause
</code></pre>
<p>Running the cmd file creates a folder named &quot;build-logs&quot;, recursively builds each solution, and outputs each solution's errors. If a solution's log file is not empty, there was a build problem.</p>
<p><strong>END BONUS CODE</strong></p>
<hr />
<h2 id="dealing-with-a-local-nuget-package-source">Dealing With a Local NuGet Package Source</h2>
<p>There are four (technically five or six!) places to store NuGet config files containing package source information, and two ways to configure package source in TFS Build.</p>
<h3 id="nuget-config-file-locations">NuGet Config File Locations</h3>
<p>Let's assume our in-house NuGet source is located at http://ngserver/nuget.</p>
<ol>
<li><strong>User Profile</strong> - Enter it into Visual Studio's settings. This is fine for regular development, but not good for a build server because the build agent service will run as either Local System or a specific user account such as &quot;tfsagent&quot;.</li>
</ol>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_155817.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_155817.png" alt="2017-03-17_155817" title="2017-03-17_155817" /></a></p>
<p>You can also manually edit the user profile's nuget.config, which is what the Visual Studio setting dialog is doing. The file is located at %APPDATA%\NuGet\NuGet.config. You add the source under packageSources.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;activePackageSource&gt;
    &lt;add key=&quot;nuget.org&quot; value=&quot;https://www.nuget.org/api/v2/&quot; /&gt;
  &lt;/activePackageSource&gt;
  &lt;packageSources&gt;
    &lt;add key=&quot;nuget.org&quot; value=&quot;https://api.nuget.org/v3/index.json&quot; protocolVersion=&quot;3&quot; /&gt;
    &lt;add key=&quot;NuGet Local Source&quot; value=&quot;http://ngserver/nuget&quot; /&gt;
  &lt;/packageSources&gt;
  &lt;packageRestore&gt;
    &lt;add key=&quot;enabled&quot; value=&quot;True&quot; /&gt;
    &lt;add key=&quot;automatic&quot; value=&quot;True&quot; /&gt;
  &lt;/packageRestore&gt;
  &lt;bindingRedirects&gt;
    &lt;add key=&quot;skip&quot; value=&quot;False&quot; /&gt;
  &lt;/bindingRedirects&gt;
&lt;/configuration&gt;
</code></pre>
<ol start="2">
<li><strong>Solution</strong> - Create a solution-level nuget.config file.</li>
</ol>
<p>You can create a file named nuget.config, put it in your solution's root and add it to source control. This will determine which NuGet sources the solution uses.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;packageRestore&gt;
    &lt;add key=&quot;enabled&quot; value=&quot;True&quot; /&gt;
    &lt;add key=&quot;automatic&quot; value=&quot;True&quot; /&gt;
  &lt;/packageRestore&gt;
  &lt;packageSources&gt;
    &lt;!-- uncomment clear if you want to ONLY use these sources --&gt;
    &lt;!-- otherwise, these sources are added to your list --&gt;
    &lt;!-- clear /&gt; --&gt;
  &lt;add key=&quot;NuGet Local Source&quot; value=&quot;http://ngserver/nuget&quot; /&gt;
  &lt;/packageSources&gt;
&lt;/configuration&gt;
</code></pre>
<p><strong>Note: NuGet 3.3 and earlier looked for a config file in a solution's .nuget folder. Not recommended.</strong></p>
<ol start="3">
<li><strong>Machine-Wide</strong> - Create a machine-wide config file.</li>
</ol>
<p>The machine-wide story is confusing. A machine-wide NuGet config file can reside in one of two folders. The folder changed with the introduction of NuGet 4.0, which is used by Visual Studio 2017.</p>
<ul>
<li><code>%ProgramData%\NuGet\Config\</code> (NuGet 3.x or earlier), or</li>
<li><code>%ProgramFiles(x86)%\NuGet\Config\</code> (NuGet 4.0+)</li>
</ul>
<p>It can be named anything that ends with .config, including <code>NuGet.config</code>. However, a custom name seems recommended.</p>
<p>For example, I could name the file <code>SoftwareMeadows.Online.config</code>. It would contain the package source like this:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;packageSources&gt;
    &lt;add key=&quot;NuGet Local Source&quot; value=&quot;http://ngserver/nuget&quot; /&gt;
  &lt;/packageSources&gt;
&lt;/configuration&gt;
</code></pre>
<p>Network Administrators will like this option because they can use it with Group Policies. A policy could target computers in Developers and Build Servers groups and always create the desired config file.</p>
<p><strong>Note: NuGet 4.x does not look for config files in ProgramData.</strong></p>
<ol start="4">
<li><strong>Default Config</strong></li>
</ol>
<p>If you're using NuGet 2.7 through 3.x, default sources can also be configured in the file <code>%ProgramData%\NuGet\NuGetDefaults.config</code>. These show up in Visual Studio as local, not machine-wide, sources.</p>
<p><strong>Note: This file and location will not work with NuGet 4.x</strong></p>
<ol start="5">
<li><strong>Other?</strong></li>
</ol>
<p>You could also put a nuget.config file in any folder and specify it using the nuget.exe -configFile switch, e.g. <code>nuget restore -configfile c:\my.config</code>.</p>
<p><strong>Notes</strong></p>
<ul>
<li>Testing shows that in some cases if the package source URL is the same, only one source key is used. For example, if NuGet.config and NuGetDefaults.config have an identical source URL, the key from NuGet.config is used.</li>
<li>It appears a source listed in NuGetDefaults.config cannot be removed using the <code>&lt;clear /&gt;</code> tag. It can only be disabled.</li>
</ul>
<h3 id="specifying-the-config-in-tfs-build">Specifying the Config in TFS Build</h3>
<p>Whichever method you use below, ensure the agent service has permissions to the config file. The service name will be something like &quot;VSO Agent ([AgentName])&quot;. Microsoft recommends creating a user named &quot;tfsagent&quot;. The default is Local Service.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162121.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162121.png" alt="2017-03-17_162121" title="2017-03-17_162121" /></a></p>
<ol>
<li>TFS Machine-Wide Path - RECOMMENDED</li>
</ol>
<p>Personally, for internal development, I'd add the package source to the build server's machine-wide config file and be done with it. So, my path--assuming VS 2015 installed--would be something like: <code>%ProgramData%\NuGet\Config\SoftwareMeadows.Online.config</code></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162400.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162400.png" alt="2017-03-17_162400" title="2017-03-17_162400" /></a></p>
<p>Remember from above this will change if you install Visual Studio 2017 on the build server (or use NuGet 4.x).</p>
<ol start="2">
<li>Add nuget.config to the build agent's profile.</li>
</ol>
<p>Your build server is basically a development machine, with an agent automatically building the software. If you run the service using tfsagent, you could create/edit a nuget.config file found at <code>C:\Users\tfsagent\AppData\Roaming\NuGet</code>.</p>
<ol start="3">
<li>TFS NuGet Installer Path Field</li>
</ol>
<p>If you check in a nuget.config file with the solution, enter the path in your build definition's NuGet Installer step. This path is relative to the Path to Solution. I would use this solution if my team didn't all work in the same network, and so needed to use an authenticated NuGet server such as <a href="http://myget.org/">MyGet</a>.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162452.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162452.png" alt="2017-03-17_162452" title="2017-03-17_162452" /></a></p>
<ol start="4">
<li>Use the -configFile switch</li>
</ol>
<p>You could also put a nuget.config file somewhere on the build server (or network?), and use the -configFile switch. Remember the build agent service needs permission to read the file.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162410.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_162410.png" alt="2017-03-17_162410" title="2017-03-17_162410" /></a></p>
<h2 id="dealing-with-barry">Dealing with Barry</h2>
<p>Barry's been with us for five years. Barry drinks his coffee black, and lots of it. Barry knows where every file on his machine is, and would prefer you didn't look over his shoulder. Barry has his code, please leave it alone.</p>
<p>Unfortunately, Barry assumes he'll always be here, and hasn't ever tested what would happen if his machine imploded in a fiery death. I go to Barry and say, &quot;Your code doesn't build on a clean checkout.&quot; Barry storms over to my computer and starts typing. I observe, take notes, and when I see him copying jamma.dll, ask, &quot;What's that?&quot;</p>
<p>&quot;Oh,&quot; he mumbles, &quot;license dll. Forgot about that. Kinda important. RevEngine won't run without it.&quot;</p>
<p>I don't say anything, but make a note that, once I have all the software building and deployable, Barry might not be long for our company. In the meantime, there are two ways I can handle this old dependency.</p>
<ol>
<li>Ensure it's in a folder under the solution or project, reference it there, and add it to source control.</li>
</ol>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_164300.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-17_164300.png" alt="2017-03-17_164300" title="2017-03-17_164300" /></a></p>
<ol start="2">
<li>Create the dll as a NuGet package, and add it to my NuGet server.</li>
</ol>
<p><a href="https://dist.nuget.org/index.html">Download nuget.exe</a> and put in same folder as the dll (or put in its own folder and add to the system path variables).</p>
<p>Open a command prompt, change directories to where the dll is, and run <code>nuget spec jamma.dll</code>.</p>
<p>Edit the resulting damma.dll.nuspec file, change or remove elements as desired.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;package &gt;
  &lt;metadata&gt;
    &lt;id&gt;jamma.dll&lt;/id&gt;
    &lt;version&gt;3.2.52&lt;/version&gt;
    &lt;authors&gt;Jamma Ltd&lt;/authors&gt;
    &lt;owners&gt;Jamma Ltd&lt;/owners&gt;
    &lt;requireLicenseAcceptance&gt;false&lt;/requireLicenseAcceptance&gt;
    &lt;description&gt;License file&lt;/description&gt;
    &lt;copyright&gt;Copyright 2017&lt;/copyright&gt;
  &lt;/metadata&gt;
&lt;/package&gt;
</code></pre>
<p><strong>Important: Now move the dll into a subfolder named &quot;lib&quot;</strong></p>
<p>Package the dll using <code>nuget pack</code>.</p>
<p>Add the package (jamma.dll and jamma.dll.nuspect) to your NuGet server however is appropriate, might just be copy/paste, or using nuget push commands. See the NuGet documentation.</p>
<p>Remove the reference from the project, and re-add from NuGet. Build and test. If everything's OK, delete the old jamma.dll file and folder.</p>
<p>Which would I do? Number 2, so that all my external dependencies are handled the same way (NuGet).</p>
<h2 id="its-building-so-add-to-ci">It's Building, so Add to CI</h2>
<p>I test again by deleting and re-getting all the source code, open each and restore any NuGet packages, and build all the solutions. Everything builds, so I'm ready to configure TFS Build for continuous integration.</p>
<p>All my solutions are under the same team project. I'll need to be careful when I create my build definitions that I'm only checking out and building the solutions I want. The key to that is not saving the definition until its Repository and Triggers have been configured.</p>
<p>I'll create the first definition in detail, then just list settings for the remainders.</p>
<p><strong>But first, the NuGet Package Source</strong></p>
<p>If I haven't done it already, I'll add a machine-wide nuget configuration file that has my custom package source.</p>
<p>Create the file <code>%ProgramData%\NuGet\Config\MySource.config</code> with the source definition. In my case, I'm testing with a local NuGet server.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;packageSources&gt;
    &lt;add key=&quot;NuGet Test Server&quot; value=&quot;http://localhost:7275/&quot; /&gt;
  &lt;/packageSources&gt;
&lt;/configuration&gt;
</code></pre>
<p><strong>NameDb</strong></p>
<p>Let's start at the top with the simple one, NameDb. In TFS, navigate to the correct collection and the Main team project. Then open the Build tab, start a new build and choose the Visual Studio template.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_143134.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_143134.png" alt="2017-03-25_143134" title="2017-03-25_143134" /></a></p>
<p>Create using the repository source Main Team Project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_143854.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_143854.png" alt="2017-03-25_143854" title="2017-03-25_143854" /></a></p>
<p>Delete the Index, Copy and Publish steps. I can add those back if we want them. I don't need the NuGet installer step, either, but I'll configure it as an example since the other projects need it.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_144248.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_144248.png" alt="2017-03-25_144248" title="2017-03-25_144248" /></a></p>
<p>Set the NuGet Installer path to the NameDb solution file.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_145021.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_145021.png" alt="2017-03-25_145021" title="2017-03-25_145021" /></a></p>
<p>Set the Visual Studio Build path to the NameDb solution file.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_145758.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_145758.png" alt="2017-03-25_145758" title="2017-03-25_145758" /></a></p>
<p>Set the Visual Studio Test &quot;Test Assembly&quot; to the solution folder path. This is the physical folder where the agent will have pulled the files from TFS, the same as the LocalPath path we'll choose in Repository. The path definition means &quot;Run any dll with &quot;test&quot; in its name under the build definition name, but not in the obj folders.&quot; Since our build definition will be Release, it'll run Release/NameDb.Tests.dll.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_150526.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_150526.png" alt="2017-03-25_150526" title="2017-03-25_150526" /></a></p>
<p>Do NOT Save!</p>
<p>Change to the Repository tab. This controls what source code gets checked out by the build. Change the mapped paths. We'll keep the cloaked Drops folder, even though we aren't publishing anything yet.</p>
<p>Notice the LocalPath is set. This is so the contents of the NameDb solution folder are placed under a _Shared\NameDb folder, just like in the repository. It's not strictly needed for this build, but remember how this works if you're building multiple solutions with project dependencies in relative folders.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_151640.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_151640.png" alt="2017-03-25_151640" title="2017-03-25_151640" /></a></p>
<p>Change to the Variables tab and ensure the BuildConfiguration is &quot;release&quot;.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_1528.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_1528.png" alt="2017-03-25_152836" title="2017-03-25_152836" /></a></p>
<p>Change to the Triggers tab. This controls what starts a build. Check Continuous Integration and set the path to the NameDb folder. We only want to build if a file in NameDb changes.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_153129.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_153129.png" alt="2017-03-25_153129" title="2017-03-25_153129" /></a></p>
<p>Now Save the definition and give it a good name like &quot;DbName&quot;.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_1533.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_1533.png" alt="2017-03-25_153325" title="2017-03-25_153325" /></a></p>
<p>Finally, queue the build and see if it succeeds!</p>
<blockquote>
<p><strong>Important</strong><br />
Check each step's output for what you expect. Especially, check that tests ran! The test step will success even if it doesn't find tests!</p>
</blockquote>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_153438.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_153438.png" alt="2017-03-25_153438" title="2017-03-25_153438" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_155144.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-_155144.png" alt="2017-03-25_155144" title="2017-03-25_155144" /></a></p>
<p>For the next solutions, I'll just list the settings for the build definitions. All of them use the Visual Studio template, and only keep the NuGet, Build and Test steps.</p>
<p><strong>ReverseIt</strong></p>
<p>BUILD TAB</p>
<ul>
<li>NuGet Installer path to solution: <code>$/Main/ReverseIt/ReverseIt.sln</code></li>
<li>Build solution path: <code>$/Main/ReverseIt/ReverseIt.sln</code></li>
<li>Test assembly path: <code>ReverseIt\**\$(BuildConfiguration)\*test*.dll;-:**\obj\**</code></li>
</ul>
<p>REPOSITORY TAB</p>
<ul>
<li>Map Server Path <code>$/Main/ReverseIt</code> to Local Path <code>ReverseIt</code></li>
<li>Map Cloaked Path <code>$/Main/ReverseIt/Drops</code></li>
</ul>
<p>VARIABLES TAB</p>
<ul>
<li>BuildConfiguration: release</li>
</ul>
<p>TRIGGERS TAB</p>
<ul>
<li>Include <code>$/Main/ReverseIt</code></li>
</ul>
<p><strong>ReverseNames</strong></p>
<p>Strictly speaking, I don't need to build RevEngine. Any changes I make will trigger ReverseIt to build, and if it fails then someone--hopefully I--will be notified. What I do need to do is get the source code into the correct relative folder, and install the NuGet packages. In short, I need to ensure RevEngine can be used by ReverseNames.</p>
<p>So, I'm going to have two sets of steps; one for RevEngine, and one for ReverseNames. It's a brittle definition: Whoever, works on RevEngine needs to know about this build, too, in case something needs to change.</p>
<p>BUILD TAB</p>
<ul>
<li><p>NuGet Installer RevEngine</p>
<ul>
<li>Path to solution: <code>ReverseIt\**\*.csproj</code></li>
<li>NuGet Arguments: <code>-PackagesDirectory ..\packages</code></li>
</ul>
<p>Notice I set the path to the <em>local project</em> files. This will restore packages for any .csproj file found. I also explicitly say where to put the packages folder relative to the .csproj file.</p>
</li>
<li><p>NuGet Installer ReverseNames</p>
<ul>
<li>Path to solution: $/Main/ReverseNames/ReverseNames.sln</li>
</ul>
</li>
<li><p>Build ReverseNames</p>
<ul>
<li>Solution path: $/Main/ReverseNames/ReverseNames.sln</li>
</ul>
</li>
<li><p>Test ReverseNames</p>
<ul>
<li>Assembly path: <code>ReverseNames\**\$(BuildConfiguration)\*test*.dll;-:**\obj\**</code></li>
</ul>
</li>
</ul>
<p>REPOSITORY TAB<br />
This is critical. I'm telling the build <em>exactly</em> which project folders to pull from ReverseIt, i.e. RevEngine and RevEngine.Tests. This way I don't pull and build ReverseIt.csproj.</p>
<p>If I add a test project later, I'll need to add its mapped path here. Note that I removed the Drops cloaked path since I don't need it.</p>
<ul>
<li>Map Server Path <code>$/Main/ReverseIt/RevEngine</code> to Local Path <code>ReverseIt\RevEngine</code></li>
<li>Map Server Path <code>$/Main/ReverseIt/RevEngine.Tests</code> to Local Path <code>ReverseIt\RevEngine.Tests</code></li>
<li>Map Server Path <code>$/Main/ReverseNames</code> to Local Path <code>ReverseNames</code></li>
</ul>
<p>VARIABLES TAB</p>
<ul>
<li>BuildConfiguration: release</li>
</ul>
<p>TRIGGERS TAB<br />
I'm triggering the build if ReverseNames changes.</p>
<ul>
<li>Include <code>$/Main/ReverseNames</code></li>
</ul>
<p>Here are some screenshots of the ReverseNames definition.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_190426.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_190426.png" alt="2017-03-26_190426" title="2017-03-26_190426" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_190546.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_190546.png" alt="2017-03-26_190546" title="2017-03-26_190546" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_1906_.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-26_1906_.png" alt="2017-03-26_190620" title="2017-03-26_190620" /></a></p>
<h1 id="improving-the-solutions-dependencies-and-team-projects">Improving the Solutions, Dependencies and Team Projects</h1>
<p>What I've done so far works. Sort of. But it's not exactly ideal, especially if there were fifty solutions, not just three. One big thing I lose is the ability to maintain separate project boards and work items per project. To do that, I'd really like a separate Team Project per solution (or in some cases it could be multiple solutions).</p>
<p>The team projects might look like this.</p>
<pre><code class="language-csharp">$\NameDb
$\RevEngine
$\ReverseIt
$\ReverseNames
</code></pre>
<p>And then there's the project reference. The project reference is bound to cause headaches in the future. One developer will change RevEngine and silently break the ReverseNames build. I say &quot;silently,&quot; because it could be something like adding a new unit test project that doesn't get run by ReverseNames because it doesn't get pulled from source control.</p>
<p>Because it's a shared dependency, RevEngine needs to be in its own solution under _Shared and published as a NuGet package.</p>
<p>Right about now, someone's saying, &quot;But but but! I need to be able to step through that code! And make changes that I can test against ReverseIt!!&quot;</p>
<p>This might point to too much coupling between the projects, but so what? That's what you need. For debugging,</p>
<ul>
<li>Publish the NuGet <a href="https://docs.microsoft.com/en-us/nuget/create-packages/symbol-packages">package with debug symbols</a>. This solves the debugging problem.</li>
</ul>
<p>If you really need to change code in the context of the solution,</p>
<ol>
<li>Drop the RevEngine NuGet reference from ReverseNames.</li>
<li>Get the latest RevEngine code into its _Shared\RevEngine folder.</li>
<li>Temporarily add the project reference to ReverseNames.</li>
<li>Do the work.</li>
<li>When finished, drop the RevEngine project reference.</li>
<li>ReAdd the NuGet reference (which doesn't have your changes, sorry).</li>
<li>Open the RevEngine solution and run the tests.</li>
<li>Commit the RevEngine changes, which, sorry, need to be taken through QA, published, etc.</li>
<li>When that's finished, update the RevEngine NuGet package in ReverseNames.</li>
<li>Run the tests, commit, QA, etc.</li>
</ol>
<p>In other words, you need to treat RevEngine as if it were some third party assembly like Entity Framework or NLog.</p>
<p>All of this leads to...</p>
<h1 id="key-thinking-to-managing-dependencies">Key Thinking to Managing Dependencies</h1>
<ol>
<li>Treat your dependencies as if they're third party.</li>
<li>Shared dependencies need to be in their own solutions.</li>
<li>What does it take to check out, build and test the solution on a new computer?</li>
<li>How would you store the project(s) on GitHub or other public remote repository?</li>
</ol>
<h1 id="the-plan">The Plan</h1>
<p>I'm going to do just three things, but they'll make a big difference.</p>
<ol>
<li>Reorganize the solutions into discrete team projects</li>
<li>Publish shared project references as NuGet packages</li>
<li>Update projects to use the packages</li>
</ol>
<blockquote>
<p><strong>Important</strong><br />
Before getting started in a production environment, I'd disable all of the affected TFS Build definitions. I don't want anything running if I don't need to.</p>
<p>I would also make a backup copy of all the affected source code, just in case something gets lost.</p>
</blockquote>
<h1 id="reorganizing-into-team-projects">Reorganizing into Team Projects</h1>
<p>First, I'll create my new team projects. Then I'll move my code.</p>
<blockquote>
<p><strong>Note</strong><br />
You can also add team projects using the Visual Studio Team Explorer.</p>
</blockquote>
<ol>
<li><p>Open TFS in the browser, e.g. <a href="http://nesbit:8080/tfs">http://nesbit:8080/tfs</a>. Or, if you know your collection's name, you can open it directly and skip to step 4. (e.g. <a href="http://nesbit:8080/tfs/CICollection3/_admin">http://nesbit:8080/tfs/CICollection3/_admin</a>)</p>
</li>
<li><p>Click the upper right hand corner settings &quot;gear&quot; icon to open the Manage Server page.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_085328.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_085328.png" alt="2017-03-27_085328" title="2017-03-27_085328" /></a></p>
</li>
<li><p>Select the Collection holding your team projects, and click &quot;View the collection administration page&quot;.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_085913.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_085913.png" alt="2017-03-27_085913" title="2017-03-27_085913" /></a></p>
</li>
<li><p>Click New Team Project, enter the information and Create.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_090645.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_090645.png" alt="2017-03-27_090645" title="2017-03-27_090645" /></a></p>
</li>
</ol>
<p>Repeat to create the four team projects.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_0911.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_0911.png" alt="2017-03-27_091136" title="2017-03-27_091136" /></a></p>
<p>We can't move the code using the TFS web application, so</p>
<ol>
<li><p>Open Visual Studio</p>
</li>
<li><p>Open Team Explorer and click the plug icon to Manage Connections</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091617.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091617.png" alt="2017-03-27_091617" title="2017-03-27_091617" /></a></p>
</li>
<li><p>Double click the collection you're using to connect to it.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091812.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091812.png" alt="2017-03-27_091812" title="2017-03-27_091812" /></a></p>
</li>
<li><p>Open Source Control Explorer.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091911.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_091911.png" alt="2017-03-27_091911" title="2017-03-27_091911" /></a></p>
</li>
<li><p>The new team project folders need to be mapped to local folders. This is kind of a pain, but with TFS Version Control there's no getting around it. It's easier with git. I would create a new folder named something like TempTeams to hold the new team projects, finish the moves, then delete all my source code mappings and start over. Like I said, a pain. <strong>Be <em>very</em> careful when doing all this that you don't accidentally delete source code from TFS you didn't want to.</strong></p>
</li>
<li><p>To map a team project folder, select it and click the Not Mapped link. Enter the destination folder, and when prompted Get the latest code (there won't be any, that's OK). Map all the team project folders.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_093743.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_093743.png" alt="2017-03-27_093743" title="2017-03-27_093743" /></a></p>
</li>
<li><p>Open the NameDb solution. TFS still doesn't natively allow moving multiple files/folders at once, so we need to move the project contents one a time. First, I'll move the solution file. Right-click, select Move, and enter the NameDb team project. The file will be moved to the NameDb team project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_092818.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_092818.png" alt="2017-03-27_092818" title="2017-03-27_092818" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_094508.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_094508.png" alt="2017-03-27_094508" title="2017-03-27_094508" /></a></p>
</li>
<li><p>Move the NameDb and NameDb.Tests project folders the same way. You <em>can</em> right-click and move an entire folder, just not multiple folders.</p>
</li>
<li><p>When finished, Commit the changes.</p>
</li>
<li><p>You can now delete the NameDb folder from under $/Main/_Shared and commit that change.</p>
</li>
</ol>
<p>Now I'm going to move just the RevEngine project folders to the new RevEngine team project. Later, I'll create their solution file.</p>
<p>Open the ReverseIt folder. Move the RevEngine and RevEngine.Test folders.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_095844.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_095844.png" alt="2017-03-27_095844" title="2017-03-27_095844" /></a></p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_100012.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_100012.png" alt="2017-03-27_100012" title="2017-03-27_100012" /></a></p>
<p>At this point, I move the remaining ReverseIt files/folders to their new team project. Likewise the ReverseNames solution.</p>
<p>Commit the changes. Delete the folders from $/Main, and commit that change, too.</p>
<p><strong>Do NOT delete the $/Main team project! The TFS Build definitions would be deleted, too.!</strong></p>
<p>Finally, go to the RevEngine project in your local working folder, i.e. <code>..TempTeams\RevEngine\RevEngine</code>, open RevEngine.csproj. This will open the project in a solution, we just haven't saved the solution file yet.</p>
<p>Add the RevEngine.Tests project to the solution.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101947.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101947.png" alt="2017-03-27_101947" title="2017-03-27_101947" /></a></p>
<p>Now I have to be careful. I select the solution in Solution Explorer. Then, File &gt; Save RevEngine.sln As.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_102153.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_102153.png" alt="2017-03-27_102153" title="2017-03-27_102153" /></a></p>
<p>In the Save As dialog, I navigate <em>up</em> one folder, so my solution file is at the root of RevEngine.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_1056.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_1056.png" alt="2017-03-27_102556" title="2017-03-27_102556" /></a></p>
<p>Now, I drag and drop the solution file into the Source Control Explorer's RevEngine team project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_102848.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_102848.png" alt="2017-03-27_102848" title="2017-03-27_102848" /></a></p>
<p>Commit the change.</p>
<p>My projects are reorganized, and a couple will build (NameDb and RevEngine). Time to turn handle the RevEngine dependency.</p>
<h1 id="publish-shared-project-references-as-nuget-packages">Publish shared project references as NuGet packages</h1>
<p>I'm still working in the TempTeams folder. I'll wait until everything's working before going back to my preferred folders.</p>
<p>Creating NuGet packages can be complex. For this walkthrough, I'm showing the simplest thing that works; I'm sure these steps are not ideal. The following assumes I have a local NuGet server at http://localhost:7275/nuget that doesn't require an API key for pushing packages (not recommended), and does allow pushing symbols.</p>
<ol>
<li><p>Open the solution, and edit the RevEngine Project Properties &gt; Application &gt; Assembly Information.</p>
</li>
<li><p>Ensure Title, Description, Company and Product are filled in.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_113329.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_113329.png" alt="2017-03-27_113329" title="2017-03-27_113329" /></a></p>
</li>
<li><p>Save <em>and build</em> the solution. You must build, because nuget packs the built dll. It does not build the solution for you.</p>
</li>
<li><p>Download the latest recommended <a href="https://dist.nuget.org/index.html">NuGet.exe file</a>.</p>
</li>
<li><p>Put nuget.exe in the RevEngine project folder.</p>
</li>
<li><p>Open a command prompt and change directory to the RevEngine project folder.</p>
</li>
<li><p>Run <code>nuget spec</code> to create a RevEngine.nuspec file</p>
</li>
<li><p>Edit RevEngine.nuspec and make these changes:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;package &gt;
  &lt;metadata&gt;
    &lt;id&gt;$id$&lt;/id&gt;
    &lt;version&gt;$version$&lt;/version&gt;
    &lt;title&gt;$title$&lt;/title&gt;
    &lt;authors&gt;$author$&lt;/authors&gt;
    &lt;owners&gt;$author$&lt;/owners&gt;
    &lt;description&gt;$description$&lt;/description&gt;
  &lt;/metadata&gt;
&lt;/package&gt;
</code></pre>
</li>
<li><p>Run <code>nuget pack -Symbols</code> to create the regular and symbols package. Remember that, in our case, we want a symbols package so that we can step through the assembly without using a project reference.</p>
</li>
<li><p>Run <code>nuget push *.nupkg -Source http://localhost:7275/api/v2/package</code>. This will push both of the packages.</p>
</li>
</ol>
<h1 id="update-projects-to-use-the-packages">Update projects to use the packages</h1>
<p>This one should be pretty easy. In any solution that has RevEngine as a project reference, remove the project and the reference, then install the NuGet package. Notice that jamma.dll is installed as well, because RevEngine depends on it and the RevEngine project was referencing the jamma.dll NuGet package when it was packages.</p>
<p>After updating, if I open ReverseIt (for example), put a breakpoint on this line,</p>
<p><code>Console.WriteLine(util.ReverseText(text));</code></p>
<p>then run the program, I can step into RevEngine.TextUtilities.cs, which is now part of the debugging symbols.</p>
<h1 id="update-tfs-build-definitions">Update TFS Build Definitions</h1>
<p>It's time to get our builds working again!</p>
<p>TFS doesn't natively support copying/moving build definitions. One solution is to write code using the TFS web API to clone definitions:</p>
<p><a href="http://www.eidias.com/blog/2016/3/7/tfs-2015-cloneimportexport-build-definition-between-team-projects">http://www.eidias.com/blog/2016/3/7/tfs-2015-cloneimportexport-build-definition-between-team-projects</a></p>
<p>However, there's a TFS extension for this, which really saves the day. You can download it here.</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=onlyutkarsh.ExportImportBuildDefinition">Export/Import Build Definitions</a></p>
<blockquote>
<p><strong>Note</strong><br />
If using TFS 2015, you must use version <a href="https://github.com/onlyutkarsh/ExportImportBuildDefinition/releases/tag/v0.0.2">v0.0.2</a>. Later versions only work with TFS 2017.</p>
</blockquote>
<p>Follow the instructions to install the extension.</p>
<p>To install 'Export/Import Build Definition' (EIBD) on Team Foundation Server 2015 Update 2 and above, perform the following steps:</p>
<ol>
<li>Navigate to the Team Foundation Server Extensions page on your server. (For example, http://someserver:8080/tfs/_gallery/manage)</li>
<li>Click Upload new extension and select the file you have just downloaded.</li>
<li>After the extension has successfully uploaded, click Install and select the Team Project Collection to install into.</li>
</ol>
<p>To move NameDb:</p>
<ol>
<li><p>In the Main team project Build tab, right-click the build definition and choose Export. Save the json file to a folder such as TfsBuildExports.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_144558.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_144558.png" alt="2017-03-27_144558" title="2017-03-27_144558" /></a></p>
</li>
<li><p>Change to the NameDb team project Build tab. EIBD has a known limitation: the Export/Import menu items can only be seen on a build definition name, not the &quot;All build definitions&quot; item. So, if necessary, create an empty definition and save it with a non-conflicting name.</p>
</li>
<li><p>Right-click a definition and choose Import, selecting the .json file.</p>
</li>
<li><p>Edit the imported definition.</p>
</li>
<li><p>Make the following changes.</p>
</li>
</ol>
<p>BUILD</p>
<ul>
<li>NuGet Installer path: $/NameDb/NameDb.sln</li>
<li>Build path: $/NameDb/NameDb.sln</li>
<li>Test path: *<em>$(BuildConfiguration)*test</em>.dll;-:*<em>\obj*</em></li>
</ul>
<p>REPOSITORY</p>
<ul>
<li><p>Map $/NameDb, leave Local Path empty</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_145831.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_145831.png" alt="2017-03-27_145831" title="2017-03-27_145831" /></a></p>
</li>
</ul>
<p>TRIGGERS</p>
<ul>
<li>Include $/NameDb</li>
</ul>
<!-- end list -->
<ol start="6">
<li>Test!</li>
</ol>
<p><strong>ReverseIt</strong></p>
<p>Use the same approach as NameDb, namely changing the paths in Build, Repository and Triggers. (In fact, ReverseIt would work with the default Visual Studio template.)</p>
<p><strong>ReverseNames</strong></p>
<p>Likewise, ReverseNames can be simplified because I no longer have the RevEngine project to deal with. In fact, all I have to do is delete anything related to RevEngine, then update the remaining paths as I've done above.</p>
<p><strong>RevEngine</strong></p>
<p>This is a new build definition, and it follows the same simplified pattern as above.</p>
<h1 id="what-just-happened">What Just Happened?</h1>
<p>I'll tell you what. Our build definitions got simpler because</p>
<ol>
<li>We converted our project references to NuGet packages.</li>
<li>We contained our code in team projects.</li>
</ol>
<p>Admittedly, the sample was a pretty simple case. I could have a team project that legitimately encompasses multiple solutions. But if I still apply the key principles from above, I can have clean maintenance and simpler builds. As a bonus, it should be much easier to switch to git if I want, since I'm now treating my code as discrete instead of monolithic.</p>
<h1 id="clean-up">Clean Up</h1>
<p>I can now delete the $/Main team project. But, despite there being a right-click menu item, I can't do it from Source Control Explorer. So, (sigh), back to the web interface and my collection administration page. Select Delete from the dropdown to the left of the team project.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101321.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101321.png" alt="2017-03-27_101321" title="2017-03-27_101321" /></a></p>
<p>Am I <em>sure</em> the team project is empty? If so, enter its name and delete it.</p>
<p><a href="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101437.png"><img src="https://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through/images/17-03-27_101437.png" alt="2017-03-27_101437" title="2017-03-27_101437" /></a></p>
<h1 id="references">References</h1>
<p><a href="https://docs.microsoft.com/en-us/nuget/create-packages/creating-a-package">Creating a Package</a><br />
<a href="https://docs.microsoft.com/en-us/nuget/consume-packages/configuring-nuget-behavior">Configuring NuGet Behavior</a><br />
<a href="http://softwareengineering.stackexchange.com/a/336984">Using Private NuGet Repository</a><br />
<a href="http://stackoverflow.com/a/32624016/1628707">How to Get TFS2015 Build to Restore from Custom NuGet Source 1</a><br />
<a href="http://stackoverflow.com/a/31384347/1628707">How to Get TFS2015 Build to Restore from Custom NuGet Source 2</a><br />
<a href="http://stackoverflow.com/a/28593688/1628707">NuGet Package Source Config Locations</a> <a href="http://blog.nuget.org/20161121/introducing-nuget4.0.html">Introducing NuGet 4</a> <a href="http://stackoverflow.com/a/27569020/1628707">Specifying NuGet Config path for TFS Build</a></p>
<p>Next Part: <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples/src/default/CI%20Walk%20Through/TFS%20Continuous%20Integration%20Walk%20Through%20Part%205a%20-%20Multiple%20Solutions%20-%20Build%20Settings.md">TFS Continuous Integration Walk Through Part 5d - Multiple Solutions: Build Settings</a></p>
</div>
              </div>
               <div class='paging'><a href='index36.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index38.html'>Older</a></div>
      </section>
      <footer><p>All original content copyright (c) Charles L Flatt</p>
</footer>
    </div>
  </div>
  
  <script>
    function toggleNav() {
      var x = document.getElementById("nav");
      if (x.className === "nav") {
        x.className += " responsive";
      } else {
        x.className = "nav";
      }
    }</script>

  

</body>

</html>