<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <link rel='stylesheet' href='http://www.softwaremeadows.com/css/default.css' />
<link rel='stylesheet' href='http://www.softwaremeadows.com/css/tango.css' />

  <title>Home | Software Meadows</title>
</head>

<body>
  <nav>
    <div id="menu">
      <ol>
<li><a href="http://www.softwaremeadows.com/">Home</a></li>
<li><a href="http://www.softwaremeadows.com/about">About</a></li>
</ol>

    </div>
    <div id="recent">
      <h2>Recent</h2>
      <a href='http://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a><a href='http://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a><a href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a><a href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a><a href='http://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a>
    </div>
    <div id="history">
      <h2>History</h2>
      <ol class='tree'><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
    </div>
  </nav>
  <header>
    <div id="site-image">
      <img src="http://www.softwaremeadows.com/images/header.png" alt="" />
    </div>
    <h1 id="site-name"></h1>
    <div id="site-subtitle">A pleasant walk through computing</div>
  </header>
  <section id="content">
    <h1 id="home">Home</h1>

  </section>
  <!-- posts only appear in home index -->
  <section id="posts">
    
              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-20 13:45</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a> This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_24.html">TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></p>
<h2 id="where-im-headed">Where I'm Headed</h2>
<p>For the next walkthroughs, I'm starting with new team projects and sample applications, building a suite of solutions with shared dependencies. My goal is to uncover the various problems that come from:</p>
<ul>
<li>DLL dependencies</li>
<li>Project references</li>
<li>Web.config and app.config settings</li>
<li>Unit tests</li>
<li>Integration tests</li>
<li>BONUS: Migrating to Git</li>
</ul>
<p>Along the way, I'm going to <em>completely abuse</em> the TFS team project structure and show how to clean up and organize a repository.</p>
<h2 id="relationship-of-team-projects-solutions-and-build-definitions">Relationship of Team Projects, Solutions and Build Definitions</h2>
<p>Team Projects are intended to manage a software project. But that doesn't mean there's just one Visual Studio solution for a project. There might be several. For example, our CI Sample projects might end up looking like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1">$/CI <span class="fu">Sample</span> (team project)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">|_CIConsoleSample</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">|_CIRestSample</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">|_CIDocumentation</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">$/CI <span class="fu">Shared</span> (team project)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">|_CINuGetSample</a></code></pre></div>
<p>What does this mean for automated builds?</p>
<ul>
<li>Maybe the Console now has a dependency on the REST solution, and we need Console to build any time REST changes.</li>
<li>Maybe we need the NuGet solution to deploy to a staging location on a successful build, then build dependent solutions pulling this NuGet dll from the staging source.</li>
<li>And maybe we don't want the Documentation to build at all.</li>
</ul>
<blockquote>
<p><strong>Important</strong> If you're using a Continuous Integration trigger, and <em>any</em> trigger fires, <em>all</em> the solutions in the definition will be rebuilt. For example, let's say the definition builds all solutions in the CI Sample team project above (the default behavior). You have a trigger that says "only build when CIConsole changes." It would still build all three solutions.</p>
</blockquote>
<p>This feature of a build definition means that much of the time we'll configure a definition to build just one solution. However, as pointed out above, for a solution that builds an assembly used by multiple projects, you might want to rebuild all the solutions that depend on it, to catch bugs.</p>
<p>As this diagram shows, a team project can include multiple solutions. A build definition can build multiple solutions. A build definition belongs to a single team project, <em>but</em>, it can (with effort) build solutions in <em>other</em> team projects.</p>
<p><a href="images/team-projects-and-builds.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20/images/team-projects-and-builds.png" title="team-projects-and-builds" alt="team-projects-and-builds"></a></p>
<h2 id="the-projects---a-turing-oracle">The Projects - A Turing Oracle</h2>
<p>My sample suite of applications is a pseudo <a href="https://en.wikipedia.org/wiki/Turing_test">Turing Test</a>, and is made up of desktop and web apps. The user can ask questions, and get answers that seem to be from a human. I'll start simple, imitating a real-world project progression. In the end, this will be my structure in the TFS repository.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb2-1" data-line-number="1">_$Shared</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">|_$/Magic8Engine</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">$/TuringDesktop</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">|_TuringDesktop.<span class="fu">sln</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">|_TuringConsole.<span class="fu">csproj</span> (Dependencies: Magic8Engine, TextColor)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">|_TextColor.<span class="fu">csproj</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">$/TuringWeb</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">|_TuringWeb.<span class="fu">sln</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">|_TuringWeb.<span class="fu">csproj</span> (Dependencies: TuringSoap)</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">|_TuringSoap.<span class="fu">sln</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">|_TuringSoap.<span class="fu">csproj</span> (Dependencies: Magic8Engine)</a></code></pre></div>
<p><strong>Magic8Engine</strong> The Magic8Engine produces the answers, using the eerily accurate Magic 8-Ball Algorithm. It's a shared dll, and lives in a separate folder. It's published as a NuGet package.</p>
<p><strong>TuringDesktop</strong> TuringDesktop is a console application for asking questions. The team project has one solution, which itself has two projects.</p>
<p><em>TuringConsole</em>, the UI, has two dependencies. One is the Magic8Engine dll, the other is on TextColor, which is configured as a project reference.</p>
<p><em>TextColor</em> is for changing the color of the text. It is only used by <em>TuringConsole</em>.</p>
<p><strong>TuringWeb</strong> This is our web interface. The team project has two solutions.</p>
<p><em>TuringWeb Solution</em> This solution has one project, TuringWeb, which is dependent on the TuringSoap web service.</p>
<p><em>TuringSoap Solution</em> Our old-fashioned SOAP web service is dependent on the Magic8Engine dll. In the future, the web service <em>could</em> become shared by other applications.</p>
<h2 id="next-up">Next Up</h2>
<p>In the next part, I'll build my desktop application as if I didn't know anything about the future web application.</p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_22.html">TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-06 08:05</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_6.html">TFS Continuous Integration Walk Through Part 4a - Problems With Traits</a></p>
<p><strong>References</strong> <a href="https://www.visualstudio.com/en-us/docs/build/steps/test/visual-studio-test">Test: Visual Studio Test</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2012/11/20/part-2using-traits-with-different-test-frameworks-in-the-unit-test-explorer/">Part 2: Using Traits with different test frameworks</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2013/06/11/part-3-unit-testing-with-traits-and-code-coverage-in-visual-studio-2012-using-the-tfs-build-and-the-new-nuget-adapter-approach/">Part 3: Unit testing with Traits and filtering...</a> &lt;-Note that the documentation on mapping "Category" is wrong, see below! <a href="https://blogs.msdn.microsoft.com/vikramagrawal/2012/07/23/running-selective-unit-tests-in-vs-2012-rc-using-testcasefilter/">Running selective unit tests in VS 2012 RC using TestCaseFilter</a> <a href="http://www.dotnetcatch.com/2016/03/11/vststfs-visual-studio-test-task-filter-criteria/">VSTS/TFS Visual Studio Test Task - Filter Criteria</a> <a href="https://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Group_and_filter_the_test_list">Running unit tests with Test Explorer: Group and Filter</a> <a href="https://msdn.microsoft.com/en-us/library/dd286683.aspx">How to: Group and Run Automated Tests Using Test Categories</a> <a href="https://github.com/Microsoft/vsts-tasks/blob/releases/m109/Tasks/VsTest/README.md">Run Tests using Visual Studio task</a></p>
<p>I initially couldn't get the category filtering to work. The documentation noted in the References said that an xUnit trait of "Category" would be automatically matched to the test explorer's "TestCategory".</p>
<p><a href="images/17-02-02_112605.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24/images/17-02-02_112605.png" title="2017-02-02_112605" alt="2017-02-02_112605"></a></p>
<p>But, that's not true. xUnit (and presumably Nunit and others) passes its traits directly. See this exchange on the subject (Brad Wilson developed xUnit).</p>
<p><a href="https://github.com/xunit/xunit/issues/1052" class="uri">https://github.com/xunit/xunit/issues/1052</a></p>
<p>If you use this attribute in xUnit:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1">[<span class="fu">Trait</span>(<span class="st">"Category"</span>, <span class="st">"manual"</span>)]</a></code></pre></div>
<p>and this filter:</p>
<p><code>TestCategory!=manual</code></p>
<p>the tests will fail. The MS test console will report an error, not run the test as expected. To find the error, you need to look in the build's logs.</p>
<p><a href="images/17-02-02_1_035.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24/images/17-02-02_1_035.png" title="2017-02-02_120035" alt="2017-02-02_120035"></a></p>
<p>Here's the error message. It's the same message you'd get if you used the command line to run the tests (which is how I first discovered the error).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="dv">2017-02</span>-02T18:<span class="dv">55</span>:<span class="fl">03.9288278</span>Z ##[error]Error: [xUnit.<span class="fu">net</span> <span class="dv">00</span>:<span class="dv">00</span>:<span class="fl">00.3802419</span>]</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">CIConsoleSample.<span class="fu">xUnitTests</span>: Exception discovering tests: No tests matched the filter</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">because it contains one or more properties that are not <span class="fu">valid</span> (TestCategory). Specify</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">filter expression containing valid <span class="fu">properties</span> (Category, DisplayName, FullyQualifiedName)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">and <span class="kw">try</span> again.</a></code></pre></div>
<p>"Well, OK," I thought, "I'll just add 'Category' into the filter."</p>
<p><code>TestCategory!=manual | Category!=manual</code></p>
<p>Now I get two errors:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb3-1" data-line-number="1">Error: No tests matched the filter because it contains one or more properties that</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">are not <span class="fu">valid</span> (Category). Specify filter expression containing valid properties</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">(TestCategory, Priority, FullyQualifiedName, Name) and <span class="kw">try</span> again.</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">Information: [xUnit.<span class="fu">net</span> <span class="dv">00</span>:<span class="dv">00</span>:<span class="fl">00.3791321</span>]   Discovering: CIConsoleSample.<span class="fu">xUnitTests</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">Error: [xUnit.<span class="fu">net</span> <span class="dv">00</span>:<span class="dv">00</span>:<span class="fl">00.4843279</span>] CIConsoleSample.<span class="fu">xUnitTests</span>: Exception discovering</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">tests: No tests matched the filter because it contains one or more properties that</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">are not <span class="fu">valid</span> (TestCategory). Specify filter expression containing valid properties</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">(Category, DisplayName, FullyQualifiedName) and <span class="kw">try</span> again.</a></code></pre></div>
<p>Maybe I need to use a Boolean AND in the filter.</p>
<p><code>TestCategory!=manual &amp; Category!=manual</code></p>
<p>Nope, I get the exact same error message. After further testing and research, I learned that if there's a filter, at least one test in the assembly <em>must</em> satisfy the filter. In other words, if you filter on TestCategory, at least one test must include that trait, regardless of whether it's needed.</p>
<p>In my case, I'm using a single Visual Studio Test build step to run tests using two frameworks. When I was using [TestCategory("manual")] for MSTest, and [Trait("Category","manual")] for xUnit, and a filter of <code>TestCategory!=manual | Category!=manual</code>, here's what happened.</p>
<ol>
<li>The MSTest framework was called. The filter was evaluated and no tests with a trait of "Category" were found. So an error was reported.</li>
<li>The xUnit framework was called. The filter was evaluated and no tests with a trait of "TestCategory" were found. So an error was reported.</li>
</ol>
<p>The <em>first</em> time I ran the tests, I only had a filter <code>TestCategory!=manual</code>. The MSTests succeeded because there was, indeed, a trait with that name.</p>
<p>I did try some other filtering, hoping that filters might evaluate conditions in a "short-circuit" way, but always got the same errors. For example, I tried this:</p>
<p><code>(FullyQualifiedName~MSTest &amp;&amp; TestCategory!=manual) || (FullyQuallifiedName~xUnit &amp;&amp; Category!=manual)</code></p>
<p>This as a problem for reusing build definitions. It would be better if invalid traits were simply ignored, and the tests get run. This is a known problem, as Brad Wilson notes at the end of this thread.</p>
<p><a href="https://github.com/xunit/xunit/issues/610" class="uri">https://github.com/xunit/xunit/issues/610</a></p>
<blockquote>
<p>bradwilson commented on Oct 18, 2016 Unfortunately, this exception is generated by Visual Studio, not by us. We provide the list of traits to them, and they do the filtering; they're the ones generating this message. When you Google for the phrase "No tests matched the filter because it contains one or more properties that are not valid" you'll see hits for all testing frameworks, not just xUnit.net.&gt;</p>
</blockquote>
<p>The only workaround is to always include the trait on at least one test in the assembly. Note the trait doesn't need a used value.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb4-1" data-line-number="1">[Fact]</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">[<span class="fu">Trait</span>(<span class="st">"Category"</span>,<span class="st">"blamo"</span>)]</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveGreetingToCloud</span>()</a></code></pre></div>
<p>So, that's not ideal, but it's up to Microsoft to take care of the problem.</p>
<p>Can we mitigate the issue at all? Sort of. We can at least have better management of our trait filters for different test frameworks.</p>
<p>First, let's grant that this is an unusual situation, using multiple test frameworks. The better way to manage this would probably be to have two test runs, one for MSTest and the other for xUnit. Add another build step to our definition, and then to change the Test Assembly fields to search for specifically. In other words, we'd have one build step for MSTest, and one for xUnit, and then we could name the traits as desired. This would rely on developers sticking to some naming conventions.</p>
<blockquote>
<p><strong>Warning</strong> Be sure to evaluate your test results when you change settings and look for sane expectations. For example, when I first tried my xUnit build step, I added an extra "l" to .dll. The build didn't fail, it just didn't find any xUnit tests! I needed to look at the log and check that it had found the tests I expected.</p>
</blockquote>
<p><strong>MSTest step</strong> <a href="images/17-02-02_1322.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24/images/17-02-02_1322.png" title="2017-02-02_125322" alt="2017-02-02_125322"></a></p>
<p><strong>xUnit step</strong> <a href="images/17-02-02_1431.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24/images/17-02-02_1431.png" title="2017-02-02_125431" alt="2017-02-02_125431"></a></p>
<p>Now, when running the automated build, there are two test runs, each with its own filter.</p>
<p>Next Part: <a href="#">TFS Continuous Integration Walk Through Part 5 - Multiple Solutions in Team Project</a></p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-06 07:56</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_63.html">TFS Continuous Integration Walk Through Part 3 - Notifications</a></p>
<p><strong>References</strong> <a href="https://www.visualstudio.com/en-us/docs/build/steps/test/visual-studio-test">Test: Visual Studio Test</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2012/11/20/part-2using-traits-with-different-test-frameworks-in-the-unit-test-explorer/">Part 2: Using Traits with different test frameworks</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2013/06/11/part-3-unit-testing-with-traits-and-code-coverage-in-visual-studio-2012-using-the-tfs-build-and-the-new-nuget-adapter-approach/">Part 3: Unit testing with Traits and filtering...</a> &lt;-Note that the documentation on mapping "Category" is wrong, see below! <a href="https://blogs.msdn.microsoft.com/vikramagrawal/2012/07/23/running-selective-unit-tests-in-vs-2012-rc-using-testcasefilter/">Running selective unit tests in VS 2012 RC using TestCaseFilter</a> <a href="http://www.dotnetcatch.com/2016/03/11/vststfs-visual-studio-test-task-filter-criteria/">VSTS/TFS Visual Studio Test Task - Filter Criteria</a> <a href="https://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Group_and_filter_the_test_list">Running unit tests with Test Explorer: Group and Filter</a> <a href="https://msdn.microsoft.com/en-us/library/dd286683.aspx">How to: Group and Run Automated Tests Using Test Categories</a> <a href="https://github.com/Microsoft/vsts-tasks/blob/releases/m109/Tasks/VsTest/README.md">Run Tests using Visual Studio task</a></p>
<p>In some environments, not all unit tests should be run on the CI server. For example, there might be tests with external dependencies that are expensive to run, such as a fee for verifying data was saved to an external cloud-based site. Or legacy tests that require manual setup or interaction. Or, the most likely, a test that takes a very long time to run. While these should probably be refactored or replaced, the fact is sometimes we don't want all our tests running automatically.</p>
<p>One way to restrict tests running is to use the "Test filter criteria" setting. A simple example is using test categories to isolate the manual tests. "TestCategory", "Priority", "Name", etc are all generically referred to as <em>traits</em>.</p>
<p>Before showing the example, there are two rules for using traits with the Microsoft test console, which is the executable that runs tests regardless of framework.</p>
<blockquote>
<p><strong>Test Filter Criteria Rule</strong> If you set test filter criteria, at least one of your unit tests in every assembly <em>must</em> match that criteria. Otherwise, an error will occur.</p>
</blockquote>
<p>In practice, this means that if your filter is looking for <code>TestCategory=weekly</code>, any project that uses the build definition, and has tests, must have at least one test with a trait named "TestCategory". (For more detail, see <em>Part 4b - Problems With Traits</em>.)</p>
<p>This will make more sense as you go through the code below.</p>
<p>Add the following class to Program.cs. This is <em>simulating</em> a cloud-based retrieval of a greeting. For some fictitious reason, it's very expensive to do this.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">public</span> <span class="kw">class</span> CloudMan</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">//This takes ten minutes to run!</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">public</span> <span class="dt">string</span> <span class="fu">GetLastGreeting</span>()</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">{</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">//Set up connection, pass credentials, etc.</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">return</span> <span class="st">""</span>;</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">}</a></code></pre></div>
<p>Add the following test methods:</p>
<p><strong>MSTest</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb2-1" data-line-number="1">[TestMethod]</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">[<span class="fu">TestCategory</span>(<span class="st">"manual"</span>)]</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveGreetingToCloud</span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">//arrange</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="dt">string</span> value = <span class="st">"Cloud Atlas"</span>;</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="dt">string</span> expectedResult = <span class="st">"Hello, Charles"</span>;</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">TextMan textMan = <span class="kw">new</span> <span class="fu">TextMan</span>();</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">CloudMan cloudMan = <span class="kw">new</span> <span class="fu">CloudMan</span>();</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">//act</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="dt">string</span> actualResult = textMan.<span class="fu">Greeter</span>(value);</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">//assert</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">Assert.<span class="fu">AreEqual</span>(expectedResult, cloudMan.<span class="fu">GetLastGreeting</span>());</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">}</a></code></pre></div>
<p><strong>xUnit</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb3-1" data-line-number="1">[Fact]</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">[<span class="fu">Trait</span>(<span class="st">"TestCategory"</span>, <span class="st">"manual"</span>)]</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveGreetingToCloud</span>()</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">//arrange</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="dt">string</span> value = <span class="st">"Cloud Atlas"</span>;</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="dt">string</span> expectedResult = <span class="st">"Hello, Charles"</span>;</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">TextMan textMan = <span class="kw">new</span> <span class="fu">TextMan</span>();</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">CloudMan cloudMan = <span class="kw">new</span> <span class="fu">CloudMan</span>();</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">//act</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="dt">string</span> actualResult = textMan.<span class="fu">Greeter</span>(value);</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">//assert</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">Assert.<span class="fu">Equal</span>(expectedResult, cloudMan.<span class="fu">GetLastGreeting</span>());</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">}</a></code></pre></div>
<p>MSTest uses a TestCategory attribute for categories. xUnit uses its Trait attribute to set a "TestCategory" trait (traits are also the way to set "Priority").</p>
<blockquote>
<p><strong>Note</strong> You <em>must</em> set the xUnit trait name to TestCategory in this example, or the test won't be discovered. See <em>Part 4b - Problems With Traits</em> for more information.</p>
</blockquote>
<p>If you run the tests locally right now, the new tests will still fail because the category is ignored. Likewise, if you check in the code, the tests will fail on the CI server because there's no filter, yet.</p>
<h2 id="applying-the-filters">Applying the Filters</h2>
<p>It's possible to filter tests locally. One way is from the command line.</p>
<p><a href="https://msdn.microsoft.com/en-us/library/dd286683.aspx" class="uri">https://msdn.microsoft.com/en-us/library/dd286683.aspx</a></p>
<p>But you can also group by traits in the Text Explorer, and selectively run the tests. (This doesn't work so well if you're using multiple test frameworks).</p>
<p><a href="images/17-02-02_1030.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_1030.png" title="2017-02-02_102530" alt="2017-02-02_102530"></a></p>
<p>We want our CI server to only run the non-manual tests. Let's apply the filter in TFS Build. Edit the build definition as shown above, and select the Visual Studio Test step. Add the "Test Filter criteria" <code>TestCategory!=manual</code> and Save.</p>
<p><a href="images/17-02-02_103011.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_103011.png" title="2017-02-02_103011" alt="2017-02-02_103011"></a></p>
<p>Click "Queue build" to rerun the build. If you haven't checked in the code with the test categories, do that instead. The result should be just two tests run, and both pass. Here are the Test Results detailed report. Be sure to change the Outcome to show all the tests.</p>
<p><a href="images/17-02-02_11_51.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_11_51.png" title="2017-02-02_112051" alt="2017-02-02_112051"></a></p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_24.html">TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></p>
</div>
              </div>
              
    <div class='paging'><a href='index5.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index7.html'>Older</a></div>
  </section>
  <footer><p>Copyright (c) 2018 Charles L Flatt</p>
</footer>
  
</body>

</html>