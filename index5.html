<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src='http://127.0.0.1:8081/header-scripts/prism.js'></script>

  <link rel='stylesheet' href='http://127.0.0.1:8081/css/default.css' />
<link rel='stylesheet' href='http://127.0.0.1:8081/css/prism.css' />


  <title>Home | Software Meadows</title>
</head>

<body>
  <nav>
    <div id="menu">
      <ol>
<li><a href="http://127.0.0.1:8081/">Home</a></li>
<li><a href="http://127.0.0.1:8081/about">About</a></li>
</ol>

    </div>
    <div id="recent">
      <h2>Recent</h2>
      <a href='http://127.0.0.1:8081/posts/announcing_deepshadow'>Announcing DeepShadow</a><a href='http://127.0.0.1:8081/posts/announcing_deftconfig'>Announcing DeftConfig</a><a href='http://127.0.0.1:8081/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a><a href='http://127.0.0.1:8081/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a><a href='http://127.0.0.1:8081/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a>
    </div>
    <div id="history">
      <h2>History</h2>
      <ol class='tree'><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/announcing_deepshadow'>Announcing DeepShadow</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='http://127.0.0.1:8081/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
    </div>
  </nav>
  <header>
    <div id="site-image">
      <img src="http://127.0.0.1:8081/images/header.png" alt="" />
    </div>
    <h1 id="site-name"></h1>
    <div id="site-subtitle">A pleasant walk through computing</div>
  </header>
  <section id="content">
    <h1 id="home">Home</h1>

  </section>
  <!-- posts only appear in home index -->
  <section id="posts">
    
              <div class='post'>
                <h2 class='post-title'><a href='http://127.0.0.1:8081/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></h2>
                <p class='post-info'><span class='posted-on'>2017-03-08 10:11</span></p>
                <div class='post-content'><h1 id="the-summary">The Summary</h1>
<p>A build agent is what takes care of actually running a build definition. Agents can be installed on machines separate from the TFS server, allowing workload distribution.</p>
<p>The simple way to understand an agent is to imagine how you'd create continuous integration yourself.</p>
<ol>
<li><p>You'd have a machine that could build the software. That means you'd have to install anything needed to accomplish the build, such as Visual Studio, 3rd party controls, certificates, tools, etc.</p>
</li>
<li><p>You'd write a script that could automate the build and report errors.</p>
</li>
<li><p>You'd create a way of running that script on demand, such as developing a Windows service.</p>
</li>
</ol>
<p>That's all TFS Build is doing. You configure the steps (the build script) on the TFS server as a build definition. You install an agent on a machine that can check out the source code and successfully build the application. TFS calls the agent on demand.</p>
<p>It was unclear to me if I needed a licensed version of Visual Studio, or VS installed at all. The answers are:</p>
<ul>
<li>If you're not using the Visual Studio build step, and only the MS Build step, you might be able to get away with installing the <a href="https://www.microsoft.com/en-us/download/details.aspx?id=48159">2015 Build Tools</a>.</li>
<li>However, you'll probably need Visual Studio installed. It does <em>not</em> need to be licensed, assuming it's not also being used for development.</li>
</ul>
<p><a href="https://www.microsoft.com/en-us/download/details.aspx?id=13350">VS 2015 Licensing White Paper</a></p>
<blockquote>
<p>Using Visual Studio on the Build Server: If you have one or more licensed users of Visual Studio Enterprise with MSDN, Visual Studio Professional with MSDN, or any Visual Studio cloud subscription then you may also install the Visual Studio software as part of Team Foundation Server 2017 Build Services. This way, you do not need to purchase a Visual Studio license to cover the running of Visual Studio on the build server for each person whose actions initiate a build.</p>
</blockquote>
<h1 id="references">References</h1>
<p>Installing an agent is pretty simple. Really, just read Ben Day's post and you'll find out what you need. It's slightly outdated, but close enough. I've also listed the steps, below.</p>
<p><a href="https://www.benday.com/2016/01/01/walkthrough-create-a-new-tfs2015-build-server/">https://www.benday.com/2016/01/01/walkthrough-create-a-new-tfs2015-build-server/</a></p>
<h1 id="the-installation">The Installation</h1>
<ol>
<li>Install everything needed to build the software. It's best to do this first.</li>
<li>Download the agent from the TFS web. Manage Server (click the right corner gear) &gt; click link "View collection administration page" &gt; open Agent Queues tab &gt; click "Download agent"</li>
<li>Extract the zip into C:\TfsData\Agents[agent name]</li>
<li>Run ConfigureAgent.cmd</li>
<li>Mostly accept the defaults. The TFS server URL will be something like <a href="http://servername:8080/tfs">http://servername:8080/tfs</a>. Answer Y to installing as a service.</li>
</ol>
<p>After installation, you should see the agent in the Agent Queues.</p>
<h1 id="maintenance">Maintenance</h1>
<p><strong>Agent Versions</strong></p>
<p>If you're using a local TFS installation, the agent version is tied to the TFS version. If you update TFS, be sure to update the agents. It's easy. In Agent Queues, right-click the queue and choose Update All Agents.</p>
<p><strong>Adding Agent Capabilities</strong></p>
<p>Normally, all you need to do is install the software with the capability, then restart the agent. However, here are a couple of articles related to capabilities.</p>
<p><a href="http://donovanbrown.com/post/how-to-register-capabilities-on-your-build-and-release-management-agents">How to Register Capabilities</a><br>
<a href="https://www.visualstudio.com/en-us/docs/build/define/general">Demands</a></p>
<h1 id="the-wrap-up">The Wrap Up</h1>
<p>Agents are just services that run build steps. An agent can be installed on almost any machine, letting you easily configure your build environment.</p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://127.0.0.1:8081/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></h2>
                <p class='post-info'><span class='posted-on'>2017-03-06 15:45</span></p>
                <div class='post-content'><h1 id="the-summary">The Summary</h1>
<p>Oh, ClickOnce, you bane of development! You're always so attractive: easily created, self-updating installations. But, like a 21st century TV vampire, you end up sucking the life out of me when things get complicated.</p>
<p>In the case of continuous integration, we need to sign our application using a security certificate, to guarantee the publisher's identity. This makes sense, since the intent is that ClickOnce is installed and maintained from a web site.</p>
<p><a href="http://stackoverflow.com/questions/8955332/what-is-signing-clickonce-manifests-for">http://stackoverflow.com/questions/8955332/what-is-signing-clickonce-manifests-for</a></p>
<p>So, there are two parts to manage in CI: the certificate and the signing.</p>
<p>There are several combinations for trying to build ClickOnce. Is your TFS on site, or are you using Visual Studio Online? Are you signing using a commercial, local-domain, or temporary certificate?</p>
<p>This document is for a specific circumstance:</p>
<ul>
<li>Local TFS 2015</li>
<li>A temporary certificate</li>
</ul>
<blockquote>
<p><strong>Note</strong><br>
This post will <em>not</em> deal with publishing a ClickOnce application via CI.</p>
</blockquote>
<h1 id="the-problems">The Problems</h1>
<p>So what happens when you try to build a ClickOnce app and on a separate CI server (without Visual Studio installed)?</p>
<p>It fails, that's what. At minimum, in the above scenario of using the default temporary certificate (which you shouldn't), it will fail because the signing utility, signtool.exe, isn't installed on the server.</p>
<p>How do you manage the signing process on a locally hosted machine?</p>
<h1 id="locally-installed-tfs">Locally Installed TFS</h1>
<h2 id="install-signtool.exe-on-the-server">Install SignTool.exe on the Server</h2>
<p>When a developer creates a ClickOnce app, she must have the ClickOnce tools installed. In Visual Studio 2015, this is a feature checkbox during installation. If your forgot, you can open Programs and Features, right-click Visual Studio, and choose Change to rerun the installation.</p>
<p><a href="https://social.msdn.microsoft.com/Forums/en-US/2d9414f5-1e78-4d33-b651-d09be74db80d/clickonce-publish-in-visual-studio-2015?forum=winformssetup">https://social.msdn.microsoft.com/Forums/en-US/2d9414f5-1e78-4d33-b651-d09be74db80d/clickonce-publish-in-visual-studio-2015?forum=winformssetup</a></p>
<p><img src="https://social.msdn.microsoft.com/Forums/getfile/714414" alt=""></p>
<p>But we're not going to install Visual Studio on the server.</p>
<h3 id="just-the-files">Just the Files?</h3>
<p>Can we create the appropriate folder path on the server and just copy the needed files, instead of installing 1GB of utilities? Maybe. It looks like the required files are:</p>
<p>signtool.exe<br>
mssign32.dll<br>
wintrust.dll</p>
<p>And the paths are:</p>
<p>C:\Program Files (x86)\Windows Kits\8.1\bin\x86<br>
C:\Program Files (x86)\Windows Kits\10\bin\x86</p>
<p>I used the first path on Windows 10 and it worked fine. This is definitely worth testing before installing the SDK.</p>
<h3 id="via-the-windows-sdk">Via the Windows SDK</h3>
<p>We need to install the super-bloated SDK. Which one?</p>
<p>If you're on Windows 8.1/10/2012/2012R2, install the Windows 10 SDK.</p>
<p><a href="https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk">https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk</a></p>
<p>If you're on Windows 7/8/2008R2, install the Windows 8 SDK.</p>
<p><a href="https://developer.microsoft.com/en-us/windows/downloads/windows-8-1-sdk">https://developer.microsoft.com/en-us/windows/downloads/windows-8-1-sdk</a></p>
<p>During installation, choose the Windows Software Development Kit. Funny, in Windows 10 they moved the SDK to the bottom!</p>
<p><a href="images/17-03-03_151212.png"><img src="http://127.0.0.1:8081/posts/tfs-continuous-integration-clickonce/images/17-03-03_151212.png" alt="2017-03-03_151212" title="2017-03-03_151212"></a></p>
<p><a href="images/17-03-03_151303.png"><img src="http://127.0.0.1:8081/posts/tfs-continuous-integration-clickonce/images/17-03-03_151303.png" alt="2017-03-03_151303" title="2017-03-03_151303"></a></p>
<blockquote>
<p><strong>Note</strong><br>
On my Windows 10 machine, running Visual Studio 2015, when I installed the ClickOnce tools, signtool.exe was installed to the Windows 8.1 SDK folder instead of Windows 10. It works...but go figure.</p>
</blockquote>
<h1 id="the-wrap-up">The Wrap Up</h1>
<p>For my specific case, it was relatively easy to get signing to work during the build. If a non-temporary certificate had been involved, I could have installed that to the server.</p>
<p>This doesn't answer what to do if using Visual Studio Online or some other continuous integration server. That will be an adventure for another day.</p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://127.0.0.1:8081/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></h2>
                <p class='post-info'><span class='posted-on'>2017-03-03 11:01</span></p>
                <div class='post-content'><h1 id="the-summary">The Summary</h1>
<p>What if you</p>
<ol>
<li>Don't store your NuGet packages in source control.</li>
<li>Have a NuGet package that's hosted in a private source.</li>
<li>Need to locally test continuous integration.</li>
<li>Or need offsite (i.e. cloud) continuous integration.</li>
</ol>
<p>There are a few general solutions.</p>
<ol>
<li>Store the private packages in source control. <em><strong>I'd do this one.</strong></em></li>
<li>Set up public access to the private source. Not likely.</li>
<li>For testing, set up a local private NuGet source (just point to the folder).</li>
</ol>
<h1 id="the-problems">The Problems</h1>
<p>NuGet packages are generally great. But there can be problems when it comes to source control and continuous integration.</p>
<p>Most sites' advice on storing NuGet packages in source control (regardless of git, Mercurial, TFS, SVN, etc) is: don't.</p>
<p>The reason is pretty simple. If package restore is enabled, they'll get downloaded and rebuilt anyway, so why store them and take up repository space? With the later NuGet installations, a cache is maintained in the user's profile, so a trip to the NuGet servers might not even be necessary.</p>
<p>The counter argument is also pretty simple. What if the NuGet source isn't available? Suddenly, you can't restore your packages, can't build, can't work. When would this happen?</p>
<p>All of these assume you've downloaded from source control (such as GitHub or TFS), but haven't built the code yet.</p>
<ol>
<li>You get on a plane and then try to build. If you have no Internet, you can't get the packages.</li>
<li>For some other reason you don't have an Internet connection.</li>
<li>You're connected, but the NuGet site is down.</li>
<li>One of the packages uses a locally (i.e. corporate internal) hosted NuGet source. It's not on the internet, so you can't download the package.</li>
<li>It's been a long time since anyone's built the source, and a package has been removed from NuGet.</li>
<li>You use the cloud for continuous integration, which won't have access to your private NuGet source.</li>
</ol>
<p>Most of the above can be solved by building the solution immediately after getting it. But here's a real-world example of number 4. I was working for a client, and had access to their Team Foundation Server. I got the source via a VPN connection, copied it to my laptop, and tried to build. This client has several NuGet packages they host locally. They're proprietary, so hosting them on a public site like NuGet would be wrong.</p>
<p>And I didn't have access to that package source, so I couldn't build.</p>
<p>Again, these problems could be solved, and maybe they point to some environment changes needing to be made. But wouldn't it be just as easy to include the package in source control?</p>
<h1 id="including-the-nuget-package-folder-in-tfs">Including the NuGet Package Folder in TFS</h1>
<p>If you're using a version of TFS prior to 2012, I can't help you (and you should upgrade). Starting in TFS 2012, the tfignore file became available. The purpose of tfignore is just like gitignore and hgignore: tell source control which files to not display for adding/tracking.</p>
<p>But it can also be used to explicitly allow files. Why is this needed? Because, unlike git or Mercurial, TFS + Visual Studio ignores certain files by default, and I haven't found a way to change that or even find out what files those are. Dlls are ignored by default, for example.</p>
<ol>
<li>Create the .tfignore file in the root of the team project.</li>
<li>Edit the file.</li>
<li>Add the package fies to TFS.</li>
<li>Add your .tfignore file to source control.</li>
</ol>
<p>The manual way to create a .tfignore file is, in the project folder root</p>
<ol>
<li>Right-click &gt; New &gt; Text File</li>
<li>Enter <code>.tfignore.</code></li>
</ol>
<p>See the trailing period? That's the magic sauce. Otherwise, Windows doesn't let you create a file/folder with a leading period.</p>
<p>Visual Studio shows package folders in Excluded Changes by default. But dlls, and sometimes lib folders, are <em>not</em> included, and we absolutely need those.</p>
<p>Here's how to include the <em>entire</em> packages folder. The leading ! means "don't ignore".</p>
<pre><code class="language-csharp">!packages\*
</code></pre>
<p>These don't work. Note, especially, that leading backslash doesn't work, even thought that's what VS itself will create via the GUI.</p>
<ul>
<li>!\packages*.*</li>
<li>!packages</li>
<li>!packages\</li>
</ul>
<p>To include a specific package, such as one that's hosted in a private NuGet source, ignore the packages folder, then specify the package path without the version number.</p>
<pre><code class="language-csharp">packages
!packages\My.Private.Utility.*
</code></pre>
<p>In Visual Studio Team Explorer, choose Pending Changes, find Excluded Changes, click Detected: x adds(s).</p>
<p><a href="images/17-03-03_101910.png"><img src="http://127.0.0.1:8081/posts/tfs-continuous-integration-and-private/images/17-03-03_101910.png" alt="2017-03-03_101910" title="2017-03-03_101910"></a></p>
<p>Deselect all files (they're selected by default, a <em>bad</em> choice), then check the ones you want and Promote them (which is the same as "add" in git or Mercurial).</p>
<p><a href="images/17-03-03_103218.png"><img src="http://127.0.0.1:8081/posts/tfs-continuous-integration-and-private/images/17-03-03_103218.png" alt="2017-03-03_103218" title="2017-03-03_103218"></a></p>
<h1 id="using-a-private-repo-for-testing">Using a Private Repo for Testing</h1>
<p>If you're testing CI on a separate machine, you can use or modify a nuget.config file to include that source. I tried this at the project level, but it didn't work, so I created the nuget.config file at the solution level. (But that ability is supposedly removed in later NuGet versions. So confusing!)</p>
<p>Here's an example file:</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;packageRestore&gt;
    &lt;add key="enabled" value="True" /&gt;
    &lt;add key="automatic" value="True" /&gt;
  &lt;/packageRestore&gt;
  &lt;packageSources&gt;
    &lt;add key="nuget.org" value="https://api.nuget.org/v3/index.json" protocolVersion="3" /&gt;
  &lt;add key="local" value="C:\Users\charles\Documents\Testing\NuGet\" /&gt;
  &lt;/packageSources&gt;
&lt;/configuration&gt;
</code></pre>
<p>Again, this must not end up in the production source control repository!</p>
<h1 id="the-wrap-up">The Wrap Up</h1>
<p>I'm not weighing in on storing NuGet packages in source control, except to say that there are some situations where it's clear to me it's a good ideal. Having a private NuGet source involved is one.</p>
</div>
              </div>
              
    <div class='paging'><a href='index4.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index6.html'>Older</a></div>
  </section>
  <footer><p>Copyright (c) 2018 Charles L Flatt</p>
</footer>
  
</body>

</html>