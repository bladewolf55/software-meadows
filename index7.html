<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <link rel='stylesheet' href='http://www.softwaremeadows.com/css/default.css' />
<link rel='stylesheet' href='http://www.softwaremeadows.com/css/tango.css' />

  <title>Home | Software Meadows</title>
</head>

<body>
  <nav>
    <div id="menu">
      <ol>
<li><a href="http://www.softwaremeadows.com/">Home</a></li>
<li><a href="http://www.softwaremeadows.com/about">About</a></li>
</ol>

    </div>
    <div id="recent">
      <h2>Recent</h2>
      <a href='http://www.softwaremeadows.com/posts/announcing_deepshadow'>Announcing DeepShadow</a><a href='http://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a><a href='http://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a><a href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a><a href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a>
    </div>
    <div id="history">
      <h2>History</h2>
      <ol class='tree'><li class='history-year'><label for='2018'>2018</label><input type='checkbox'  id='2018' /><ol><li class='history-month'><label for='2018-3'>March</label><input type='checkbox'  id='2018-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/announcing_deepshadow'>Announcing DeepShadow</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/announcing_deftconfig'>Announcing DeftConfig</a></li></ol></li><li class='history-month'><label for='2018-1'>January</label><input type='checkbox'  id='2018-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs_2015_publish_asp_net_using_robocopy'>TFS 2015: Publish ASP.NET Using Robocopy</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_2'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/combining_veracrypt_google_backup_sync_sql_server_part_1'>Combining VeraCrypt, Google Backup & Sync, and Sql Server Part 1</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/new-blog-engine'>New Blog Engine</a></li></ol></li></ol></li><li class='history-year'><label for='2017'>2017</label><input type='checkbox'  id='2017' /><ol><li class='history-month'><label for='2017-8'>August</label><input type='checkbox'  id='2017-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/dont-use-data-prefix-in-angularjs'>Don't use "data" prefix in AngularJS</a></li></ol></li><li class='history-month'><label for='2017-7'>July</label><input type='checkbox'  id='2017-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/angularjs-service-with-var-declarations'>AngularJS service with var declarations instead of this. assignments</a></li></ol></li><li class='history-month'><label for='2017-6'>June</label><input type='checkbox'  id='2017-6' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/factory-resetting-android-without'>Factory Resetting Android Without Losing Your Life (Metaphorically)</a></li></ol></li><li class='history-month'><label for='2017-5'>May</label><input type='checkbox'  id='2017-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-4'>IdentityServer3 with PKCE Part 4 - Persisting User Data</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-3'>IdentityServer3 with PKCE Part 3 - Persist IdentityServer Configuration</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-2'>IdentityServer3 with PKCE Part 2 - Protected Resource Server</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/identityserver3-with-pkce-part-1-simple'>IdentityServer3 with PKCE Part 1 - Simple OAuth2 Server</a></li></ol></li><li class='history-month'><label for='2017-3'>March</label><input type='checkbox'  id='2017-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 5c - Multiple Solutions: Dependencies</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/sane-database-schema-conventions'>Sane Database Schema Conventions</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-agent'>TFS Continuous Integration - Agent Installation and Visual Studio Licensing</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-clickonce'>TFS Continuous Integration - ClickOnce Apps</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-and-private'>TFS Continuous Integration and Private NuGet Package Sources</a></li></ol></li><li class='history-month'><label for='2017-2'>February</label><input type='checkbox'  id='2017-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_22'>TFS Continuous Integration Walk Through Part 5b - Multiple Solutions: Simple Project References</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_20'>TFS Continuous Integration Walk Through Part 5a - Multiple Solutions: Overview</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_24'>TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through'>TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></li></ol></li><li class='history-month'><label for='2017-1'>January</label><input type='checkbox'  id='2017-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/what-else-programmers-do-text'>What Else Programmers Do: A Text Manipulation Example</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/what-does-this-code-do-extended'>What does this code do? Extended explanation</a></li></ol></li></ol></li><li class='history-year'><label for='2016'>2016</label><input type='checkbox'  id='2016' /><ol><li class='history-month'><label for='2016-12'>December</label><input type='checkbox'  id='2016-12' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/nexus-5-gps-lock-problem-and-two'>Nexus 5 GPS Lock Problem and Three--or More!--Solutions</a></li></ol></li><li class='history-month'><label for='2016-11'>November</label><input type='checkbox'  id='2016-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-bypass-new-microsoft-office'>How to Bypass the New Microsoft Office Startup and Save Screens</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/google-tasks-vs-reminders-in-desktop'>Google Tasks vs Reminders in Desktop and Phone</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-claims-based-identity-part-1_6'>Catching Up on Coding - Claims-Based Identity Part 1</a></li></ol></li><li class='history-month'><label for='2016-10'>October</label><input type='checkbox'  id='2016-10' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/creating-forms-authentication'>Creating Forms Authentication Membership Tables in LocalDB–Right and Wrong Ways</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-10-complaint-1-auto-update'>Windows 10 Complaint #1: Auto Update State Loss</a></li></ol></li><li class='history-month'><label for='2016-9'>September</label><input type='checkbox'  id='2016-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/disable-windows-10-photo-automatic'>Disable Windows 10 Photo Automatic Albums</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-laymans-explanation-of-mocking-and'>A Layman’s Explanation of Mocking and Dependency Injection</a></li></ol></li><li class='history-month'><label for='2016-8'>August</label><input type='checkbox'  id='2016-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-3'>Catching Up on Coding - TDD Part 3</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-2'>Catching Up on Coding - TDD Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-tdd-part-1'>Catching Up on Coding - TDD Part 1</a></li></ol></li><li class='history-month'><label for='2016-7'>July</label><input type='checkbox'  id='2016-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/writing-to-current-users-registry-when'>Writing to the Current User(s) Registry When Running as System</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/catching-up-on-coding-syllabus'>Catching Up on Coding - The Syllabus</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/quickly-enable-mercurial-keyring-for'>Quickly Enable Mercurial Keyring for BitBucket</a></li></ol></li><li class='history-month'><label for='2016-6'>June</label><input type='checkbox'  id='2016-6' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/create-easily-debuggable-windows-service'>Create an Easily Debuggable Windows Service</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/underrated-work-skills'>(Underrated) Work Skills</a></li></ol></li><li class='history-month'><label for='2016-5'>May</label><input type='checkbox'  id='2016-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/vbnet-windows-project-to-c-conversion'>VB.Net Windows Project to C# Conversion Tools Quick Review</a></li></ol></li><li class='history-month'><label for='2016-2'>February</label><input type='checkbox'  id='2016-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/scroll-bars-in-blogger-tags'>Scroll bars in Blogger &lt;pre&gt; Tags</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/google-keep-changes-taking-to-forums'>Google Keep Changes: Taking to the Forums</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/backward-step-for-google-keep'>Backward Step for Google Keep</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/recover-virtualbox-snapshots'>Recover VirtualBox Snapshots</a></li></ol></li><li class='history-month'><label for='2016-1'>January</label><input type='checkbox'  id='2016-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/auto-updating-new-windows-7-installation'>Auto Updating a New Windows 7 Installation</a></li></ol></li></ol></li><li class='history-year'><label for='2015'>2015</label><input type='checkbox'  id='2015' /><ol><li class='history-month'><label for='2015-8'>August</label><input type='checkbox'  id='2015-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/shoretel-brilliantly-simple'>ShoreTel - Brilliantly Simple?</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/the-google-photos-management-problems'>The Google Photos Management Problem(s)</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/creating-long-lasting-clickonce'>Creating a Long-Lasting ClickOnce Certificate</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/more-encrypted-config-filesclickonce'>More Encrypted Config Files–ClickOnce Complications</a></li></ol></li><li class='history-month'><label for='2015-7'>July</label><input type='checkbox'  id='2015-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/encrypting-appconfig'>Encrypting app.config</a></li></ol></li><li class='history-month'><label for='2015-3'>March</label><input type='checkbox'  id='2015-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/better-google-sites-designthe-notched'>Better Google Sites Design–The Notched Page</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/removing-unremovable-bluetooth-device'>Removing Unremovable Bluetooth Device: FAIL!</a></li></ol></li></ol></li><li class='history-year'><label for='2014'>2014</label><input type='checkbox'  id='2014' /><ol><li class='history-month'><label for='2014-11'>November</label><input type='checkbox'  id='2014-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-remove-savernet-and-similar'>How to remove Savernet (and similar) Chrome extension</a></li></ol></li><li class='history-month'><label for='2014-9'>September</label><input type='checkbox'  id='2014-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/prevent-word-from-restoring-minimized'>Prevent Word from Restoring Minimized Documents</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/clever-phish'>Clever Phish</a></li></ol></li><li class='history-month'><label for='2014-8'>August</label><input type='checkbox'  id='2014-8' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/enable-synaptics-touchpad-2-finger-tap'>Enable Synaptics touchpad 2-finger tap context menu</a></li></ol></li><li class='history-month'><label for='2014-5'>May</label><input type='checkbox'  id='2014-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/installing-fcm-flow-cytrometry-library'>Installing fcm flow cytrometry library on Windows 8.1</a></li></ol></li><li class='history-month'><label for='2014-4'>April</label><input type='checkbox'  id='2014-4' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-update-1-driver-problem-dtmb'>Windows 8.1 Update 1 Driver Problem DTMB BDA TV USB</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-window-key-s-search-from'>Windows 8.1: Window Key + S = Search from Desktop</a></li></ol></li><li class='history-month'><label for='2014-3'>March</label><input type='checkbox'  id='2014-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/whs-2011-windows-update-one-or-more'>WHS 2011 Windows Update “One or more services are no running” alert</a></li></ol></li><li class='history-month'><label for='2014-2'>February</label><input type='checkbox'  id='2014-2' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem-continued'>Lenovo U530 Touch WiFi Problem Continued</a></li></ol></li><li class='history-month'><label for='2014-1'>January</label><input type='checkbox'  id='2014-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/lenovo-u530-touch-wifi-problem'>Lenovo U530 Touch WiFi Problem</a></li></ol></li></ol></li><li class='history-year'><label for='2013'>2013</label><input type='checkbox'  id='2013' /><ol><li class='history-month'><label for='2013-12'>December</label><input type='checkbox'  id='2013-12' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/whs-connector-restart-error-in-windows'>WHS Connector Restart Error in Windows 8.0/8.1</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/how-to-remove-apps-from-google-play-my'>How to Remove Apps from Google Play My Apps Site</a></li></ol></li><li class='history-month'><label for='2013-11'>November</label><input type='checkbox'  id='2013-11' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/windows-81-hidden-opt-ins-opt-outs'>Windows 8.1 Hidden Opt Ins/ Opt Outs</a></li></ol></li><li class='history-month'><label for='2013-9'>September</label><input type='checkbox'  id='2013-9' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-epilogue'>Edward Farley and the Fantastic Library Epilogue</a></li></ol></li><li class='history-month'><label for='2013-7'>July</label><input type='checkbox'  id='2013-7' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-2-end'>A Week (or More!) of JoliCloud - Day 2: THE END</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/a-week-or-more-of-jolicloud-day-1'>A Week (or More!) of JoliCloud - Day 1</a></li></ol></li><li class='history-month'><label for='2013-5'>May</label><input type='checkbox'  id='2013-5' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-12'>Edward Farley and the Fantastic Library Part 12</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-1019'>Edward Farley and the Fantastic Library Part 11</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-10'>Edward Farley and the Fantastic Library Part 10</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-9'>Edward Farley and the Fantastic Library Part 9</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-8'>Edward Farley and the Fantastic Library Part 8</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-7'>Edward Farley and the Fantastic Library Part 7</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-6'>Edward Farley and the Fantastic Library Part 6</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-5'>Edward Farley and the Fantastic Library Part 5</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-4'>Edward Farley and the Fantastic Library Part 4</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-3'>Edward Farley and the Fantastic Library Part 3</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-2'>Edward Farley and the Fantastic Library Part 2</a></li><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/edward-farley-part-1'>Edward Farley and the Fantastic Library Part 1</a></li></ol></li><li class='history-month'><label for='2013-4'>April</label><input type='checkbox'  id='2013-4' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/clean-up-orphaned-sql-users'>Clean Up Orphaned SQL Users</a></li></ol></li><li class='history-month'><label for='2013-3'>March</label><input type='checkbox'  id='2013-3' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/t-sql-one-to-one-cant-be-done'>T-SQL One to One Can't Be Done</a></li></ol></li><li class='history-month'><label for='2013-1'>January</label><input type='checkbox'  id='2013-1' /><ol><li class='history-post'><a class='history-post' href='http://www.softwaremeadows.com/posts/test-post-with-code'>Migrating Google Drive</a></li></ol></li></ol></li></ol>
    </div>
  </nav>
  <header>
    <div id="site-image">
      <img src="http://www.softwaremeadows.com/images/header.png" alt="" />
    </div>
    <h1 id="site-name"></h1>
    <div id="site-subtitle">A pleasant walk through computing</div>
  </header>
  <section id="content">
    <h1 id="home">Home</h1>

  </section>
  <!-- posts only appear in home index -->
  <section id="posts">
    
              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6'>TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-06 07:56</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_63.html">TFS Continuous Integration Walk Through Part 3 - Notifications</a></p>
<p><strong>References</strong> <a href="https://www.visualstudio.com/en-us/docs/build/steps/test/visual-studio-test">Test: Visual Studio Test</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2012/11/20/part-2using-traits-with-different-test-frameworks-in-the-unit-test-explorer/">Part 2: Using Traits with different test frameworks</a> <a href="https://blogs.msdn.microsoft.com/visualstudioalm/2013/06/11/part-3-unit-testing-with-traits-and-code-coverage-in-visual-studio-2012-using-the-tfs-build-and-the-new-nuget-adapter-approach/">Part 3: Unit testing with Traits and filtering...</a> &lt;-Note that the documentation on mapping "Category" is wrong, see below! <a href="https://blogs.msdn.microsoft.com/vikramagrawal/2012/07/23/running-selective-unit-tests-in-vs-2012-rc-using-testcasefilter/">Running selective unit tests in VS 2012 RC using TestCaseFilter</a> <a href="http://www.dotnetcatch.com/2016/03/11/vststfs-visual-studio-test-task-filter-criteria/">VSTS/TFS Visual Studio Test Task - Filter Criteria</a> <a href="https://msdn.microsoft.com/en-us/library/hh270865.aspx#BKMK_Group_and_filter_the_test_list">Running unit tests with Test Explorer: Group and Filter</a> <a href="https://msdn.microsoft.com/en-us/library/dd286683.aspx">How to: Group and Run Automated Tests Using Test Categories</a> <a href="https://github.com/Microsoft/vsts-tasks/blob/releases/m109/Tasks/VsTest/README.md">Run Tests using Visual Studio task</a></p>
<p>In some environments, not all unit tests should be run on the CI server. For example, there might be tests with external dependencies that are expensive to run, such as a fee for verifying data was saved to an external cloud-based site. Or legacy tests that require manual setup or interaction. Or, the most likely, a test that takes a very long time to run. While these should probably be refactored or replaced, the fact is sometimes we don't want all our tests running automatically.</p>
<p>One way to restrict tests running is to use the "Test filter criteria" setting. A simple example is using test categories to isolate the manual tests. "TestCategory", "Priority", "Name", etc are all generically referred to as <em>traits</em>.</p>
<p>Before showing the example, there are two rules for using traits with the Microsoft test console, which is the executable that runs tests regardless of framework.</p>
<blockquote>
<p><strong>Test Filter Criteria Rule</strong> If you set test filter criteria, at least one of your unit tests in every assembly <em>must</em> match that criteria. Otherwise, an error will occur.</p>
</blockquote>
<p>In practice, this means that if your filter is looking for <code>TestCategory=weekly</code>, any project that uses the build definition, and has tests, must have at least one test with a trait named "TestCategory". (For more detail, see <em>Part 4b - Problems With Traits</em>.)</p>
<p>This will make more sense as you go through the code below.</p>
<p>Add the following class to Program.cs. This is <em>simulating</em> a cloud-based retrieval of a greeting. For some fictitious reason, it's very expensive to do this.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">public</span> <span class="kw">class</span> CloudMan</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">//This takes ten minutes to run!</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">public</span> <span class="dt">string</span> <span class="fu">GetLastGreeting</span>()</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">{</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">//Set up connection, pass credentials, etc.</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw">return</span> <span class="st">""</span>;</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">}</a></code></pre></div>
<p>Add the following test methods:</p>
<p><strong>MSTest</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb2-1" data-line-number="1">[TestMethod]</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">[<span class="fu">TestCategory</span>(<span class="st">"manual"</span>)]</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveGreetingToCloud</span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">//arrange</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="dt">string</span> value = <span class="st">"Cloud Atlas"</span>;</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="dt">string</span> expectedResult = <span class="st">"Hello, Charles"</span>;</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">TextMan textMan = <span class="kw">new</span> <span class="fu">TextMan</span>();</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">CloudMan cloudMan = <span class="kw">new</span> <span class="fu">CloudMan</span>();</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">//act</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="dt">string</span> actualResult = textMan.<span class="fu">Greeter</span>(value);</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">//assert</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">Assert.<span class="fu">AreEqual</span>(expectedResult, cloudMan.<span class="fu">GetLastGreeting</span>());</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">}</a></code></pre></div>
<p><strong>xUnit</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb3-1" data-line-number="1">[Fact]</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">[<span class="fu">Trait</span>(<span class="st">"TestCategory"</span>, <span class="st">"manual"</span>)]</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveGreetingToCloud</span>()</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">//arrange</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="dt">string</span> value = <span class="st">"Cloud Atlas"</span>;</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="dt">string</span> expectedResult = <span class="st">"Hello, Charles"</span>;</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">TextMan textMan = <span class="kw">new</span> <span class="fu">TextMan</span>();</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">CloudMan cloudMan = <span class="kw">new</span> <span class="fu">CloudMan</span>();</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">//act</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="dt">string</span> actualResult = textMan.<span class="fu">Greeter</span>(value);</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">//assert</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">Assert.<span class="fu">Equal</span>(expectedResult, cloudMan.<span class="fu">GetLastGreeting</span>());</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">}</a></code></pre></div>
<p>MSTest uses a TestCategory attribute for categories. xUnit uses its Trait attribute to set a "TestCategory" trait (traits are also the way to set "Priority").</p>
<blockquote>
<p><strong>Note</strong> You <em>must</em> set the xUnit trait name to TestCategory in this example, or the test won't be discovered. See <em>Part 4b - Problems With Traits</em> for more information.</p>
</blockquote>
<p>If you run the tests locally right now, the new tests will still fail because the category is ignored. Likewise, if you check in the code, the tests will fail on the CI server because there's no filter, yet.</p>
<h2 id="applying-the-filters">Applying the Filters</h2>
<p>It's possible to filter tests locally. One way is from the command line.</p>
<p><a href="https://msdn.microsoft.com/en-us/library/dd286683.aspx" class="uri">https://msdn.microsoft.com/en-us/library/dd286683.aspx</a></p>
<p>But you can also group by traits in the Text Explorer, and selectively run the tests. (This doesn't work so well if you're using multiple test frameworks).</p>
<p><a href="images/17-02-02_1030.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_1030.png" title="2017-02-02_102530" alt="2017-02-02_102530"></a></p>
<p>We want our CI server to only run the non-manual tests. Let's apply the filter in TFS Build. Edit the build definition as shown above, and select the Visual Studio Test step. Add the "Test Filter criteria" <code>TestCategory!=manual</code> and Save.</p>
<p><a href="images/17-02-02_103011.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_103011.png" title="2017-02-02_103011" alt="2017-02-02_103011"></a></p>
<p>Click "Queue build" to rerun the build. If you haven't checked in the code with the test categories, do that instead. The result should be just two tests run, and both pass. Here are the Test Results detailed report. Be sure to change the Outcome to show all the tests.</p>
<p><a href="images/17-02-02_11_51.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_6/images/17-02-02_11_51.png" title="2017-02-02_112051" alt="2017-02-02_112051"></a></p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_24.html">TFS Continuous Integration Walk Through Part 4b - Problems With Traits</a></p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63'>TFS Continuous Integration Walk Through Part 3 - Notifications</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-05 18:42</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_5.html">TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></p>
<p>That's great, right? It worked. But it's not going to help me if I don't know the build failed, and I'm not going to keep a TFS page open, watching it like a hawk. I want email alerts.</p>
<blockquote>
<p><strong>Note</strong> There used to be another option for notifications: the Build Notification application. It would show build failure notifications in the status tray. But that only works for XAML builds. There appears to be a third party utility that does the same thing for the modern builds: <a href="https://catlight.io/">CatLight</a>.</p>
</blockquote>
<h2 id="configure-smtp-for-email">Configure SMTP for Email</h2>
<p><strong>References</strong> <a href="https://www.visualstudio.com/en-us/docs/setup-admin/tfs/admin/setup-customize-alerts">Configure an SMTP server and customize email for alerts and feedback requests in TFS</a> <a href="https://www.youtube.com/watch?v=bdJvYgK9XnU">TFS Email via Gmail Account</a> &lt;- He enables POP3, but you don't have to.</p>
<p>These steps assume you have administrative access to the administration console.</p>
<p>Open the Team Foundation Server Administration Console, select Application Tier, scroll down to and open Alert Settings.</p>
<p><a href="images/17-01-31_114324.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_114324.png" title="2017-01-31_114324" alt="2017-01-31_114324"></a></p>
<p>In the Settings window, check Enable Email Alerts and configure your SMTP server settings. In my case, I used my Gmail account for testing.</p>
<blockquote>
<p><strong>Note</strong> There are challenges getting Gmail SMTP to work in TFS that are beyond the scope of this article. That means, it would take too much space to document it all.</p>
</blockquote>
<p><a href="images/17-01-31_114911.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_114911.png" title="2017-01-31_114911" alt="2017-01-31_114911"></a></p>
<p>Send a test email.</p>
<p><a href="images/17-01-31_115054.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_115054.png" title="2017-01-31_115054" alt="2017-01-31_115054"></a> <a href="images/17-01-31_115_5.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_115_5.png" title="2017-01-31_115205" alt="2017-01-31_115205"></a></p>
<h2 id="configure-tfs-alerts">Configure TFS Alerts</h2>
<p><strong>References</strong> <a href="https://msdn.microsoft.com/en-us/library/ms181725.aspx">Receive build notifications</a></p>
<p>Alerts are configured per team project. You can create project alerts from the Team Explorer &gt; Settings, but below I show how to do it from the web site.</p>
<p>Open the main TFS page and click the Settings gear icon.</p>
<p><a href="images/17-01-31_123851.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_123851.png" title="2017-01-31_123851" alt="2017-01-31_123851"></a></p>
<p>Select the CI Console Sample project. Click "View the project administration page"</p>
<p><a href="images/17-01-31_124017.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_124017.png" title="2017-01-31_124017" alt="2017-01-31_124017"></a></p>
<p>Open the Alerts tab. Click the link under Create New Alert When... "A build fails". In the dialog, enter the Send To email address and click OK.</p>
<p><a href="images/17-01-31_124245.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_124245.png" title="2017-01-31_124245" alt="2017-01-31_124245"></a></p>
<h2 id="configure-team-tfs-alerts">Configure Team TFS Alerts</h2>
<p>Here's a simple configuration for build notifications. It assumes</p>
<ul>
<li>Not everyone on the team should be notified of build failures.</li>
<li>There are two developers on the team who should receive notifications if <em>any</em> build fails.</li>
</ul>
<p>Open the Overview tab in the Control panel. Click "New team".</p>
<p><a href="images/17-03-07_1_812.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-03-07_1_812.png" title="2017-03-07_120812" alt="2017-03-07_120812"></a></p>
<p>Name the team something like "Build Failures". In the Permissions, leave as Contributers. Click Create Team.</p>
<blockquote>
<p><strong>Option</strong> You could also allow anyone on the team to be a Build Admin by choosing that group.</p>
</blockquote>
<p><a href="images/17-03-07_1212.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-03-07_1212.png" title="2017-03-07_121236" alt="2017-03-07_121236"></a></p>
<p>Edit the team and add any desired team members.</p>
<p>Open the Alerts tab. Click the link under Create New Alert When... "A build fails". Rename as desired. The only difference from a personal alert is the Subscriber. In this case, "Build Failures" is the team who will receive the alert. Click OK.</p>
<p><a href="images/17-03-07_121630.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-03-07_121630.png" title="2017-03-07_121630" alt="2017-03-07_121630"></a></p>
<h2 id="test-notification">Test Notification</h2>
<p>Make a change of some kind to the source code (but that <em>doesn't</em> pass the tests!) and check in your changes. That will start a build. When the build fails, you should get an email.</p>
<p><a href="images/17-01-31_124659.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_124659.png" title="2017-01-31_124659" alt="2017-01-31_124659"></a></p>
<h2 id="test-success">Test Success</h2>
<p>Let's finally get our test passing. Update the Greeting code, confirm the tests pass locally, then check in. You should not get an email alert, and you should see a successful build.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">public</span> <span class="kw">class</span> TextMan</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">public</span> <span class="dt">string</span> <span class="fu">Greeter</span>(<span class="dt">string</span> value)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">return</span> <span class="st">"Hello, "</span> + value;</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">}</a></code></pre></div>
<p><a href="images/17-01-31_1046.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_63/images/17-01-31_1046.png" title="2017-01-31_125046" alt="2017-01-31_125046"></a></p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_6.html">TFS Continuous Integration Walk Through Part 4a - Filtering Tests</a></p>
</div>
              </div>
              

              <div class='post'>
                <h2 class='post-title'><a href='http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5'>TFS Continuous Integration Walk Through Part 2 - Create an Automated Build</a></h2>
                <p class='post-info'><span class='posted-on'>2017-02-05 14:10</span></p>
                <div class='post-content'><p><a href="images/ci-logo.png"> <img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/ci-logo.png" title="ci-logo" alt="ci-logo"></a>This is part of a series of walk throughs exploring CI in TFS, starting from the ground up. The entire series and source code are maintained at this BitBucket repository. <a href="https://bitbucket.org/bladewolf55/tfs-ci-samples" class="uri">https://bitbucket.org/bladewolf55/tfs-ci-samples</a></p>
<p>Previous Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through.html">TFS Continuous Integration Walk Through Part 1 - Installing TFS and Checking In a Test Project</a></p>
<h2 id="add-the-solution-to-a-new-build-definition">Add the Solution to a New Build Definition</h2>
<p><strong>References</strong> <a href="https://www.visualstudio.com/en-us/docs/build/get-started/dot-net">Build your .NET app for Windows</a></p>
<p>You can get to the web-based "create new build" wizard a couple of ways.</p>
<ol>
<li>In the Visual Studio solution, switch to Team Explorer, click the Home icon, then drop down Home and choose Builds. <a href="images/17-01-31_101042.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_101042.png" title="2017-01-31_101042" alt="2017-01-31_101042"></a></li>
<li>On the TFS web site (http://[tfs-site]:8080/tfs), select your team project if visible, or click Browse and navigate to it that way. On the project page, open the Build menu and click the plus sign. <a href="images/17-01-31_102849.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_102849.png" title="2017-01-31_102849" alt="2017-01-31_102849"></a></li>
</ol>
<p>Either way gets to the "Create new build definition" wizard. Choose "Visual Studio" and click Next.</p>
<p><a href="images/17-01-31_102926.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_102926.png" title="2017-01-31_102926" alt="2017-01-31_102926"></a></p>
<p>Choose the Repository source, in this case the CI Console Sample. We only have one agent queue, the default. Click Create.</p>
<p><a href="images/17-01-31_103317.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_103317.png" title="2017-01-31_103317" alt="2017-01-31_103317"></a></p>
<p>This adds a set of build steps to the definition. Click Save and name the definition. Definitions can be used by multiple solutions, so something generic like "Default Visual Studio Build" will work.</p>
<blockquote>
<p><strong>Note</strong> The Visual Studio Test step will auto-discover many third-party test adapters, including xUnit. It's <em>not</em> necessary to set the path in the step's Advanced &gt; Path to Custom Test Adapters field for this example.</p>
</blockquote>
<p><a href="images/17-01-31_103740.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_103740.png" title="2017-01-31_103740" alt="2017-01-31_103740"></a></p>
<p>Let's test the build with the default steps. Click "Queue build", the OK.</p>
<p><a href="images/17-01-31_104047.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_104047.png" title="2017-01-31_104047" alt="2017-01-31_104047"></a></p>
<p>The build will run in a pretty cool web-based console window. As expected, the unit tests fail.</p>
<p><a href="images/17-01-31_104540.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_104540.png" title="2017-01-31_104540" alt="2017-01-31_104540"></a></p>
<p>There's also a summary error message at the end.</p>
<p><a href="images/17-01-31_104648.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_104648.png" title="2017-01-31_104648" alt="2017-01-31_104648"></a></p>
<h2 id="buildconfiguration-default--release">BuildConfiguration Default = Release</h2>
<p><strong>References</strong> <a href="http://stackoverflow.com/questions/3416665/unit-testing-on-a-build-server-release-or-debug-code">Unit testing on a build server : Release or Debug code?</a></p>
<p>Notice, above, when we queued the build that we got a dialog letting us set some variables. These variables are part of the build definition, in the Variables tab.</p>
<p><a href="images/17-01-31_104700.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_104700.png" title="2017-01-31_104700" alt="2017-01-31_104700"></a></p>
<p>At first, I thought this was a poor choice for a default. And, I do have a concern. But after reading the article referenced above, I realized...</p>
<blockquote>
<p><strong>CI Principle</strong> Auto-build your application to the code your customers will be using.</p>
</blockquote>
<p>When would building in Release mode be a problem? The first thing I thought of was web.config transforms. What if you have this appSetting in your default web.config...</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">&lt;appSettings&gt;</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">&lt;add</span><span class="ot"> key=</span><span class="st">"SysopEmail"</span><span class="ot"> value=</span><span class="st">"developers@example.com"</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">&lt;/appSettings&gt;</span></a></code></pre></div>
<p>and this one in Web.Release.config...</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">&lt;appSettings&gt;</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">&lt;add</span><span class="ot"> key=</span><span class="st">"SysopEmail"</span><span class="ot"> value=</span><span class="st">"live-support@example.com"</span><span class="ot"> xdt:Transform=</span><span class="st">"Replace"</span><span class="ot"> xdt:Locator=</span><span class="st">"Match(key)"</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">&lt;/appSettings&gt;</span></a></code></pre></div>
<p>And, further, you have a method that's being tested that looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cs"><code class="sourceCode cs"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">SaveCustomer</span>(ICustomer customer)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="dt">var</span> service = <span class="kw">new</span> <span class="fu">CustomerService</span>();</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">try</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">{</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">service.<span class="fu">Save</span>(customer);</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw">catch</span> (Exception ex)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">{</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">MailService.<span class="fu">SendError</span>(ConfigurationManager.<span class="fu">AppSettings</span>[<span class="st">"SysopEmail"</span>], ex);</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">}</a></code></pre></div>
<p>Now, CustomerService should be mocked, and that <em>should</em> lead to no errors being generated, but "should" has nothing to do with reality. Do we want our CI tests to email our production support on error? No, because they'll think there's a problem in the production system.</p>
<p>There's anything wrong with the method <em>per se</em>. You can argue that settings like this should be in a database. Fine. But until then, what to do?</p>
<p>I don't know. I'm just pointing out that in some cases, the CI build configuration might need to be something other that Release.</p>
<h2 id="enable-and-test-continuous-integration">Enable and Test Continuous Integration</h2>
<p>Let's test that a build will run the next time we commit source code changes. And, let's be a sloppy developer, too.</p>
<p>First, we need to configure the build definition to trigger when we check in. On the TFS site, in the team project, choose the Build menu, select the Default Visual Studio Build, and click Edit.</p>
<p><a href="images/17-01-31_110712.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_110712.png" title="2017-01-31_110712" alt="2017-01-31_110712"></a></p>
<p>Open Triggers, check Continuous Integration, leave the defaults, and Save.</p>
<p><a href="images/17-01-31_110924.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_110924.png" title="2017-01-31_110924" alt="2017-01-31_110924"></a></p>
<p>Back in our solution, change the TextMan.Greeter method as follows. Note that this will <em>not</em> pass.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">public</span> <span class="kw">class</span> TextMan</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">public</span> <span class="dt">string</span> <span class="fu">Greeter</span>(<span class="dt">string</span> value)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">return</span> value;</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">}</a></code></pre></div>
<p>You can run the tests if you want to prove they fail.</p>
<p><a href="images/17-01-31_105424.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_105424.png" title="2017-01-31_105424" alt="2017-01-31_105424"></a></p>
<p>Now for the fun. On the TFS web site, go to the team project's Build tab, select the Default Visual Studio Build, and open the Queued view. Keep this page visible if you can. We want to see the build automatically start.</p>
<p><a href="images/17-01-31_1059.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_1059.png" title="2017-01-31_105936" alt="2017-01-31_105936"></a></p>
<p>In Team Explorer, click Pending Changes</p>
<p><a href="images/17-01-31_105614.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_105614.png" title="2017-01-31_105614" alt="2017-01-31_105614"></a></p>
<p>Enter a comment and click Check In.</p>
<p><a href="images/17-01-31_110109.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_110109.png" title="2017-01-31_110109" alt="2017-01-31_110109"></a></p>
<p>Back on the TFS site page, click Refresh and the build should appear.</p>
<p><a href="images/17-01-31_111112.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_111112.png" title="2017-01-31_111112" alt="2017-01-31_111112"></a></p>
<p>You can open the build and wait for it to finish (i.e. "fail"). The summary page nicely tells you who authored the last changes.</p>
<p><a href="images/17-01-31_111405.png"><img src="http://www.softwaremeadows.com/posts/tfs-continuous-integration-walk-through_5/images/17-01-31_111405.png" title="2017-01-31_111405" alt="2017-01-31_111405"></a></p>
<p>Our build server is successfully automatically building on check in!</p>
<p>Next Part: <a href="http://www.softwaremeadows.com/2017/02/tfs-continuous-integration-walk-through_63.html">TFS Continuous Integration Walk Through Part 3 - Notifications</a></p>
</div>
              </div>
              
    <div class='paging'><a href='index6.html'>Newer</a>&nbsp;&nbsp;&nbsp;<a href='index8.html'>Older</a></div>
  </section>
  <footer><p>Copyright (c) 2018 Charles L Flatt</p>
</footer>
  
</body>

</html>